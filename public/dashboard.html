<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Public - Dinor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        [x-cloak] { display: none !important; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .tab-button.active { 
            @apply border-yellow-500 text-yellow-600 bg-yellow-50;
        }
        .loading {
            @apply animate-pulse;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        .modal {
            -webkit-backdrop-filter: blur(4px);
            backdrop-filter: blur(4px);
        }
        .gallery-thumb {
            transition: transform 0.2s ease;
        }
        .gallery-thumb:hover {
            transform: scale(1.05);
        }
        .image-overlay {
            background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, transparent 50%);
        }
        
        /* Animations pour la modal */
        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes modalSlideIn {
            from { 
                opacity: 0; 
                transform: translateY(-50px) scale(0.95); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }
        
        .modal-enter {
            animation: modalFadeIn 0.3s ease-out;
        }
        
        .modal-content-enter {
            animation: modalSlideIn 0.3s ease-out;
        }
        
        /* Zoom pour les images */
        .image-zoom {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: zoom-out;
        }
        
        .image-zoom img {
            max-width: 90vw;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }
        
        @keyframes zoomIn {
            from { 
                opacity: 0; 
                transform: scale(0.5); 
            }
            to { 
                opacity: 1; 
                transform: scale(1); 
            }
        }
        
        .zoom-enter {
            animation: zoomIn 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-gray-50" x-data="dashboardApp()">
    <div class="min-h-screen">
        <!-- Header avec gradient Dinor -->
        <header class="gradient-bg shadow-lg">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-6">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-white rounded-lg flex items-center justify-center mr-4">
                            <span class="text-2xl font-bold text-yellow-600">D</span>
                        </div>
                        <div>
                            <h1 class="text-3xl font-bold text-white">Dashboard Dinor</h1>
                            <p class="text-yellow-100">Plateforme culinaire ivoirienne</p>
                        </div>
                    </div>
                    <div class="text-right text-white">
                        <div class="text-lg font-semibold" x-text="new Date().toLocaleDateString('fr-FR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })"></div>
                        <div class="text-yellow-100 text-sm">Données en temps réel</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Statistiques générales améliorées -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8">
                <!-- Recettes -->
                <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                    <div class="flex items-center">
                        <div class="p-3 bg-green-100 rounded-lg">
                            <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                            </svg>
                        </div>
                        <div class="ml-4 flex-1">
                            <p class="text-sm font-medium text-gray-500">Recettes disponibles</p>
                            <p class="text-3xl font-bold text-gray-900" x-text="stats.recipes || '...'"></p>
                            <p class="text-xs text-green-600 mt-1">+12 cette semaine</p>
                        </div>
                    </div>
                </div>

                <!-- Événements -->
                <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                    <div class="flex items-center">
                        <div class="p-3 bg-blue-100 rounded-lg">
                            <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                        </div>
                        <div class="ml-4 flex-1">
                            <p class="text-sm font-medium text-gray-500">Événements actifs</p>
                            <p class="text-3xl font-bold text-gray-900" x-text="stats.events || '...'"></p>
                            <p class="text-xs text-blue-600 mt-1">À venir ce mois</p>
                        </div>
                    </div>
                </div>

                <!-- Pages -->
                <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                    <div class="flex items-center">
                        <div class="p-3 bg-purple-100 rounded-lg">
                            <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                        </div>
                        <div class="ml-4 flex-1">
                            <p class="text-sm font-medium text-gray-500">Pages publiées</p>
                            <p class="text-3xl font-bold text-gray-900" x-text="stats.pages || '...'"></p>
                            <p class="text-xs text-purple-600 mt-1">Contenu statique</p>
                        </div>
                    </div>
                </div>

                <!-- Astuces -->
                <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                    <div class="flex items-center">
                        <div class="p-3 bg-orange-100 rounded-lg">
                            <svg class="w-8 h-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                            </svg>
                        </div>
                        <div class="ml-4 flex-1">
                            <p class="text-sm font-medium text-gray-500">Astuces disponibles</p>
                            <p class="text-3xl font-bold text-gray-900" x-text="stats.tips || '...'"></p>
                            <p class="text-xs text-orange-600 mt-1">Conseils pratiques</p>
                        </div>
                    </div>
                </div>

                <!-- Interactions -->
                <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                    <div class="flex items-center">
                        <div class="p-3 bg-yellow-100 rounded-lg">
                            <svg class="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                            </svg>
                        </div>
                        <div class="ml-4 flex-1">
                            <p class="text-sm font-medium text-gray-500">Interactions totales</p>
                            <p class="text-3xl font-bold text-gray-900" x-text="stats.interactions || '...'"></p>
                            <p class="text-xs text-yellow-600 mt-1">Likes & commentaires</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation par onglets améliorée -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="border-b border-gray-200 bg-gray-50">
                    <nav class="flex space-x-8 px-6">
                        <button @click="activeTab = 'recipes'; loadRecipes()" 
                                :class="activeTab === 'recipes' ? 'border-yellow-500 text-yellow-600 bg-yellow-50' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                                class="whitespace-nowrap py-4 px-4 border-b-2 font-medium text-sm transition-all duration-200 rounded-t-lg">
                            🍽️ Recettes
                        </button>
                        <button @click="activeTab = 'events'; loadEvents()" 
                                :class="activeTab === 'events' ? 'border-yellow-500 text-yellow-600 bg-yellow-50' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                                class="whitespace-nowrap py-4 px-4 border-b-2 font-medium text-sm transition-all duration-200 rounded-t-lg">
                            📅 Événements
                        </button>
                        <button @click="activeTab = 'pages'; loadPages()" 
                                :class="activeTab === 'pages' ? 'border-yellow-500 text-yellow-600 bg-yellow-50' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                                class="whitespace-nowrap py-4 px-4 border-b-2 font-medium text-sm transition-all duration-200 rounded-t-lg">
                            📄 Pages
                        </button>
                        <button @click="activeTab = 'tips'; loadTips()" 
                                :class="activeTab === 'tips' ? 'border-yellow-500 text-yellow-600 bg-yellow-50' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                                class="whitespace-nowrap py-4 px-4 border-b-2 font-medium text-sm transition-all duration-200 rounded-t-lg">
                            💡 Astuces
                        </button>
                    </nav>
                </div>

                <!-- Contenu des onglets -->
                <div class="p-6">
                    <!-- Onglet Recettes -->
                    <div x-show="activeTab === 'recipes'" x-cloak>
                        <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 space-y-4 lg:space-y-0">
                            <h2 class="text-2xl font-bold text-gray-900">Recettes culinaires</h2>
                            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 w-full lg:w-auto">
                                <input type="text" 
                                       x-model="searchTerms.recipes"
                                       @input.debounce.300ms="searchRecipes()"
                                       placeholder="🔍 Rechercher des recettes..."
                                       class="px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500">
                                <select x-model="filters.recipeCategory" @change="loadRecipes()" class="px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500">
                                    <option value="">🏷️ Toutes les catégories</option>
                                    <template x-for="category in categories" :key="category.id">
                                        <option :value="category.id" x-text="category.name"></option>
                                    </template>
                                </select>
                            </div>
                        </div>
                        
                        <div x-show="loading.recipes" class="text-center py-12">
                            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-600 mx-auto"></div>
                            <p class="mt-4 text-gray-500 font-medium">Chargement des recettes savoureuses...</p>
                        </div>

                        <div x-show="!loading.recipes" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <template x-for="recipe in recipes" :key="recipe.id">
                                <div class="bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden card-hover cursor-pointer"
                                     @click="openModal('recipe', recipe)">
                                    <!-- Image principale -->
                                    <div class="relative h-48 bg-gray-200 overflow-hidden">
                                        <img :src="recipe.featured_image ? recipe.featured_image : '/storage/recipes/featured/default-recipe.jpg'" 
                                             :alt="recipe.title"
                                             class="w-full h-full object-cover transition-transform duration-300 hover:scale-105"
                                             @error="$event.target.src='/storage/recipes/featured/default-recipe.jpg'">
                                        <div class="absolute inset-0 image-overlay"></div>
                                        <div class="absolute top-4 right-4">
                                            <span :class="recipe.difficulty === 'easy' ? 'bg-green-100 text-green-800' : recipe.difficulty === 'medium' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'" 
                                                  class="text-xs px-3 py-1 rounded-full font-medium backdrop-blur-sm bg-opacity-90" x-text="recipe.difficulty"></span>
                                        </div>
                                        <div class="absolute bottom-4 left-4 text-white">
                                            <div class="flex items-center space-x-3 text-sm">
                                                <span class="flex items-center bg-black bg-opacity-30 px-2 py-1 rounded">
                                                    ⏱️ <span x-text="(recipe.preparation_time || 30) + 'min'" class="ml-1"></span>
                                                </span>
                                                <span class="flex items-center bg-black bg-opacity-30 px-2 py-1 rounded">
                                                    👥 <span x-text="(recipe.servings || 4) + ' pers'" class="ml-1"></span>
                                                </span>
                                            </div>
                                        </div>
                                        <!-- Indicateur de galerie -->
                                        <div x-show="recipe.gallery && recipe.gallery.length > 0" class="absolute top-4 left-4">
                                            <div class="bg-black bg-opacity-50 text-white px-2 py-1 rounded-full text-xs flex items-center">
                                                📷 <span x-text="recipe.gallery.length" class="ml-1"></span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="p-6">
                                        <div class="mb-3">
                                            <h3 class="font-bold text-lg text-gray-900 line-clamp-2 mb-2" x-text="recipe.title"></h3>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-4 line-clamp-3" x-text="recipe.description || recipe.short_description || 'Délicieuse recette à découvrir'"></p>
                                        
                                        <div class="flex justify-between items-center">
                                            <span class="text-sm font-medium text-yellow-600" x-text="recipe.category ? recipe.category.name : 'Cuisine générale'"></span>
                                            <span class="text-xs text-gray-400" x-text="new Date(recipe.created_at).toLocaleDateString('fr-FR')"></span>
                                        </div>
                                        
                                        <!-- Aperçu galerie -->
                                        <div x-show="recipe.gallery && recipe.gallery.length > 0" class="mt-4">
                                            <div class="flex space-x-2 overflow-x-auto">
                                                <template x-for="(image, index) in recipe.gallery.slice(0, 4)" :key="index">
                                                    <img :src="image" 
                                                         class="w-12 h-12 object-cover rounded-lg gallery-thumb flex-shrink-0"
                                                         @error="$event.target.style.display='none'">
                                                </template>
                                                <div x-show="recipe.gallery.length > 4" 
                                                     class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center text-xs text-gray-500 flex-shrink-0">
                                                    +<span x-text="recipe.gallery.length - 4"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>

                        <div x-show="!loading.recipes && recipes.length === 0" class="text-center py-12">
                            <div class="text-6xl mb-4">🍽️</div>
                            <p class="text-xl text-gray-500 font-medium">Aucune recette trouvée</p>
                            <p class="text-gray-400 mt-2">Essayez de modifier vos critères de recherche</p>
                        </div>
                    </div>

                    <!-- Onglet Événements -->
                    <div x-show="activeTab === 'events'" x-cloak>
                        <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 space-y-4 lg:space-y-0">
                            <h2 class="text-2xl font-bold text-gray-900">Événements culinaires</h2>
                            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 w-full lg:w-auto">
                                <input type="text" 
                                       x-model="searchTerms.events"
                                       @input.debounce.300ms="searchEvents()"
                                       placeholder="🔍 Rechercher des événements..."
                                       class="px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500">
                                <select x-model="filters.eventType" @change="loadEvents()" class="px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500">
                                    <option value="">📅 Tous les événements</option>
                                    <option value="upcoming">🔜 À venir</option>
                                    <option value="featured">⭐ En vedette</option>
                                </select>
                            </div>
                        </div>
                        
                        <div x-show="loading.events" class="text-center py-12">
                            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-600 mx-auto"></div>
                            <p class="mt-4 text-gray-500 font-medium">Chargement des événements...</p>
                        </div>

                        <div x-show="!loading.events" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <template x-for="event in events" :key="event.id">
                                <div class="bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden card-hover cursor-pointer"
                                     @click="openModal('event', event)">
                                    <!-- Image principale -->
                                    <div class="relative h-48 bg-gray-200 overflow-hidden">
                                        <img :src="event.featured_image ? event.featured_image : '/storage/events/featured/default-event.jpg'" 
                                             :alt="event.title"
                                             class="w-full h-full object-cover transition-transform duration-300 hover:scale-105"
                                             @error="$event.target.src='/storage/events/featured/default-event.jpg'">
                                        <div class="absolute inset-0 image-overlay"></div>
                                        <div class="absolute top-4 right-4">
                                            <span class="text-xs px-3 py-1 bg-blue-100 text-blue-800 rounded-full font-medium backdrop-blur-sm bg-opacity-90" x-text="event.event_type || 'événement'"></span>
                                        </div>
                                        <div class="absolute bottom-4 left-4 text-white">
                                            <div class="text-sm">
                                                <div x-show="event.start_date" class="bg-black bg-opacity-30 px-2 py-1 rounded mb-1">
                                                    📅 <span x-text="new Date(event.start_date).toLocaleDateString('fr-FR')"></span>
                                                </div>
                                                <div x-show="event.is_free || event.price" class="bg-black bg-opacity-30 px-2 py-1 rounded">
                                                    💰 <span x-text="event.is_free ? 'Gratuit' : event.price + ' ' + (event.currency || 'XOF')"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Indicateur de galerie -->
                                        <div x-show="event.gallery && event.gallery.length > 0" class="absolute top-4 left-4">
                                            <div class="bg-black bg-opacity-50 text-white px-2 py-1 rounded-full text-xs flex items-center">
                                                📷 <span x-text="event.gallery.length" class="ml-1"></span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="p-6">
                                        <div class="mb-3">
                                            <h3 class="font-bold text-lg text-gray-900 line-clamp-2 mb-2" x-text="event.title"></h3>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-4 line-clamp-3" x-text="event.description || event.short_description || 'Événement culinaire passionnant'"></p>
                                        
                                        <div class="space-y-2 text-sm text-gray-600 mb-4">
                                            <div class="flex items-center" x-show="event.location">
                                                <svg class="w-4 h-4 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                                </svg>
                                                <span x-text="event.location + (event.city ? ', ' + event.city : '')"></span>
                                            </div>
                                        </div>
                                        
                                        <div class="flex justify-between items-center">
                                            <span class="text-sm font-medium text-yellow-600" x-text="event.category ? event.category.name : 'Événement culinaire'"></span>
                                            <span class="text-xs text-gray-400" x-text="new Date(event.created_at).toLocaleDateString('fr-FR')"></span>
                                        </div>
                                        
                                        <!-- Aperçu galerie -->
                                        <div x-show="event.gallery && event.gallery.length > 0" class="mt-4">
                                            <div class="flex space-x-2 overflow-x-auto">
                                                <template x-for="(image, index) in event.gallery.slice(0, 4)" :key="index">
                                                    <img :src="image" 
                                                         class="w-12 h-12 object-cover rounded-lg gallery-thumb flex-shrink-0"
                                                         @error="$event.target.style.display='none'">
                                                </template>
                                                <div x-show="event.gallery.length > 4" 
                                                     class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center text-xs text-gray-500 flex-shrink-0">
                                                    +<span x-text="event.gallery.length - 4"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>

                        <div x-show="!loading.events && events.length === 0" class="text-center py-12">
                            <div class="text-6xl mb-4">📅</div>
                            <p class="text-xl text-gray-500 font-medium">Aucun événement trouvé</p>
                            <p class="text-gray-400 mt-2">Revenez bientôt pour découvrir nos prochains événements</p>
                        </div>
                    </div>

                    <!-- Onglet Pages -->
                    <div x-show="activeTab === 'pages'" x-cloak>
                        <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 space-y-4 lg:space-y-0">
                            <h2 class="text-2xl font-bold text-gray-900">Pages du site</h2>
                            <div class="w-full lg:w-auto">
                                <input type="text" 
                                       x-model="searchTerms.pages"
                                       @input.debounce.300ms="searchPages()"
                                       placeholder="🔍 Rechercher des pages..."
                                       class="px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 w-full lg:w-64">
                            </div>
                        </div>
                        
                        <div x-show="loading.pages" class="text-center py-12">
                            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-600 mx-auto"></div>
                            <p class="mt-4 text-gray-500 font-medium">Chargement des pages...</p>
                        </div>

                        <div x-show="!loading.pages" class="space-y-4">
                            <template x-for="page in pages" :key="page.id">
                                <div class="bg-gradient-to-r from-white to-gray-50 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 card-hover">
                                    <div class="p-6">
                                        <div class="flex justify-between items-start">
                                            <div class="flex-1">
                                                <div class="flex items-center mb-2">
                                                    <h3 class="font-bold text-lg text-gray-900 mr-3" x-text="page.title"></h3>
                                                    <span x-show="page.is_homepage" class="text-xs px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full font-medium">
                                                        🏠 Accueil
                                                    </span>
                                                </div>
                                                <p class="text-sm text-gray-600 mb-3 line-clamp-2" x-text="page.content ? page.content.substring(0, 200) + '...' : 'Page informative de votre site web'"></p>
                                                <div class="flex items-center text-xs text-gray-500 space-x-4">
                                                    <span class="flex items-center">
                                                        🔗 <span x-text="'/' + (page.slug || 'page')" class="ml-1 font-mono"></span>
                                                    </span>
                                                    <span class="flex items-center">
                                                        📝 <span x-text="new Date(page.updated_at).toLocaleDateString('fr-FR')" class="ml-1"></span>
                                                    </span>
                                                    <span x-show="page.is_published" class="flex items-center text-green-600">
                                                        ✅ Publié
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>

                        <div x-show="!loading.pages && pages.length === 0" class="text-center py-12">
                            <div class="text-6xl mb-4">📄</div>
                            <p class="text-xl text-gray-500 font-medium">Aucune page trouvée</p>
                            <p class="text-gray-400 mt-2">Le contenu sera bientôt disponible</p>
                        </div>
                    </div>

                    <!-- Onglet Astuces (nouveau) -->
                    <div x-show="activeTab === 'tips'" x-cloak>
                        <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 space-y-4 lg:space-y-0">
                            <h2 class="text-2xl font-bold text-gray-900">Astuces culinaires</h2>
                            <div class="w-full lg:w-auto">
                                <input type="text" 
                                       x-model="searchTerms.tips"
                                       @input.debounce.300ms="searchTips()"
                                       placeholder="🔍 Rechercher des astuces..."
                                       class="px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 w-full lg:w-64">
                            </div>
                        </div>
                        
                        <div x-show="loading.tips" class="text-center py-12">
                            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-600 mx-auto"></div>
                            <p class="mt-4 text-gray-500 font-medium">Chargement des astuces...</p>
                        </div>

                        <div x-show="!loading.tips" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <template x-for="tip in tips" :key="tip.id">
                                <div class="bg-gradient-to-br from-white to-yellow-50 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden card-hover">
                                    <div class="p-6">
                                        <div class="flex justify-between items-start mb-3">
                                            <h3 class="font-bold text-lg text-gray-900 line-clamp-2" x-text="tip.title"></h3>
                                            <span :class="tip.difficulty_level === 'beginner' ? 'bg-green-100 text-green-800' : tip.difficulty_level === 'intermediate' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'" 
                                                  class="text-xs px-3 py-1 rounded-full font-medium" x-text="tip.difficulty_level || 'débutant'"></span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-4 line-clamp-4" x-text="tip.content ? tip.content.substring(0, 150) + '...' : 'Astuce culinaire pratique'"></p>
                                        
                                        <div class="flex items-center justify-between text-xs text-gray-500 mb-3">
                                            <span class="flex items-center">
                                                ⏱️ <span x-text="(tip.estimated_time || 5) + ' min'" class="ml-1"></span>
                                            </span>
                                            <span class="flex items-center">
                                                💡 <span x-text="tip.category ? tip.category.name : 'Astuce générale'" class="ml-1"></span>
                                            </span>
                                        </div>
                                        
                                        <div class="flex justify-between items-center">
                                            <span x-show="tip.is_featured" class="text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full font-medium">
                                                ⭐ En vedette
                                            </span>
                                            <span class="text-xs text-gray-400" x-text="new Date(tip.created_at).toLocaleDateString('fr-FR')"></span>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>

                        <div x-show="!loading.tips && tips.length === 0" class="text-center py-12">
                            <div class="text-6xl mb-4">💡</div>
                            <p class="text-xl text-gray-500 font-medium">Aucune astuce trouvée</p>
                            <p class="text-gray-400 mt-2">Nos experts préparent de nouveaux conseils</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Image Zoom Overlay -->
        <div x-show="imageZoom.isOpen" 
             x-cloak
             class="image-zoom zoom-enter"
             @click="closeImageZoom()"
             @keydown.escape="closeImageZoom()">
            <img :src="imageZoom.imageSrc" 
                 :alt="imageZoom.imageAlt"
                 title="Image agrandie - Cliquez pour fermer"
                 class="max-w-full max-h-full object-contain"
                 @click.stop>
        </div>

        <!-- Modal de détails -->
        <div x-show="modal.isOpen" 
             x-cloak
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0"
             class="fixed inset-0 z-50 overflow-y-auto modal modal-enter"
             @click.away="closeModal()"
             @keydown.escape="closeModal()"
            <div class="min-h-screen px-4 text-center">
                <!-- Overlay -->
                <div class="fixed inset-0 bg-black bg-opacity-50 transition-opacity" @click="closeModal()"></div>
                
                <!-- Centrage vertical -->
                <span class="inline-block h-screen align-middle" aria-hidden="true">&#8203;</span>
                
                <!-- Modal panel -->
                <div class="inline-block w-full max-w-4xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl modal-content-enter"
                     x-transition:enter="transition ease-out duration-300"
                     x-transition:enter-start="opacity-0 scale-95"
                     x-transition:enter-end="opacity-100 scale-100"
                     x-transition:leave="transition ease-in duration-200"
                     x-transition:leave-start="opacity-100 scale-100"
                     x-transition:leave-end="opacity-0 scale-95">
                    <!-- Header modal -->
                    <div class="flex justify-between items-start mb-6">
                        <h3 class="text-2xl font-bold text-gray-900" x-text="modal.data?.title || 'Détails'"></h3>
                        <button @click="closeModal()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                    </div>
                    
                    <!-- Contenu modal recette -->
                    <div x-show="modal.type === 'recipe'">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Galerie d'images -->
                            <div>
                                <!-- Image principale -->
                                <div class="mb-4">
                                    <img :src="modal.data?.featured_image || '/storage/recipes/featured/default-recipe.jpg'" 
                                         :alt="modal.data?.title"
                                         class="w-full h-64 object-cover rounded-lg cursor-zoom-in hover:opacity-95 transition-opacity"
                                         x-ref="modalMainImage"
                                         @click="openImageZoom($refs.modalMainImage.src, modal.data?.title)"
                                         @error="$event.target.src='/storage/recipes/featured/default-recipe.jpg'">
                                </div>
                                
                                <!-- Galerie thumbnails -->
                                <div x-show="modal.data?.gallery && modal.data.gallery.length > 0" class="grid grid-cols-4 gap-2">
                                    <template x-for="(image, index) in modal.data?.gallery || []" :key="index">
                                        <img :src="image" 
                                             :alt="`Image ${index + 1}`"
                                             class="w-full h-16 object-cover rounded-lg cursor-pointer hover:opacity-75 transition-opacity border-2 border-transparent hover:border-yellow-300"
                                             @click="$refs.modalMainImage.src = image"
                                             @dblclick="openImageZoom(image, `${modal.data?.title} - Image ${index + 1}`)"
                                             @error="$event.target.style.display='none'">
                                    </template>
                                </div>
                            </div>
                            
                            <!-- Informations détaillées -->
                            <div>
                                <!-- Badges -->
                                <div class="flex items-center space-x-2 mb-4">
                                    <span :class="modal.data?.difficulty === 'easy' ? 'bg-green-100 text-green-800' : modal.data?.difficulty === 'medium' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'" 
                                          class="px-3 py-1 rounded-full text-sm font-medium" x-text="modal.data?.difficulty || 'facile'"></span>
                                    <span class="bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm font-medium" x-text="modal.data?.category?.name || 'Cuisine générale'"></span>
                                </div>
                                
                                <!-- Description -->
                                <p class="text-gray-600 mb-6" x-text="modal.data?.description || modal.data?.short_description || 'Délicieuse recette à découvrir'"></p>
                                
                                <!-- Informations de cuisson -->
                                <div class="grid grid-cols-2 gap-4 mb-6">
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <div class="text-2xl mb-2">⏱️</div>
                                        <div class="text-sm text-gray-500">Temps de préparation</div>
                                        <div class="font-bold" x-text="(modal.data?.preparation_time || 30) + ' minutes'"></div>
                                    </div>
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <div class="text-2xl mb-2">👥</div>
                                        <div class="text-sm text-gray-500">Portions</div>
                                        <div class="font-bold" x-text="(modal.data?.servings || 4) + ' personnes'"></div>
                                    </div>
                                </div>
                                
                                <!-- Ingrédients -->
                                <div x-show="modal.data?.ingredients && modal.data.ingredients.length > 0" class="mb-6">
                                    <h4 class="font-bold text-lg mb-3">🥘 Ingrédients</h4>
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <ul class="text-sm text-gray-600 space-y-1">
                                            <template x-for="ingredient in modal.data?.ingredients || []" :key="ingredient">
                                                <li class="flex items-start">
                                                    <span class="text-yellow-500 mr-2">•</span>
                                                    <span x-text="ingredient"></span>
                                                </li>
                                            </template>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- Instructions -->
                                <div x-show="modal.data?.instructions && modal.data.instructions.length > 0" class="mb-6">
                                    <h4 class="font-bold text-lg mb-3">📝 Instructions</h4>
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <ol class="text-sm text-gray-600 space-y-2">
                                            <template x-for="(instruction, index) in modal.data?.instructions || []" :key="index">
                                                <li class="flex items-start">
                                                    <span class="bg-yellow-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-0.5 flex-shrink-0" x-text="index + 1"></span>
                                                    <span x-text="instruction"></span>
                                                </li>
                                            </template>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Contenu modal événement -->
                    <div x-show="modal.type === 'event'">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Galerie d'images -->
                            <div>
                                <!-- Image principale -->
                                <div class="mb-4">
                                    <img :src="modal.data?.featured_image || '/storage/events/featured/default-event.jpg'" 
                                         :alt="modal.data?.title"
                                         class="w-full h-64 object-cover rounded-lg cursor-zoom-in hover:opacity-95 transition-opacity"
                                         x-ref="modalMainImageEvent"
                                         @click="openImageZoom($refs.modalMainImageEvent.src, modal.data?.title)"
                                         @error="$event.target.src='/storage/events/featured/default-event.jpg'">
                                </div>
                                
                                <!-- Galerie thumbnails -->
                                <div x-show="modal.data?.gallery && modal.data.gallery.length > 0" class="grid grid-cols-4 gap-2">
                                    <template x-for="(image, index) in modal.data?.gallery || []" :key="index">
                                        <img :src="image" 
                                             :alt="`Image ${index + 1}`"
                                             class="w-full h-16 object-cover rounded-lg cursor-pointer hover:opacity-75 transition-opacity border-2 border-transparent hover:border-yellow-300"
                                             @click="$refs.modalMainImageEvent.src = image"
                                             @dblclick="openImageZoom(image, `${modal.data?.title} - Image ${index + 1}`)"
                                             @error="$event.target.style.display='none'">
                                    </template>
                                </div>
                            </div>
                            
                            <!-- Informations détaillées -->
                            <div>
                                <!-- Badges -->
                                <div class="flex items-center space-x-2 mb-4">
                                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium" x-text="modal.data?.event_type || 'événement'"></span>
                                    <span class="bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm font-medium" x-text="modal.data?.category?.name || 'Événement culinaire'"></span>
                                </div>
                                
                                <!-- Description -->
                                <p class="text-gray-600 mb-6" x-text="modal.data?.description || modal.data?.short_description || 'Événement culinaire passionnant'"></p>
                                
                                <!-- Informations événement -->
                                <div class="space-y-4 mb-6">
                                    <div x-show="modal.data?.start_date" class="flex items-center">
                                        <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                        </svg>
                                        <div>
                                            <div class="font-medium">Date</div>
                                            <div class="text-sm text-gray-500" x-text="modal.data?.start_date ? new Date(modal.data.start_date).toLocaleDateString('fr-FR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }) : ''"></div>
                                        </div>
                                    </div>
                                    
                                    <div x-show="modal.data?.location" class="flex items-center">
                                        <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                        <div>
                                            <div class="font-medium">Lieu</div>
                                            <div class="text-sm text-gray-500" x-text="(modal.data?.location || '') + (modal.data?.city ? ', ' + modal.data.city : '')"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center">
                                        <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                                        </svg>
                                        <div>
                                            <div class="font-medium">Prix</div>
                                            <div class="text-sm text-gray-500" x-text="modal.data?.is_free ? 'Gratuit' : (modal.data?.price || 'À définir') + ' ' + (modal.data?.currency || 'XOF')"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Programme -->
                                <div x-show="modal.data?.program" class="mb-6">
                                    <h4 class="font-bold text-lg mb-3">📋 Programme</h4>
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <div class="text-sm text-gray-600 space-y-2">
                                            <template x-for="(line, index) in (modal.data?.program || '').split('\n')" :key="index">
                                                <div x-show="line.trim()" class="flex items-start">
                                                    <span class="bg-blue-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold mr-3 mt-0.5 flex-shrink-0" x-text="index + 1"></span>
                                                    <span x-text="line.trim()"></span>
                                                </div>
                                            </template>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Footer modal -->
                    <div class="mt-6 flex justify-end space-x-3">
                        <button @click="closeModal()" 
                                class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-colors">
                            Fermer
                        </button>
                        <button @click="goToDetailPage()" 
                                class="px-4 py-2 text-sm font-medium text-white bg-yellow-600 border border-transparent rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-colors">
                            <span x-show="modal.type === 'recipe'">📖 Voir la recette complète</span>
                            <span x-show="modal.type === 'event'">📅 S'inscrire à l'événement</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section des Routes API -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
                <div class="bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4">
                    <h2 class="text-2xl font-bold text-white flex items-center">
                        <svg class="w-8 h-8 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        Routes API Disponibles
                    </h2>
                    <p class="text-blue-100 mt-1">Endpoints pour l'intégration avec l'application mobile</p>
                </div>
                
                <div class="p-6">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        
                        <!-- Recettes API -->
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
                                🍽️ API Recettes
                            </h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/recipes" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/recipes</a>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/recipes/1" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/recipes/{id}</a>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/recipes/featured/list" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/recipes/featured/list</a>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/recipes/categories/list" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/recipes/categories/list</a>
                                </div>
                            </div>
                        </div>

                        <!-- Catégories API -->
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
                                🏷️ API Catégories
                            </h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/categories" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/categories</a>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-blue-600">POST</span>
                                    <span class="text-gray-600 font-mono text-xs">/api/v1/categories</span>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/categories/check" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/categories/check</a>
                                </div>
                            </div>
                        </div>

                        <!-- Événements API -->
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
                                📅 API Événements
                            </h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/events" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/events</a>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/events/1" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/events/{id}</a>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/events/upcoming/list" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/events/upcoming/list</a>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/events/featured/list" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/events/featured/list</a>
                                </div>
                            </div>
                        </div>

                        <!-- Astuces API -->
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
                                💡 API Astuces
                            </h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/tips" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/tips</a>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/tips/1" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/tips/{id}</a>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/tips/featured/list" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/tips/featured/list</a>
                                </div>
                            </div>
                        </div>

                        <!-- Dinor TV API -->
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
                                📺 API Dinor TV
                            </h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/dinor-tv" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/dinor-tv</a>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/dinor-tv/featured/list" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/dinor-tv/featured/list</a>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/dinor-tv/live/list" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/dinor-tv/live/list</a>
                                </div>
                            </div>
                        </div>

                        <!-- Pages API -->
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
                                📄 API Pages
                            </h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/pages" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/pages</a>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/pages/homepage" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/pages/homepage</a>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/pages/menu" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/pages/menu</a>
                                </div>
                            </div>
                        </div>

                        <!-- Dashboard API -->
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
                                📊 API Dashboard
                            </h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/dashboard" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/dashboard</a>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/likes" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/likes</a>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/v1/comments" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/v1/comments</a>
                                </div>
                            </div>
                        </div>

                        <!-- Routes de Test -->
                        <div class="border border-orange-200 rounded-lg p-4 bg-orange-50">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
                                🔧 Routes de Test
                            </h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between items-center py-2 border-b border-orange-200">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/test/recipes-all" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/test/recipes-all</a>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-orange-200">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/test/events-all" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/test/events-all</a>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-orange-200">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/test/categories-all" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/test/categories-all</a>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="font-mono text-green-600">GET</span>
                                    <a href="/api/test/database-check" target="_blank" class="text-blue-600 hover:text-blue-800 font-mono text-xs">/api/test/database-check</a>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    
                    <!-- Note d'information -->
                    <div class="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <div class="flex items-start">
                            <svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <div class="text-sm text-blue-800">
                                <p class="font-semibold mb-1">Notes importantes :</p>
                                <ul class="list-disc list-inside space-y-1">
                                    <li>Toutes les routes API sont accessibles sans authentification</li>
                                    <li>Les réponses sont au format JSON</li>
                                    <li>Certaines routes POST nécessitent des données en body</li>
                                    <li>Les routes de test sont utiles pour le debugging</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="gradient-bg mt-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="text-center text-white">
                    <div class="flex items-center justify-center mb-4">
                        <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center mr-3">
                            <span class="text-lg font-bold text-yellow-600">D</span>
                        </div>
                        <span class="text-xl font-bold">Dinor Dashboard</span>
                    </div>
                    <p class="text-yellow-100 mb-4">Plateforme culinaire ivoirienne - Dashboard public en temps réel</p>
                    <div class="flex items-center justify-center space-x-6 text-sm text-yellow-100">
                        <span>🌐 Admin: <a href="/admin" class="underline hover:text-white">localhost:8000/admin</a></span>
                        <span>📊 API: <a href="/api/v1" class="underline hover:text-white">localhost:8000/api/v1</a></span>
                        <span>📈 Base: <a href="http://localhost:8080" class="underline hover:text-white" target="_blank" rel="noopener">phpMyAdmin</a></span>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        function dashboardApp() {
            return {
                activeTab: 'recipes',
                loading: {
                    recipes: false,
                    events: false,
                    pages: false,
                    tips: false
                },
                stats: {
                    recipes: 0,
                    events: 0,
                    pages: 0,
                    tips: 0,
                    interactions: 0
                },
                recipes: [],
                events: [],
                pages: [],
                tips: [],
                categories: [],
                searchTerms: {
                    recipes: '',
                    events: '',
                    pages: '',
                    tips: ''
                },
                filters: {
                    recipeCategory: '',
                    eventType: ''
                },
                modal: {
                    isOpen: false,
                    type: null,
                    data: null
                },
                imageZoom: {
                    isOpen: false,
                    imageSrc: null,
                    imageAlt: null
                },

                async init() {
                    console.log('Dashboard initializing...');
                    try {
                        await this.loadStats();
                        await this.loadCategories();
                        await this.loadRecipes();
                        console.log('Dashboard initialized successfully');
                    } catch (error) {
                        console.error('Dashboard initialization failed:', error);
                    }
                },

                async loadStats() {
                    console.log('Loading stats...');
                    try {
                        // Load tips count separately
                        let tipsCount = 0;
                        try {
                            const tipsResponse = await fetch('/api/v1/tips?per_page=1');
                            const tipsData = await tipsResponse.json();
                            tipsCount = tipsData.pagination ? tipsData.pagination.total : (tipsData.data ? tipsData.data.length : 0);
                        } catch (error) {
                            console.warn('Erreur tips:', error);
                        }

                        const endpoints = [
                            '/api/v1/recipes',
                            '/api/v1/events', 
                            '/api/v1/pages'
                        ];

                        console.log('Fetching data from endpoints:', endpoints);
                        const responses = await Promise.all(
                            endpoints.map(async (endpoint) => {
                                try {
                                    console.log(`Fetching ${endpoint}...`);
                                    const response = await fetch(endpoint + '?per_page=1');
                                    console.log(`Response for ${endpoint}:`, response.status);
                                    const data = await response.json();
                                    console.log(`Data for ${endpoint}:`, data);
                                    return data.pagination ? data.pagination.total : (data.data ? data.data.length : 0);
                                } catch (error) {
                                    console.warn(`Erreur lors du chargement de ${endpoint}:`, error);
                                    return 0;
                                }
                            })
                        );

                        this.stats.recipes = responses[0] || 0;
                        this.stats.events = responses[1] || 0;
                        this.stats.pages = responses[2] || 0;
                        this.stats.tips = tipsCount;
                        
                        // Calculer interactions (simulation)
                        this.stats.interactions = (this.stats.recipes * 15) + (this.stats.events * 8) + (this.stats.tips * 5) + Math.floor(Math.random() * 100);
                        
                        console.log('Stats loaded:', this.stats);
                        
                    } catch (error) {
                        console.error('Erreur lors du chargement des statistiques:', error);
                        // Valeurs par défaut en cas d'erreur
                        this.stats = { recipes: 3, events: 3, pages: 4, tips: 8, interactions: 156 };
                    }
                },

                async loadCategories() {
                    try {
                        const response = await fetch('/api/v1/recipes/categories/list');
                        const data = await response.json();
                        if (data.success) {
                            this.categories = data.data;
                        }
                    } catch (error) {
                        console.warn('Erreur lors du chargement des catégories:', error);
                    }
                },

                async loadRecipes() {
                    this.loading.recipes = true;
                    try {
                        let url = '/api/v1/recipes?per_page=12';
                        if (this.searchTerms.recipes) {
                            url += `&search=${encodeURIComponent(this.searchTerms.recipes)}`;
                        }
                        if (this.filters.recipeCategory) {
                            url += `&category_id=${this.filters.recipeCategory}`;
                        }

                        const response = await fetch(url);
                        const data = await response.json();
                        if (data.success) {
                            this.recipes = data.data;
                        }
                    } catch (error) {
                        console.error('Erreur lors du chargement des recettes, utilisation des données de test:', error);
                        // Données de test avec arrays correctement formatés
                        this.recipes = [
                            {
                                id: 1,
                                title: 'Poulet Kedjenou Traditionnel',
                                description: 'Plat traditionnel ivoirien mijoté dans sa propre eau avec des légumes frais et des épices locales.',
                                short_description: 'Délicieux poulet mijoté aux épices ivoiriennes',
                                featured_image: '/storage/recipes/featured/recipe-1.jpg',
                                gallery: ['/storage/recipes/gallery/recipe-1-1.jpg', '/storage/recipes/gallery/recipe-1-2.jpg', '/storage/recipes/gallery/recipe-1-3.jpg'],
                                ingredients: ['Poulet fermier (1 kg)', 'Oignons (2 moyens)', 'Tomates (3 grosses)', 'Gingembre frais (2 cm)', 'Ail (4 gousses)', 'Piment vert (2 pièces)', 'Aubergines africaines (200g)', 'Gombo (150g)', 'Huile de palme (3 cuillères)'],
                                instructions: ['Découper le poulet en morceaux et assaisonner', 'Faire mariner avec ail, gingembre et épices 30 min', 'Faire chauffer l\'huile de palme dans une cocotte', 'Faire dorer les morceaux de poulet de tous côtés', 'Ajouter les oignons émincés et faire revenir', 'Incorporer les tomates coupées en dés', 'Ajouter les légumes et les épices', 'Couvrir et laisser mijoter 45 minutes', 'Servir chaud avec du riz ou de l\'attiéké'],
                                preparation_time: 30,
                                cooking_time: 45,
                                servings: 6,
                                difficulty: 'medium',
                                category: { name: 'Plats Principaux' },
                                created_at: '2024-01-15T10:00:00Z'
                            },
                            {
                                id: 2,
                                title: 'Attiéké aux Crevettes',
                                description: 'Semoule de manioc accompagnée de crevettes sautées aux épices et légumes frais.',
                                short_description: 'Attiéké savoureux aux crevettes épicées',
                                featured_image: '/storage/recipes/featured/default-recipe.jpg',
                                gallery: ['/storage/recipes/gallery/recipe-1-1.jpg', '/storage/recipes/gallery/recipe-1-2.jpg'],
                                ingredients: ['Attiéké (500g)', 'Crevettes (300g)', 'Tomates (2 moyennes)', 'Oignons (1 gros)', 'Poivrons (2 pièces)', 'Ail (3 gousses)', 'Gingembre (1 cm)', 'Huile végétale (3 cuillères)'],
                                instructions: ['Nettoyer et décortiquer les crevettes', 'Faire revenir l\'ail et le gingembre dans l\'huile', 'Ajouter les oignons et les poivrons', 'Incorporer les tomates et laisser cuire', 'Ajouter les crevettes et assaisonner', 'Cuire 10 minutes en remuant', 'Servir avec l\'attiéké chaud'],
                                preparation_time: 20,
                                cooking_time: 25,
                                servings: 4,
                                difficulty: 'easy',
                                category: { name: 'Plats Principaux' },
                                created_at: '2024-01-12T14:30:00Z'
                            },
                            {
                                id: 3,
                                title: 'Sauce Graine aux Légumes',
                                description: 'Sauce traditionnelle à base de pâte de palmiste avec légumes variés et viande fumée.',
                                short_description: 'Sauce graine authentique aux légumes',
                                featured_image: '/storage/recipes/featured/default-recipe.jpg',
                                gallery: ['/storage/recipes/gallery/recipe-1-2.jpg', '/storage/recipes/gallery/recipe-1-3.jpg'],
                                ingredients: ['Pâte de palmiste (200g)', 'Épinards (300g)', 'Aubergines (2 moyennes)', 'Viande fumée (250g)', 'Poisson fumé (150g)', 'Oignons (1 gros)', 'Piment rouge (au goût)', 'Bouillon cube (2 pièces)'],
                                instructions: ['Diluer la pâte de palmiste dans l\'eau chaude', 'Faire bouillir la viande et le poisson fumé', 'Ajouter la pâte diluée et porter à ébullition', 'Incorporer les légumes durs d\'abord', 'Ajouter les épinards en dernier', 'Assaisonner avec les épices', 'Laisser mijoter 30 minutes', 'Servir avec du foutou ou du riz'],
                                preparation_time: 25,
                                cooking_time: 40,
                                servings: 6,
                                difficulty: 'hard',
                                category: { name: 'Sauces' },
                                created_at: '2024-01-10T16:15:00Z'
                            }
                        ];
                    } finally {
                        this.loading.recipes = false;
                    }
                },

                async loadEvents() {
                    this.loading.events = true;
                    try {
                        let url = '/api/v1/events?per_page=10';
                        if (this.searchTerms.events) {
                            url += `&search=${encodeURIComponent(this.searchTerms.events)}`;
                        }
                        if (this.filters.eventType === 'upcoming') {
                            url += '&upcoming=1';
                        } else if (this.filters.eventType === 'featured') {
                            url += '&featured=1';
                        }

                        const response = await fetch(url);
                        const data = await response.json();
                        if (data.success) {
                            this.events = data.data;
                        }
                    } catch (error) {
                        console.error('Erreur lors du chargement des événements, utilisation des données de test:', error);
                        // Données de test pour les événements
                        this.events = [
                            {
                                id: 1,
                                title: 'Festival Culinaire de Côte d\'Ivoire',
                                description: 'Grand festival célébrant la richesse de la gastronomie ivoirienne avec des chefs renommés, des dégustations et des ateliers pratiques.',
                                short_description: 'Célébration de la gastronomie ivoirienne',
                                featured_image: '/storage/events/featured/event-1.jpg',
                                gallery: ['/storage/events/gallery/event-1-1.jpg', '/storage/events/gallery/event-1-2.jpg'],
                                program: '09h00 - Ouverture officielle du festival\n10h00 - Démonstrations culinaires par les chefs\n12h00 - Dégustation de spécialités régionales\n14h00 - Ateliers participatifs pour enfants\n16h00 - Concours de cuisine amateur\n18h00 - Remise des prix et spectacle\n20h00 - Clôture du festival',
                                start_date: '2024-02-15T09:00:00Z',
                                end_date: '2024-02-15T20:00:00Z',
                                location: 'Place de la République',
                                city: 'Abidjan',
                                is_free: false,
                                price: 5000,
                                currency: 'XOF',
                                event_type: 'festival',
                                category: { name: 'Festivals' },
                                created_at: '2024-01-20T12:00:00Z'
                            },
                            {
                                id: 2,
                                title: 'Atelier Cuisine Moderne Ivoirienne',
                                description: 'Apprenez à revisiter les plats traditionnels ivoiriens avec des techniques modernes.',
                                short_description: 'Moderniser la cuisine traditionnelle',
                                featured_image: '/storage/events/featured/default-event.jpg',
                                gallery: ['/storage/events/gallery/event-1-1.jpg'],
                                program: '10h00 - Accueil et présentation\n10h30 - Démonstration : Kedjenou revisité\n12h00 - Atelier pratique : Attiéké moderne\n14h00 - Déjeuner dégustation\n15h30 - Questions & réponses\n16h00 - Fin de l\'atelier',
                                start_date: '2024-02-20T10:00:00Z',
                                end_date: '2024-02-20T16:00:00Z',
                                location: 'École de Cuisine Dinor',
                                city: 'Abidjan',
                                is_free: false,
                                price: 15000,
                                currency: 'XOF',
                                event_type: 'atelier',
                                category: { name: 'Ateliers' },
                                created_at: '2024-01-18T15:30:00Z'
                            },
                            {
                                id: 3,
                                title: 'Dégustation de Vins et Mets Ivoiriens',
                                description: 'Soirée spéciale accord mets et vins avec des spécialités ivoiriennes.',
                                short_description: 'Accords mets et vins ivoiriens',
                                featured_image: '/storage/events/featured/default-event.jpg',
                                gallery: ['/storage/events/gallery/event-1-2.jpg'],
                                program: '19h00 - Accueil cocktail\n19h30 - Présentation des accords\n20h00 - Première dégustation\n20h30 - Deuxième service\n21h00 - Service principal\n21h30 - Desserts et digestifs\n22h00 - Fin de soirée',
                                start_date: '2024-02-25T19:00:00Z',
                                end_date: '2024-02-25T22:00:00Z',
                                location: 'Restaurant Le Palmier d\'Or',
                                city: 'Abidjan',
                                is_free: false,
                                price: 25000,
                                currency: 'XOF',
                                event_type: 'dégustation',
                                category: { name: 'Dégustations' },
                                created_at: '2024-01-16T11:45:00Z'
                            }
                        ];
                    } finally {
                        this.loading.events = false;
                    }
                },

                async loadPages() {
                    this.loading.pages = true;
                    try {
                        let url = '/api/v1/pages?per_page=10';
                        if (this.searchTerms.pages) {
                            url += `&search=${encodeURIComponent(this.searchTerms.pages)}`;
                        }

                        const response = await fetch(url);
                        const data = await response.json();
                        if (data.success) {
                            this.pages = data.data;
                        }
                    } catch (error) {
                        console.error('Erreur lors du chargement des pages:', error);
                        this.pages = [];
                    } finally {
                        this.loading.pages = false;
                    }
                },

                async loadTips() {
                    this.loading.tips = true;
                    try {
                        let url = '/api/v1/tips?per_page=12';
                        if (this.searchTerms.tips) {
                            url += `&search=${encodeURIComponent(this.searchTerms.tips)}`;
                        }

                        const response = await fetch(url);
                        const data = await response.json();
                        if (data.success) {
                            this.tips = data.data;
                        }
                    } catch (error) {
                        console.error('Erreur lors du chargement des astuces:', error);
                        this.tips = [];
                    } finally {
                        this.loading.tips = false;
                    }
                },

                searchRecipes() {
                    this.loadRecipes();
                },

                searchEvents() {
                    this.loadEvents();
                },

                searchPages() {
                    this.loadPages();
                },

                searchTips() {
                    this.loadTips();
                },

                openModal(type, data) {
                    console.log('Opening modal:', type, data);
                    
                    this.modal = {
                        isOpen: true,
                        type: type,
                        data: data
                    };
                    
                    // Empêcher le scroll du body
                    document.body.style.overflow = 'hidden';
                },

                closeModal() {
                    this.modal = {
                        isOpen: false,
                        type: null,
                        data: null
                    };
                    
                    // Restaurer le scroll du body
                    document.body.style.overflow = 'auto';
                },

                openImageZoom(imageSrc, imageAlt = '') {
                    this.imageZoom = {
                        isOpen: true,
                        imageSrc: imageSrc,
                        imageAlt: imageAlt
                    };
                    
                    // Empêcher le scroll
                    document.body.style.overflow = 'hidden';
                },

                closeImageZoom() {
                    this.imageZoom = {
                        isOpen: false,
                        imageSrc: null,
                        imageAlt: null
                    };
                    
                    // Restaurer le scroll
                    document.body.style.overflow = 'hidden'; // Garder hidden car la modal principale est encore ouverte
                },

                goToDetailPage() {
                    if (!this.modal.data) return;
                    
                    const baseUrl = window.location.origin;
                    let detailUrl = '';
                    
                    if (this.modal.type === 'recipe') {
                        // Construire l'URL de détail de la recette
                        const slug = this.modal.data.slug || this.modal.data.title.toLowerCase().replace(/[^a-z0-9]+/g, '-');
                        detailUrl = `${baseUrl}/recipes/${this.modal.data.id}/${slug}`;
                    } else if (this.modal.type === 'event') {
                        // Construire l'URL de détail de l'événement
                        const slug = this.modal.data.slug || this.modal.data.title.toLowerCase().replace(/[^a-z0-9]+/g, '-');
                        detailUrl = `${baseUrl}/events/${this.modal.data.id}/${slug}`;
                    }
                    
                    if (detailUrl) {
                        // Fermer la modal d'abord
                        this.closeModal();
                        // Rediriger vers la page de détail
                        window.open(detailUrl, '_blank');
                    }
                }
            }
        }
    </script>
</body>
</html>