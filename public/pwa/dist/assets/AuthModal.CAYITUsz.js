import{r as e,I as a,k as s,v as o,w as l,d as r,f as i,e as d,t,J as n,y as m,E as u,G as p,z as c,T as b,x as f,o as g}from"./vendor.BeqKZlTx.js";import{a as v}from"./api.DeptcIQc.js";import{_ as w}from"./index.C1mfdDgG.js";const h={class:"auth-modal-header"},y={class:"auth-modal-content"},k={key:0,class:"error-message"},V={class:"form-group"},_=["disabled"],C={class:"form-group"},U=["disabled"],q=["disabled"],x={class:"form-group"},S=["disabled"],j={class:"form-group"},A=["disabled"],I={class:"form-group"},M=["disabled"],E={class:"form-group"},z=["disabled"],T=["disabled"],B={class:"auth-toggle"},D={key:0},F={key:1},G=w({__name:"AuthModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","authenticated"],setup(w,{emit:G}){const J=G,N=v(),P=e(!0),H=a({email:"",password:""}),K=a({name:"",email:"",password:"",password_confirmation:""}),L=()=>{J("update:modelValue",!1),Q()},O=e=>{e.target===e.currentTarget&&L()},Q=()=>{H.email="",H.password="",K.name="",K.email="",K.password="",K.password_confirmation="",N.error=null},R=async()=>{if(N.isAuthenticated)return console.log("✅ [Auth Modal] Utilisateur déjà connecté, fermeture du modal"),J("authenticated",N.user),void L();const e=await N.login(H);e.success&&(J("authenticated",e.user),L())},W=async()=>{const e=await N.register(K);e.success&&(J("authenticated",e.user),L())};return(e,a)=>(g(),s(f,{to:"body"},[o(b,{name:"modal"},{default:l(()=>[w.modelValue?(g(),r("div",{key:0,class:"auth-modal-overlay",onClick:O},[d("div",{class:"auth-modal",onClick:a[8]||(a[8]=m(()=>{},["stop"]))},[d("div",h,[d("h3",null,t(P.value?"Connexion":"Inscription"),1),d("button",{class:"close-btn",onClick:L,"aria-label":"Fermer"},a[9]||(a[9]=[d("span",{class:"material-symbols-outlined"},"close",-1)]))]),d("div",y,[n(N).error?(g(),r("div",k,t(n(N).error),1)):i("",!0),P.value?(g(),r("form",{key:1,onSubmit:m(R,["prevent"]),class:"auth-form"},[d("div",V,[a[10]||(a[10]=d("label",{for:"email"},"Email",-1)),u(d("input",{id:"email","onUpdate:modelValue":a[0]||(a[0]=e=>H.email=e),type:"email",required:"",disabled:n(N).loading,class:"form-input",placeholder:"votre@email.com"},null,8,_),[[p,H.email]])]),d("div",C,[a[11]||(a[11]=d("label",{for:"password"},"Mot de passe",-1)),u(d("input",{id:"password","onUpdate:modelValue":a[1]||(a[1]=e=>H.password=e),type:"password",required:"",disabled:n(N).loading,class:"form-input",placeholder:"Votre mot de passe"},null,8,U),[[p,H.password]])]),d("button",{type:"submit",disabled:n(N).loading,class:"submit-btn"},t(n(N).loading?"Connexion...":"Se connecter"),9,q)],32)):(g(),r("form",{key:2,onSubmit:m(W,["prevent"]),class:"auth-form"},[d("div",x,[a[12]||(a[12]=d("label",{for:"name"},"Nom",-1)),u(d("input",{id:"name","onUpdate:modelValue":a[2]||(a[2]=e=>K.name=e),type:"text",required:"",disabled:n(N).loading,class:"form-input",placeholder:"Votre nom"},null,8,S),[[p,K.name]])]),d("div",j,[a[13]||(a[13]=d("label",{for:"register-email"},"Email",-1)),u(d("input",{id:"register-email","onUpdate:modelValue":a[3]||(a[3]=e=>K.email=e),type:"email",required:"",disabled:n(N).loading,class:"form-input",placeholder:"votre@email.com"},null,8,A),[[p,K.email]])]),d("div",I,[a[14]||(a[14]=d("label",{for:"register-password"},"Mot de passe",-1)),u(d("input",{id:"register-password","onUpdate:modelValue":a[4]||(a[4]=e=>K.password=e),type:"password",required:"",disabled:n(N).loading,class:"form-input",placeholder:"Au moins 8 caractères"},null,8,M),[[p,K.password]])]),d("div",E,[a[15]||(a[15]=d("label",{for:"password-confirmation"},"Confirmer le mot de passe",-1)),u(d("input",{id:"password-confirmation","onUpdate:modelValue":a[5]||(a[5]=e=>K.password_confirmation=e),type:"password",required:"",disabled:n(N).loading,class:"form-input",placeholder:"Confirmez votre mot de passe"},null,8,z),[[p,K.password_confirmation]])]),d("button",{type:"submit",disabled:n(N).loading,class:"submit-btn"},t(n(N).loading?"Inscription...":"S'inscrire"),9,T)],32)),d("div",B,[P.value?(g(),r("p",D,[a[16]||(a[16]=c(" Pas encore de compte ? ")),d("button",{onClick:a[6]||(a[6]=e=>P.value=!1),class:"toggle-btn"},"S'inscrire")])):(g(),r("p",F,[a[17]||(a[17]=c(" Déjà un compte ? ")),d("button",{onClick:a[7]||(a[7]=e=>P.value=!0),class:"toggle-btn"},"Se connecter")]))])])])])):i("",!0)]),_:1})]))}},[["__scopeId","data-v-8226a554"]]);export{G as A};
