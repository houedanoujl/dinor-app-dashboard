import{g as e,h as t,i as a,q as s,b as l,d as n,t as i,l as r,w as o,e as c,F as u,r as d,k as v,s as p,n as f,v as m,o as g}from"./vendor.UPZKZdxP.js";import{_ as h}from"./main.DS2tXTI9.js";const y=e("cache",()=>{const e=t(new Map),a=t(new Map),s=t(3e5);function l(t){const s=a.value.get(t);return!s||Date.now()>s?(e.value.delete(t),a.value.delete(t),null):e.value.get(t)}function n(){const t=Date.now();for(const[s,l]of a.value.entries())t>l&&(e.value.delete(s),a.value.delete(s))}return setInterval(n,3e4),{defaultTTL:s,set:function(t,l,n=s.value){e.value.set(t,l),a.value.set(t,Date.now()+n)},get:l,has:function(e){return null!==l(e)},remove:function(t){e.value.delete(t),a.value.delete(t)},clear:function(){e.value.clear(),a.value.clear()},clearExpired:n,getCacheInfo:function(){return{size:e.value.size,keys:Array.from(e.value.keys()),expired:Array.from(a.value.entries()).filter(([,e])=>Date.now()>e).map(([e])=>e)}}}}),b=e("api",()=>{const e=t(new Set),a=t(new Map),s=t(`${window.location.origin}/api/v1`),l=y();function n(t,a){a?e.value.add(t):e.value.delete(t)}function i(e,t){t?a.value.set(e,t):a.value.delete(e)}async function r(e,t={}){const a=`${e}_${JSON.stringify(t)}`;if(!t.method||"GET"===t.method){const e=l.get(a);if(e)return e}n(a,!0),i(a,null);try{const n=`${s.value}${e}`,i={headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...t.headers},...t},r=await fetch(n,i);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const o=await r.json();if(!t.method||"GET"===t.method){const e=t.cacheTTL||3e5;l.set(a,o,e)}return o}catch(r){throw i(a,r.message),r}finally{n(a,!1)}}async function o(e,t={},a={}){const s=new URLSearchParams(t).toString();return r(s?`${e}?${s}`:e,{...a,method:"GET"})}return{loading:e,errors:a,baseURL:s,isLoading:function(t){return e.value.has(t)},getError:function(e){return a.value.get(e)},setLoading:n,setError:i,clearError:function(e){a.value.delete(e)},request:r,get:o,post:async function(e,t,a={}){return r(e,{...a,method:"POST",body:JSON.stringify(t)})},put:async function(e,t,a={}){return r(e,{...a,method:"PUT",body:JSON.stringify(t)})},del:async function(e,t={}){return r(e,{...t,method:"DELETE"})},invalidateCache:function(e){l.getCacheInfo().keys.filter(t=>t.includes(e)||new RegExp(e).test(t)).forEach(e=>l.remove(e))},preload:async function(e){const t=e.map(({endpoint:e,params:t,options:a})=>o(e,t,{...a,priority:"low"}).catch(()=>null));return Promise.allSettled(t)}}});function _(e,l={},n={}){const i=b(),r=t(null),o=t(null),c=t(!1),u=a(()=>`${e}_${JSON.stringify(l.value||l)}`),d=async(t=null,a={})=>{const s=t||l.value||l,u={...n,...a};c.value=!0,o.value=null;try{const t=await i.get(e,s,u);return r.value=t,t}catch(d){throw o.value=d.message,d}finally{c.value=!1}};return!1!==n.autoFetch&&d(),!1!==n.watchParams&&"object"==typeof l&&void 0!==l.value&&s(l,()=>d(),{deep:!0}),{data:r,error:o,loading:c,execute:d,refresh:()=>(i.invalidateCache(u.value),d())}}const T={class:"home"},w={class:"hero"},k={class:"hero-content"},C={class:"hero-stats"},D={class:"stat"},E={class:"stat-number"},V={class:"stat"},S={class:"stat-number"},L={class:"stat"},x={class:"stat-number"},$={class:"content-section"},R={class:"section-header"},j={class:"carousel-container"},A={key:0,class:"carousel-loading"},I={key:1,class:"carousel",ref:"recipesCarousel"},P=["onClick"],q={class:"card-image"},z=["src","alt"],O={class:"card-overlay"},B={key:0,class:"time-badge"},J={class:"card-content"},M={class:"card-meta"},N={class:"likes"},F={class:"carousel-controls"},G={class:"content-section"},H={class:"section-header"},U={class:"carousel-container"},X={key:0,class:"carousel-loading"},W={key:1,class:"carousel",ref:"tipsCarousel"},K=["onClick"],Q={class:"card-content"},Y={class:"card-meta"},Z={key:0,class:"time"},ee={class:"difficulty"},te={class:"carousel-controls"},ae={class:"content-section"},se={class:"section-header"},le={class:"carousel-container"},ne={key:0,class:"carousel-loading"},ie={key:1,class:"carousel",ref:"eventsCarousel"},re=["onClick"],oe={class:"card-image"},ce=["src","alt"],ue={class:"card-overlay"},de={class:"card-content"},ve={class:"card-meta"},pe={class:"date"},fe={class:"carousel-controls"},me={class:"content-section dinor-tv-section"},ge={class:"section-header"},he={class:"video-thumbnail"},ye=["src","alt"],be={class:"video-overlay"},_e={key:0,class:"live-badge"},Te={class:"video-info"};const we=h({name:"Home",setup(){const e=m(),{recipes:t,featuredRecipes:s,loading:l}=function(e={},t={}){const{data:s,error:l,loading:n,execute:i,refresh:r}=_("/recipes",e,{cacheTTL:3e5,...t}),o=a(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.filter(e=>e.is_featured))||[]}),c=a(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.sort((e,t)=>(t.likes_count||0)-(e.likes_count||0)))||[]});return{recipes:s,featuredRecipes:o,popularRecipes:c,error:l,loading:n,execute:i,refresh:r}}({limit:6,featured:!0}),{tips:n,featuredTips:i,loading:r}=function(e={},t={}){const{data:s,error:l,loading:n,execute:i,refresh:r}=_("/tips",e,{cacheTTL:3e5,...t}),o=a(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.filter(e=>e.is_featured))||[]}),c=a(()=>{var e;const t={};return(null==(e=s.value)?void 0:e.data)&&s.value.data.forEach(e=>{const a=e.difficulty_level||"beginner";t[a]||(t[a]=[]),t[a].push(e)}),t});return{tips:s,featuredTips:o,tipsByDifficulty:c,error:l,loading:n,execute:i,refresh:r}}({limit:6,featured:!0}),{events:o,activeEvents:c,loading:u}=function(e={},t={}){const{data:s,error:l,loading:n,execute:i,refresh:r}=_("/events",e,{cacheTTL:3e5,...t}),o=a(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.filter(e=>"active"===e.status))||[]}),c=a(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.filter(e=>new Date(e.date)>new Date).sort((e,t)=>new Date(e.date)-new Date(t.date)))||[]}),u=a(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.filter(e=>e.is_featured))||[]});return{events:s,activeEvents:o,upcomingEvents:c,featuredEvents:u,error:l,loading:n,execute:i,refresh:r}}({limit:6,status:"active"}),{featuredVideos:d}=function(e={},t={}){const{data:s,error:l,loading:n,execute:i,refresh:r}=_("/dinor-tv",e,{cacheTTL:6e5,...t}),o=a(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.filter(e=>e.is_featured))||[]}),c=a(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)))||[]}),u=a(()=>{var e;const t={};return(null==(e=s.value)?void 0:e.data)&&s.value.data.forEach(e=>{var a;const s=(null==(a=e.category)?void 0:a.name)||"Autres";t[s]||(t[s]=[]),t[s].push(e)}),t});return{videos:s,featuredVideos:o,latestVideos:c,videosByCategory:u,error:l,loading:n,execute:i,refresh:r}}({limit:1,featured:!0}),v=a(()=>s.value.slice(0,6)),p=a(()=>i.value.slice(0,6)),f=a(()=>c.value.slice(0,6)),g=a(()=>d.value[0]||null),h=a(()=>{var e,a,s,l,i,r;return{recipes:(null==(a=null==(e=t.value)?void 0:e.meta)?void 0:a.total)||v.value.length,tips:(null==(l=null==(s=n.value)?void 0:s.meta)?void 0:l.total)||p.value.length,events:(null==(r=null==(i=o.value)?void 0:i.meta)?void 0:r.total)||f.value.length}});return{recipes:v,tips:p,events:f,featuredVideo:g,stats:h,loadingRecipes:l,loadingTips:r,loadingEvents:u,scrollCarousel:(e,t)=>{const a={recipes:"recipesCarousel",tips:"tipsCarousel",events:"eventsCarousel"}[e];if(a){const e=document.querySelector(`[ref="${a}"]`);if(e){const a=300;e.scrollBy({left:t*a,behavior:"smooth"})}}},goToRecipe:t=>{e.push(`/recipe/${t}`)},goToTip:t=>{e.push(`/tip/${t}`)},goToEvent:t=>{e.push(`/event/${t}`)},goToVideo:()=>{e.push("/dinor-tv")},getShortDescription:e=>{if(!e)return"";const t=e.replace(/<[^>]*>/g,"");return t.length>80?t.substring(0,80)+"...":t},getDifficultyLabel:e=>({beginner:"Débutant",intermediate:"Intermédiaire",advanced:"Avancé"}[e]||e),getStatusClass:e=>`status-${e}`,getStatusLabel:e=>({active:"Actif",upcoming:"À venir",completed:"Terminé",cancelled:"Annulé"}[e]||e),formatDate:e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"short"}):"",getVideoThumbnail:e=>{if(!e)return"/images/default-video.jpg";const t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return t?`https://img.youtube.com/vi/${t[1]}/maxresdefault.jpg`:"/images/default-video.jpg"}}}},[["render",function(e,t,a,s,m,h){const y=c("router-link");return g(),l("div",T,[n("section",w,[n("div",k,[t[10]||(t[10]=n("h1",null,"Bienvenue sur Dinor",-1)),t[11]||(t[11]=n("p",null,"Découvrez les saveurs authentiques de la Côte d'Ivoire",-1)),n("div",C,[n("div",D,[n("span",E,i(s.stats.recipes),1),t[7]||(t[7]=n("span",{class:"stat-label"},"Recettes",-1))]),n("div",V,[n("span",S,i(s.stats.tips),1),t[8]||(t[8]=n("span",{class:"stat-label"},"Astuces",-1))]),n("div",L,[n("span",x,i(s.stats.events),1),t[9]||(t[9]=n("span",{class:"stat-label"},"Événements",-1))])])])]),n("section",$,[n("div",R,[t[13]||(t[13]=n("h2",null,"Recettes Populaires",-1)),r(y,{to:"/recipes",class:"see-all-btn"},{default:o(()=>t[12]||(t[12]=[p(" Voir tout "),n("span",{class:"material-symbols-outlined"},"arrow_forward",-1)])),_:1,__:[12]})]),n("div",j,[s.loadingRecipes?(g(),l("div",A,t[14]||(t[14]=[n("div",{class:"loading-spinner"},null,-1)]))):(g(),l("div",I,[(g(!0),l(u,null,d(s.recipes,e=>(g(),l("div",{key:e.id,onClick:t=>s.goToRecipe(e.id),class:"carousel-item recipe-card"},[n("div",q,[n("img",{src:e.featured_image_url||"/images/default-recipe.jpg",alt:e.title,loading:"lazy"},null,8,z),n("div",O,[e.preparation_time?(g(),l("span",B,i(e.preparation_time)+"min ",1)):v("",!0)])]),n("div",J,[n("h3",null,i(e.title),1),n("p",null,i(s.getShortDescription(e.short_description)),1),n("div",M,[n("span",N,[t[15]||(t[15]=n("span",{class:"material-symbols-outlined"},"favorite",-1)),p(" "+i(e.likes_count||0),1)])])])],8,P))),128))],512)),n("div",F,[n("button",{onClick:t[0]||(t[0]=e=>s.scrollCarousel("recipes",-1)),class:"carousel-btn prev"},t[16]||(t[16]=[n("span",{class:"material-symbols-outlined"},"chevron_left",-1)])),n("button",{onClick:t[1]||(t[1]=e=>s.scrollCarousel("recipes",1)),class:"carousel-btn next"},t[17]||(t[17]=[n("span",{class:"material-symbols-outlined"},"chevron_right",-1)]))])])]),n("section",G,[n("div",H,[t[19]||(t[19]=n("h2",null,"Astuces Culinaires",-1)),r(y,{to:"/tips",class:"see-all-btn"},{default:o(()=>t[18]||(t[18]=[p(" Voir tout "),n("span",{class:"material-symbols-outlined"},"arrow_forward",-1)])),_:1,__:[18]})]),n("div",U,[s.loadingTips?(g(),l("div",X,t[20]||(t[20]=[n("div",{class:"loading-spinner"},null,-1)]))):(g(),l("div",W,[(g(!0),l(u,null,d(s.tips,e=>(g(),l("div",{key:e.id,onClick:t=>s.goToTip(e.id),class:"carousel-item tip-card"},[t[21]||(t[21]=n("div",{class:"tip-icon"},[n("span",{class:"material-symbols-outlined"},"lightbulb")],-1)),n("div",Q,[n("h3",null,i(e.title),1),n("p",null,i(s.getShortDescription(e.content)),1),n("div",Y,[e.estimated_time?(g(),l("span",Z,i(e.estimated_time)+"min ",1)):v("",!0),n("span",ee,i(s.getDifficultyLabel(e.difficulty_level)),1)])])],8,K))),128))],512)),n("div",te,[n("button",{onClick:t[2]||(t[2]=e=>s.scrollCarousel("tips",-1)),class:"carousel-btn prev"},t[22]||(t[22]=[n("span",{class:"material-symbols-outlined"},"chevron_left",-1)])),n("button",{onClick:t[3]||(t[3]=e=>s.scrollCarousel("tips",1)),class:"carousel-btn next"},t[23]||(t[23]=[n("span",{class:"material-symbols-outlined"},"chevron_right",-1)]))])])]),n("section",ae,[n("div",se,[t[25]||(t[25]=n("h2",null,"Événements à Venir",-1)),r(y,{to:"/events",class:"see-all-btn"},{default:o(()=>t[24]||(t[24]=[p(" Voir tout "),n("span",{class:"material-symbols-outlined"},"arrow_forward",-1)])),_:1,__:[24]})]),n("div",le,[s.loadingEvents?(g(),l("div",ne,t[26]||(t[26]=[n("div",{class:"loading-spinner"},null,-1)]))):(g(),l("div",ie,[(g(!0),l(u,null,d(s.events,e=>(g(),l("div",{key:e.id,onClick:t=>s.goToEvent(e.id),class:"carousel-item event-card"},[n("div",oe,[n("img",{src:e.featured_image_url||"/images/default-event.jpg",alt:e.title,loading:"lazy"},null,8,ce),n("div",ue,[n("span",{class:f([s.getStatusClass(e.status),"status-badge"])},i(s.getStatusLabel(e.status)),3)])]),n("div",de,[n("h3",null,i(e.title),1),n("p",null,i(s.getShortDescription(e.short_description)),1),n("div",ve,[n("span",pe,[t[27]||(t[27]=n("span",{class:"material-symbols-outlined"},"calendar_today",-1)),p(" "+i(s.formatDate(e.start_date)),1)])])])],8,re))),128))],512)),n("div",fe,[n("button",{onClick:t[4]||(t[4]=e=>s.scrollCarousel("events",-1)),class:"carousel-btn prev"},t[28]||(t[28]=[n("span",{class:"material-symbols-outlined"},"chevron_left",-1)])),n("button",{onClick:t[5]||(t[5]=e=>s.scrollCarousel("events",1)),class:"carousel-btn next"},t[29]||(t[29]=[n("span",{class:"material-symbols-outlined"},"chevron_right",-1)]))])])]),n("section",me,[n("div",ge,[t[31]||(t[31]=n("h2",null,"Dinor TV",-1)),r(y,{to:"/dinor-tv",class:"see-all-btn"},{default:o(()=>t[30]||(t[30]=[p(" Voir tout "),n("span",{class:"material-symbols-outlined"},"arrow_forward",-1)])),_:1,__:[30]})]),s.featuredVideo?(g(),l("div",{key:0,class:"featured-video",onClick:t[6]||(t[6]=(...e)=>s.goToVideo&&s.goToVideo(...e))},[n("div",he,[n("img",{src:s.featuredVideo.thumbnail_url||s.getVideoThumbnail(s.featuredVideo.video_url),alt:s.featuredVideo.title,loading:"lazy"},null,8,ye),n("div",be,[t[33]||(t[33]=n("div",{class:"play-button"},[n("span",{class:"material-symbols-outlined"},"play_circle")],-1)),s.featuredVideo.is_live?(g(),l("div",_e,t[32]||(t[32]=[n("span",{class:"live-dot"},null,-1),p(" LIVE ")]))):v("",!0)])]),n("div",Te,[n("h3",null,i(s.featuredVideo.title),1),n("p",null,i(s.getShortDescription(s.featuredVideo.description)),1)])])):v("",!0)])])}],["__scopeId","data-v-0d29c71e"]]);export{we as default};
