import{d as a,v as s,e as t,t as e,D as i,F as l,i as o,f as n,y as r,j as d,r as c,m as u,h as m,o as p}from"./vendor.BeqKZlTx.js";import{a as v}from"./api.70uutYeQ.js";import{F as y}from"./FavoriteButton.C_r4gVRX.js";import{A as f}from"./AuthModal.BDSOLoMC.js";import{_ as g}from"./index.W0j3SMuK.js";import"./api.DeptcIQc.js";const h={class:"tips-list"},b={key:0,class:"loading-state"},k={key:1,class:"error-state"},j={class:"md3-body-large dinor-text-gray"},A={key:2,class:"empty-state"},w={key:3,class:"content"},D={class:"tips-grid"},_=["onClick"],M={class:"tip-content"},F={class:"tip-title md3-title-medium"},T={key:0,class:"tip-description md3-body-medium dinor-text-gray"},x={class:"tip-meta"},C={key:0,class:"time"},B={class:"tip-stats"},E={class:"stat"},L={class:"stat"},S={key:0,class:"stat"};const V=g({name:"TipsList",components:{FavoriteButton:y,AuthModal:f},setup(){const a=m(),s=c([]),t=c(!1),e=c(null),i=c(!1),l=async()=>{t.value=!0,e.value=null;try{const a=await v.getTips();if(!a.success)throw new Error(a.message||"Failed to fetch tips");s.value=a.data}catch(a){e.value=a.message,console.error("Error fetching tips:",a)}finally{t.value=!1}};return u(()=>{l()}),{tips:s,loading:t,error:e,showAuthModal:i,goToTip:s=>{a.push(`/tip/${s}`)},retry:()=>{e.value=null,l()},getDifficultyLabel:a=>({beginner:"D√©butant",intermediate:"Interm√©diaire",advanced:"Avanc√©"}[a]||a),getShortDescription:a=>{if(!a)return"";const s=a.replace(/<[^>]*>/g,"");return s.length>150?s.substring(0,150)+"...":s},formatDate:a=>new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}}},[["render",function(c,u,m,v,y,f){const g=d("FavoriteButton"),V=d("AuthModal");return p(),a("div",h,[v.loading?(p(),a("div",b,u[4]||(u[4]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Chargement des astuces...",-1)]))):v.error?(p(),a("div",k,[u[5]||(u[5]=t("div",{class:"error-icon"},[t("span",{class:"material-symbols-outlined"},"error"),t("span",{class:"emoji-fallback"},"‚ö†Ô∏è")],-1)),u[6]||(u[6]=t("h2",{class:"md3-title-large"},"Erreur de chargement",-1)),t("p",j,e(v.error),1),t("button",{onClick:u[0]||(u[0]=(...a)=>v.retry&&v.retry(...a)),class:"btn-secondary"},"R√©essayer")])):v.loading||0!==v.tips.length?(p(),a("div",w,[t("div",D,[(p(!0),a(l,null,o(v.tips,i=>(p(),a("div",{key:i.id,class:"tip-card md3-card md3-ripple",onClick:a=>v.goToTip(i.id)},[u[14]||(u[14]=t("div",{class:"tip-icon"},[t("span",{class:"material-symbols-outlined"},"lightbulb"),t("span",{class:"emoji-fallback"},"üí°")],-1)),t("div",M,[t("h3",F,e(i.title),1),i.content?(p(),a("p",T,e(v.getShortDescription(i.content)),1)):n("",!0),t("div",x,[i.created_at?(p(),a("div",C,[u[8]||(u[8]=t("span",{class:"material-symbols-outlined"},"schedule",-1)),u[9]||(u[9]=t("span",{class:"emoji-fallback"},"‚è∞",-1)),t("span",null,e(v.formatDate(i.created_at)),1)])):n("",!0)]),t("div",B,[t("div",E,[u[10]||(u[10]=t("span",{class:"material-symbols-outlined"},"thumb_up",-1)),u[11]||(u[11]=t("span",{class:"emoji-fallback"},"üëç",-1)),t("span",null,e(i.likes_count||0),1)]),t("div",L,[s(g,{type:"tip","item-id":i.id,"initial-favorited":!1,"initial-count":i.favorites_count||0,"show-count":!0,size:"small",variant:"minimal",onAuthRequired:u[1]||(u[1]=a=>v.showAuthModal=!0),onClick:u[2]||(u[2]=r(()=>{},["stop"]))},null,8,["item-id","initial-count"])]),i.category?(p(),a("div",S,[u[12]||(u[12]=t("span",{class:"material-symbols-outlined"},"category",-1)),u[13]||(u[13]=t("span",{class:"emoji-fallback"},"üè∑Ô∏è",-1)),t("span",null,e(i.category.name),1)])):n("",!0)])])],8,_))),128))])])):(p(),a("div",A,u[7]||(u[7]=[i('<div class="empty-icon" data-v-ead5fef0><span class="material-symbols-outlined" data-v-ead5fef0>lightbulb</span><span class="emoji-fallback" data-v-ead5fef0>üí°</span></div><h2 class="md3-title-medium" data-v-ead5fef0>Aucune astuce trouv√©e</h2><p class="md3-body-medium dinor-text-gray" data-v-ead5fef0> Aucune astuce n&#39;est disponible pour le moment. </p>',3)]))),s(V,{modelValue:v.showAuthModal,"onUpdate:modelValue":u[3]||(u[3]=a=>v.showAuthModal=a)},null,8,["modelValue"])])}],["__scopeId","data-v-ead5fef0"]]);export{V as default};
