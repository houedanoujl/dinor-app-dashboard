import{b as e,d as s,t,F as a,r as n,n as l,k as i,h as r,j as c,x as o,o as d}from"./vendor.2V9jEnd_.js";import{a as u}from"./api.uSn_et4s.js";import{_ as v}from"./main.ORK2F0BB.js";const p={class:"events-list"},m={key:0,class:"loading-state"},y={key:1,class:"error-state"},g={key:2,class:"content"},f={key:0,class:"empty-state"},h={key:1,class:"events-container"},b=["onClick"],k={class:"event-image"},_=["src","alt"],T={class:"event-status"},C={class:"event-content"},E={class:"event-header"},F={class:"event-title"},L={key:0,class:"event-price"},w={key:0,class:"free-badge"},D={key:1,class:"price"},S={key:0,class:"event-description"},j={class:"event-details"},x={class:"detail"},A={key:0,class:"detail"},R={key:1,class:"detail"},P={key:2,class:"detail"},z={key:1,class:"participants-info"};const I=v({name:"EventsList",setup(){const e=o(),s=r([]),t=r(!1),a=r(null),n=async()=>{t.value=!0,a.value=null;try{const e=await u.getEvents();if(!e.success)throw new Error(e.message||"Failed to fetch events");s.value=e.data}catch(e){a.value=e.message,console.error("Error fetching events:",e)}finally{t.value=!1}};return c(()=>{n()}),{events:s,loading:t,error:a,goToEvent:s=>{e.push(`/event/${s}`)},retry:()=>{a.value=null,n()},getStatusClass:e=>({active:"status-active",cancelled:"status-cancelled",completed:"status-completed",upcoming:"status-upcoming"}[e]||"status-default"),getStatusLabel:e=>({active:"Actif",cancelled:"Annulé",completed:"Terminé",upcoming:"À venir"}[e]||"Non défini"),getEventTypeLabel:e=>({festival:"Festival",cooking_class:"Cours de cuisine",tasting:"Dégustation",workshop:"Atelier",conference:"Conférence"}[e]||e),formatDate:e=>e?new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"",formatTime:e=>e?new Date(`2000-01-01T${e}`).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"",formatPrice:(e,s="XOF")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:s}).format(e)}}},[["render",function(r,c,o,u,v,I){return d(),e("div",p,[c[9]||(c[9]=s("header",{class:"page-header"},[s("div",{class:"header-content"},[s("h1",null,"Événements"),s("p",{class:"subtitle"},"Participez à nos événements culinaires")])],-1)),u.loading?(d(),e("div",m,c[1]||(c[1]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Chargement des événements...",-1)]))):u.error?(d(),e("div",y,[c[2]||(c[2]=s("div",{class:"error-icon"},[s("span",{class:"material-symbols-outlined"},"error")],-1)),s("p",null,t(u.error),1),s("button",{onClick:c[0]||(c[0]=(...e)=>u.retry&&u.retry(...e)),class:"retry-btn"}," Réessayer ")])):(d(),e("div",g,[u.events.length||u.loading?(d(),e("div",h,[(d(!0),e(a,null,n(u.events,a=>(d(),e("article",{key:a.id,onClick:e=>u.goToEvent(a.id),class:"event-card"},[s("div",k,[s("img",{src:a.featured_image_url||"/images/default-event.jpg",alt:a.title,loading:"lazy"},null,8,_),s("div",T,[s("span",{class:l(u.getStatusClass(a.status))},t(u.getStatusLabel(a.status)),3)])]),s("div",C,[s("div",E,[s("h3",F,t(a.title),1),a.price?(d(),e("div",L,[a.is_free?(d(),e("span",w,"Gratuit")):(d(),e("span",D,t(u.formatPrice(a.price,a.currency)),1))])):i("",!0)]),a.short_description?(d(),e("p",S,t(a.short_description),1)):i("",!0),s("div",j,[s("div",x,[c[4]||(c[4]=s("span",{class:"material-symbols-outlined"},"calendar_today",-1)),s("span",null,t(u.formatDate(a.start_date)),1)]),a.start_time?(d(),e("div",A,[c[5]||(c[5]=s("span",{class:"material-symbols-outlined"},"schedule",-1)),s("span",null,t(u.formatTime(a.start_time)),1)])):i("",!0),a.location?(d(),e("div",R,[c[6]||(c[6]=s("span",{class:"material-symbols-outlined"},"location_on",-1)),s("span",null,t(a.location),1)])):i("",!0),a.event_type?(d(),e("div",P,[c[7]||(c[7]=s("span",{class:"material-symbols-outlined"},"category",-1)),s("span",null,t(u.getEventTypeLabel(a.event_type)),1)])):i("",!0)]),a.max_participants?(d(),e("div",z,[c[8]||(c[8]=s("span",{class:"material-symbols-outlined"},"group",-1)),s("span",null,t(a.participants_count||0)+" / "+t(a.max_participants)+" participants",1)])):i("",!0)])],8,b))),128))])):(d(),e("div",f,c[3]||(c[3]=[s("div",{class:"empty-icon"},[s("span",{class:"material-symbols-outlined"},"event")],-1),s("h3",null,"Aucun événement disponible",-1),s("p",null,"Les événements culinaires seront bientôt disponibles.",-1)])))]))])}],["__scopeId","data-v-0576297e"]]);export{I as default};
