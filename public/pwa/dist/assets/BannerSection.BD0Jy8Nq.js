import{a as e}from"./useApi.Dk2EtGCI.js";import{f as t,m as n,b as r,e as s,F as o,g as a,A as l,d as i,t as c,n as u,o as p}from"./vendor.CHp--hJi.js";import{_ as F}from"./index.B8aG9rpS.js";function d(){const{request:r}=e(),s=t([]),o=t(!1),a=t(null),l=async(e={})=>{o.value=!0,a.value=null;try{const t={};e.position&&(t.position=e.position),e.type_contenu&&(t.type_contenu=e.type_contenu),e.section&&(t.section=e.section);const n=await r("/banners",{params:t});n.success?s.value=n.data:a.value=n.message||"Erreur lors du chargement des bannières"}catch(t){a.value="Impossible de charger les bannières",console.error("Erreur bannières:",t)}finally{o.value=!1}};return n(()=>{l({position:"home"})}),{banners:s,loading:o,error:a,loadBanners:l,loadBannersByType:async e=>{o.value=!0,a.value=null;try{const t=await r(`/banners/type/${e}`);return t.success?(s.value=t.data,t.data):(a.value=t.message||"Erreur lors du chargement des bannières",[])}catch(t){return a.value="Impossible de charger les bannières pour ce type",console.error("Erreur bannières par type:",t),[]}finally{o.value=!1}},getBanner:async e=>{try{const t=await r(`/banners/${e}`);if(t.success)return t.data;throw new Error(t.message||"Bannière non trouvée")}catch(t){throw console.error("Erreur récupération bannière:",t),t}},getActiveBanners:()=>s.value.filter(e=>e.is_active),getBannersByPosition:e=>s.value.filter(t=>t.position===e||"all_pages"===t.position),getBannersBySection:e=>s.value.filter(t=>t.section===e),getBannersByTypeAndSection:(e,t)=>s.value.filter(n=>n.type_contenu===e&&n.section===t)}}const b={class:"banner-content"},y=["onClick"];const g=F({name:"BannerSection",props:{type:{type:String,required:!0,validator:e=>["recipes","tips","events","dinor_tv","pages","home"].includes(e)},section:{type:String,default:"hero",validator:e=>["header","hero","featured","footer"].includes(e)},banners:{type:Array,default:()=>[]}},methods:{getBannerStyle:e=>({backgroundColor:e.background_color||"#E1251B",color:e.text_color||"#FFFFFF"}),getBannerButtonStyle(e){return{backgroundColor:e.button_color||"#FFFFFF",color:this.getContrastColor(e.button_color||"#FFFFFF"),border:`2px solid ${e.button_color||"#FFFFFF"}`}},getContrastColor:e=>(299*parseInt(e.slice(1,3),16)+587*parseInt(e.slice(3,5),16)+114*parseInt(e.slice(5,7),16))/1e3>128?"#000000":"#FFFFFF",handleButtonClick(e){e.startsWith("/")?this.$router.push(e):e.startsWith("http")?window.open(e,"_blank"):this.$router.push(e)}}},[["render",function(e,t,n,F,d,g){return n.banners&&n.banners.length>0?(p(),r("section",{key:0,class:u(["banner-section",`banner-section--${n.section}`])},[(p(!0),r(o,null,a(n.banners,e=>(p(),r("div",{key:e.id,class:"banner-item",style:l(g.getBannerStyle(e))},[e.image_url?(p(),r("div",{key:0,class:"banner-background",style:l({backgroundImage:`url(${e.image_url})`})},null,4)):s("",!0),i("div",b,[e.titre?(p(),r("h2",{key:0,class:"banner-title",style:l({color:e.text_color||"#FFFFFF"})},c(e.titre),5)):s("",!0),e.sous_titre?(p(),r("h3",{key:1,class:"banner-subtitle",style:l({color:e.text_color||"#FFFFFF"})},c(e.sous_titre),5)):s("",!0),e.description?(p(),r("p",{key:2,class:"banner-description",style:l({color:e.text_color||"#FFFFFF"})},c(e.description),5)):s("",!0),e.button_text&&e.button_url?(p(),r("button",{key:3,class:"banner-button",style:l(g.getBannerButtonStyle(e)),onClick:t=>g.handleButtonClick(e.button_url)},c(e.button_text),13,y)):s("",!0)])],4))),128))],2)):s("",!0)}],["__scopeId","data-v-68452543"]]);export{g as B,d as u};
