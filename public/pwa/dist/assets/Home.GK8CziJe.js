import{b as e,r as t,o as a,v as l,e as r,f as s,p as i,t as n,l as o,i as c,m as d,F as u,g as v,n as p,x as m,u as g,j as f,y,z as h,k as b}from"./vendor.CNJ67EhX.js";import{u as _,a as k,_ as C}from"./main.a-2UG2Uh.js";const D={name:"ContentCarousel",props:{title:{type:String,required:!0},items:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:null},contentType:{type:String,required:!0,validator:e=>["recipes","tips","events","videos"].includes(e)},viewAllLink:{type:String,required:!0},showControls:{type:Boolean,default:!0},showIndicators:{type:Boolean,default:!1},itemsPerView:{type:Number,default:4}},emits:["item-click"],setup(e,{emit:r}){const s=g(),i=t(null),n=t(0),o=t(!1),c=t(!0),d=()=>{const e=i.value;e&&(o.value=e.scrollLeft>0,c.value=e.scrollLeft<e.scrollWidth-e.clientWidth)},u=()=>({recipes:"/images/default-recipe.jpg",tips:"/images/default-tip.jpg",events:"/images/default-event.jpg",videos:"/images/default-video.jpg"}[e.contentType]||"/images/default.jpg");return a(()=>{const e=i.value;e&&(e.addEventListener("scroll",d),d())}),l(()=>{const e=i.value;e&&e.removeEventListener("scroll",d)}),{carouselRef:i,currentIndex:n,canScrollLeft:o,canScrollRight:c,scrollCarousel:e=>{var t;const a=i.value;if(!a)return;const l=2*(((null==(t=a.querySelector(".carousel-item"))?void 0:t.offsetWidth)||280)+16);a.scrollBy({left:e*l,behavior:"smooth"}),setTimeout(d,300)},scrollToIndex:e=>{var t;const a=i.value;if(!a)return;const l=e*(((null==(t=a.querySelector(".carousel-item"))?void 0:t.offsetWidth)||280)+16);a.scrollTo({left:l,behavior:"smooth"}),n.value=e},handleItemClick:t=>{r("item-click",t);const a={recipes:`/recipe/${t.id}`,tips:`/tip/${t.id}`,events:`/event/${t.id}`,videos:`/video/${t.id}`}[e.contentType];a&&s.push(a)},handleImageError:e=>{e.target.src=u()},getShortDescription:e=>{if(!e)return"";const t=e.replace(/<[^>]*>/g,"");return t.length>80?t.substring(0,80)+"...":t},getDefaultImage:u,getTypeIcon:()=>({recipes:"restaurant",tips:"lightbulb",events:"event",videos:"play_circle"}[e.contentType]||"info"),getItemClass:()=>`${e.contentType}-card`,getStatusClass:e=>`status-${e}`,getStatusLabel:e=>({active:"Actif",upcoming:"À venir",completed:"Terminé",cancelled:"Annulé",draft:"Brouillon",published:"Publié"}[e]||e),getDifficultyLabel:e=>({beginner:"Débutant",intermediate:"Intermédiaire",advanced:"Avancé"}[e]||e),formatDate:e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"short"}):""}}},I={class:"content-carousel"},T={class:"section-header"},S={class:"carousel-container"},w={key:0,class:"carousel-loading"},E={key:1,class:"carousel-error"},L={key:2,class:"carousel-empty"},x={key:3,class:"carousel-wrapper"},$=["onClick"],R={class:"default-card"},B={key:0,class:"card-image"},V=["src","alt"],j={class:"card-overlay"},A={key:0,class:"time-badge"},F={key:1,class:"card-icon"},q={class:"material-symbols-outlined"},z={class:"card-content"},P={class:"card-meta"},W={key:0,class:"likes"},H={key:1,class:"date"},M={key:2,class:"difficulty"},N={key:0,class:"carousel-controls"},G=["disabled"],J=["disabled"],K={key:1,class:"carousel-indicators"},O=["onClick"];const Q={class:"home"},U={class:"banner-title"},X={key:0,class:"banner-description"},Y={key:0,class:"hero"},Z={class:"recipe-card"},ee={class:"card-image"},te=["src","alt"],ae={class:"card-overlay"},le={key:0,class:"time-badge"},re={key:1,class:"difficulty-badge"},se={class:"card-content"},ie={class:"card-meta"},ne={class:"likes"},oe={class:"date"},ce={class:"tip-card"},de={class:"card-content"},ue={class:"card-meta"},ve={key:0,class:"time"},pe={class:"difficulty"},me={class:"date"},ge={class:"event-card"},fe={class:"card-image"},ye=["src","alt"],he={class:"card-overlay"},be={class:"card-content"},_e={class:"card-meta"},ke={class:"date"},Ce={class:"created"},De={class:"video-card"},Ie={class:"video-thumbnail"},Te=["src","alt"],Se={class:"video-overlay"},we={key:0,class:"live-badge"},Ee={key:1,class:"duration-badge"},Le={class:"card-content"},xe={class:"card-meta"},$e={class:"views"},Re={class:"date"};const Be=C({name:"Home",components:{ContentCarousel:C(D,[["render",function(e,t,a,l,g,h){const b=c("router-link");return f(),r("section",I,[s("div",T,[s("h2",null,n(a.title),1),i(b,{to:a.viewAllLink,class:"see-all-btn"},{default:o(()=>t[3]||(t[3]=[y(" Voir tout "),s("span",{class:"material-symbols-outlined"},"arrow_forward",-1)])),_:1,__:[3]},8,["to"])]),s("div",S,[a.loading?(f(),r("div",w,t[4]||(t[4]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Chargement...",-1)]))):a.error?(f(),r("div",E,t[5]||(t[5]=[s("span",{class:"material-symbols-outlined"},"error",-1),s("p",null,"Erreur lors du chargement",-1)]))):0===a.items.length?(f(),r("div",L,t[6]||(t[6]=[s("span",{class:"material-symbols-outlined"},"info",-1),s("p",null,"Aucun contenu disponible",-1)]))):(f(),r("div",x,[s("div",{class:"carousel",ref:l.carouselRef},[(f(!0),r(u,null,v(a.items,a=>(f(),r("div",{key:a.id,onClick:e=>l.handleItemClick(a),class:p(["carousel-item",l.getItemClass()])},[m(e.$slots,"item",{item:a,getShortDescription:l.getShortDescription},()=>[s("div",R,[a.featured_image_url||a.image_url?(f(),r("div",B,[s("img",{src:a.featured_image_url||a.image_url||l.getDefaultImage(),alt:a.title,loading:"lazy",onError:t[0]||(t[0]=(...e)=>l.handleImageError&&l.handleImageError(...e))},null,40,V),s("div",j,[a.preparation_time||a.estimated_time?(f(),r("span",A,n(a.preparation_time||a.estimated_time)+"min ",1)):d("",!0),a.status?(f(),r("span",{key:1,class:p([l.getStatusClass(a.status),"status-badge"])},n(l.getStatusLabel(a.status)),3)):d("",!0)])])):(f(),r("div",F,[s("span",q,n(l.getTypeIcon()),1)])),s("div",z,[s("h3",null,n(a.title),1),s("p",null,n(l.getShortDescription(a.short_description||a.content||a.description)),1),s("div",P,[a.likes_count?(f(),r("span",W,[t[7]||(t[7]=s("span",{class:"material-symbols-outlined"},"favorite",-1)),y(" "+n(a.likes_count),1)])):d("",!0),a.created_at?(f(),r("span",H,n(l.formatDate(a.created_at)),1)):d("",!0),a.difficulty_level?(f(),r("span",M,n(l.getDifficultyLabel(a.difficulty_level)),1)):d("",!0)])])])])],10,$))),128))],512),a.showControls&&a.items.length>1?(f(),r("div",N,[s("button",{onClick:t[1]||(t[1]=e=>l.scrollCarousel(-1)),class:"carousel-btn prev",disabled:!l.canScrollLeft},t[8]||(t[8]=[s("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,G),s("button",{onClick:t[2]||(t[2]=e=>l.scrollCarousel(1)),class:"carousel-btn next",disabled:!l.canScrollRight},t[9]||(t[9]=[s("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,J)])):d("",!0),a.showIndicators&&a.items.length>1?(f(),r("div",K,[(f(!0),r(u,null,v(a.items,(e,t)=>(f(),r("button",{key:t,onClick:e=>l.scrollToIndex(t),class:p(["indicator",{active:l.currentIndex===t}])},null,10,O))),128))])):d("",!0)]))])])}],["__scopeId","data-v-c6e844dc"]])},setup(){const l=g(),{banners:r,loading:s,error:i}=function(){const{request:e}=k(),l=t([]),r=t(!1),s=t(null),i=async(t="home")=>{r.value=!0,s.value=null;try{const a=t?{position:t}:{},r=await e("/api/v1/banners",{params:a});r.success?l.value=r.data:s.value=r.message||"Erreur lors du chargement des bannières"}catch(a){s.value="Impossible de charger les bannières",console.error("Erreur bannières:",a)}finally{r.value=!1}};return a(()=>{i()}),{banners:l,loading:r,error:s,loadBanners:i,getBanner:async t=>{try{const a=await e(`/api/v1/banners/${t}`);if(a.success)return a.data;throw new Error(a.message||"Bannière non trouvée")}catch(a){throw console.error("Erreur récupération bannière:",a),a}},getActiveBanners:()=>l.value.filter(e=>e.is_active),getBannersByPosition:e=>l.value.filter(t=>t.position===e||"all_pages"===t.position)}}(),{recipes:n,error:o,loading:c}=function(t={},a={}){const{data:l,error:r,loading:s,execute:i,refresh:n}=_("/recipes",t,{cacheTTL:3e5,...a}),o=e(()=>{var e,t;return(null==(t=null==(e=l.value)?void 0:e.data)?void 0:t.filter(e=>e.is_featured))||[]}),c=e(()=>{var e,t;return(null==(t=null==(e=l.value)?void 0:e.data)?void 0:t.sort((e,t)=>(t.likes_count||0)-(e.likes_count||0)))||[]});return{recipes:l,featuredRecipes:o,popularRecipes:c,error:r,loading:s,execute:i,refresh:n}}({limit:4,sort_by:"created_at",sort_order:"desc"}),{tips:d,error:u,loading:v}=function(t={},a={}){const{data:l,error:r,loading:s,execute:i,refresh:n}=_("/tips",t,{cacheTTL:3e5,...a}),o=e(()=>{var e,t;return(null==(t=null==(e=l.value)?void 0:e.data)?void 0:t.filter(e=>e.is_featured))||[]}),c=e(()=>{var e;const t={};return(null==(e=l.value)?void 0:e.data)&&l.value.data.forEach(e=>{const a=e.difficulty_level||"beginner";t[a]||(t[a]=[]),t[a].push(e)}),t});return{tips:l,featuredTips:o,tipsByDifficulty:c,error:r,loading:s,execute:i,refresh:n}}({limit:4,sort_by:"created_at",sort_order:"desc"}),{events:p,error:m,loading:f}=function(t={},a={}){const{data:l,error:r,loading:s,execute:i,refresh:n}=_("/events",t,{cacheTTL:3e5,...a}),o=e(()=>{var e,t;return(null==(t=null==(e=l.value)?void 0:e.data)?void 0:t.filter(e=>"active"===e.status))||[]}),c=e(()=>{var e,t;return(null==(t=null==(e=l.value)?void 0:e.data)?void 0:t.filter(e=>new Date(e.date)>new Date).sort((e,t)=>new Date(e.date)-new Date(t.date)))||[]}),d=e(()=>{var e,t;return(null==(t=null==(e=l.value)?void 0:e.data)?void 0:t.filter(e=>e.is_featured))||[]});return{events:l,activeEvents:o,upcomingEvents:c,featuredEvents:d,error:r,loading:s,execute:i,refresh:n}}({limit:4,sort_by:"created_at",sort_order:"desc"}),{videos:y,error:h,loading:b}=function(t={},a={}){const{data:l,error:r,loading:s,execute:i,refresh:n}=_("/dinor-tv",t,{cacheTTL:6e5,...a}),o=e(()=>{var e,t;return(null==(t=null==(e=l.value)?void 0:e.data)?void 0:t.filter(e=>e.is_featured))||[]}),c=e(()=>{var e,t;return(null==(t=null==(e=l.value)?void 0:e.data)?void 0:t.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)))||[]}),d=e(()=>{var e;const t={};return(null==(e=l.value)?void 0:e.data)&&l.value.data.forEach(e=>{var a;const l=(null==(a=e.category)?void 0:a.name)||"Autres";t[l]||(t[l]=[]),t[l].push(e)}),t});return{videos:l,featuredVideos:o,latestVideos:c,videosByCategory:d,error:r,loading:s,execute:i,refresh:n}}({limit:4,sort_by:"created_at",sort_order:"desc"}),C=e(()=>{var e,t;return(null==(t=null==(e=n.value)?void 0:e.data)?void 0:t.slice(0,4))||[]}),D=e(()=>{var e,t;return(null==(t=null==(e=d.value)?void 0:e.data)?void 0:t.slice(0,4))||[]}),I=e(()=>{var e,t;return(null==(t=null==(e=p.value)?void 0:e.data)?void 0:t.slice(0,4))||[]}),T=e(()=>{var e,t;return(null==(t=null==(e=y.value)?void 0:e.data)?void 0:t.slice(0,4))||[]}),S=e(()=>{var e,t,a,l,r,s,i,o;return{recipes:(null==(t=null==(e=n.value)?void 0:e.meta)?void 0:t.total)||C.value.length,tips:(null==(l=null==(a=d.value)?void 0:a.meta)?void 0:l.total)||D.value.length,events:(null==(s=null==(r=p.value)?void 0:r.meta)?void 0:s.total)||I.value.length,videos:(null==(o=null==(i=y.value)?void 0:i.meta)?void 0:o.total)||T.value.length}});return{banners:r,loadingBanners:s,errorBanners:i,latestRecipes:C,latestTips:D,latestEvents:I,latestVideos:T,stats:S,loadingRecipes:c,loadingTips:v,loadingEvents:f,loadingVideos:b,errorRecipes:o,errorTips:u,errorEvents:m,errorVideos:h,handleRecipeClick:e=>{l.push(`/recipe/${e.id}`)},handleTipClick:e=>{l.push(`/tip/${e.id}`)},handleEventClick:e=>{l.push(`/event/${e.id}`)},handleVideoClick:e=>{l.push(`/video/${e.id}`)},getShortDescription:e=>{if(!e)return"";const t=e.replace(/<[^>]*>/g,"");return t.length>80?t.substring(0,80)+"...":t},getDifficultyLabel:e=>({beginner:"Débutant",intermediate:"Intermédiaire",advanced:"Avancé"}[e]||e),getStatusClass:e=>`status-${e}`,getStatusLabel:e=>({active:"Actif",upcoming:"À venir",completed:"Terminé",cancelled:"Annulé"}[e]||e),formatDate:e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"short"}):"",getVideoThumbnail:e=>{if(!e)return"/images/default-video.jpg";const t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return t?`https://img.youtube.com/vi/${t[1]}/maxresdefault.jpg`:"/images/default-video.jpg"},formatDuration:e=>{if(!e)return"";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`},getContrastColor:e=>(.299*parseInt(e.slice(1,3),16)+.587*parseInt(e.slice(3,5),16)+.114*parseInt(e.slice(5,7),16))/255>.5?"#000000":"#FFFFFF"}}},[["render",function(e,t,a,l,m,g){const _=c("router-link"),k=c("ContentCarousel");return f(),r("div",Q,[(f(!0),r(u,null,v(l.banners,e=>(f(),r("section",{key:e.id,class:"hero banner",style:h({backgroundColor:e.background_color,backgroundImage:e.image_url?`url(${e.image_url})`:null,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"})},[e.image_url?(f(),r("div",{key:0,class:"banner-overlay",style:h({background:`linear-gradient(135deg, ${e.background_color}CC, ${e.background_color}88)`})},null,4)):d("",!0),s("div",{class:"hero-content",style:h({color:e.text_color})},[s("h1",U,n(e.title),1),e.description?(f(),r("p",X,n(e.description),1)):d("",!0),e.button_text&&e.button_url?(f(),b(_,{key:1,to:e.button_url,class:"hero-button",style:h({backgroundColor:e.button_color,color:l.getContrastColor(e.button_color),borderColor:e.button_color})},{default:o(()=>[y(n(e.button_text),1)]),_:2},1032,["to","style"])):d("",!0)],4)],4))),128)),l.banners.length||l.loadingBanners?d("",!0):(f(),r("section",Y,t[0]||(t[0]=[s("div",{class:"hero-content"},[s("h1",null,"Bienvenue sur Dinor"),s("p",null,"Découvrez les saveurs authentiques de la Côte d'Ivoire")],-1)]))),i(k,{title:"Dernières Recettes",items:l.latestRecipes,loading:l.loadingRecipes,error:l.errorRecipes,"content-type":"recipes","view-all-link":"/recipes",onItemClick:l.handleRecipeClick},{item:o(({item:e})=>[s("div",Z,[s("div",ee,[s("img",{src:e.featured_image_url||"/images/default-recipe.jpg",alt:e.title,loading:"lazy"},null,8,te),s("div",ae,[e.preparation_time?(f(),r("span",le,n(e.preparation_time)+"min ",1)):d("",!0),e.difficulty?(f(),r("span",re,n(l.getDifficultyLabel(e.difficulty)),1)):d("",!0)])]),s("div",se,[s("h3",null,n(e.title),1),s("p",null,n(l.getShortDescription(e.short_description)),1),s("div",ie,[s("span",ne,[t[1]||(t[1]=s("span",{class:"material-symbols-outlined"},"favorite",-1)),y(" "+n(e.likes_count||0),1)]),s("span",oe,n(l.formatDate(e.created_at)),1)])])])]),_:1},8,["items","loading","error","onItemClick"]),i(k,{title:"Dernières Astuces",items:l.latestTips,loading:l.loadingTips,error:l.errorTips,"content-type":"tips","view-all-link":"/tips",onItemClick:l.handleTipClick},{item:o(({item:e})=>[s("div",ce,[t[2]||(t[2]=s("div",{class:"tip-icon"},[s("span",{class:"material-symbols-outlined"},"lightbulb")],-1)),s("div",de,[s("h3",null,n(e.title),1),s("p",null,n(l.getShortDescription(e.content)),1),s("div",ue,[e.estimated_time?(f(),r("span",ve,n(e.estimated_time)+"min ",1)):d("",!0),s("span",pe,n(l.getDifficultyLabel(e.difficulty_level)),1),s("span",me,n(l.formatDate(e.created_at)),1)])])])]),_:1},8,["items","loading","error","onItemClick"]),i(k,{title:"Derniers Événements",items:l.latestEvents,loading:l.loadingEvents,error:l.errorEvents,"content-type":"events","view-all-link":"/events",onItemClick:l.handleEventClick},{item:o(({item:e})=>[s("div",ge,[s("div",fe,[s("img",{src:e.featured_image_url||"/images/default-event.jpg",alt:e.title,loading:"lazy"},null,8,ye),s("div",he,[s("span",{class:p([l.getStatusClass(e.status),"status-badge"])},n(l.getStatusLabel(e.status)),3)])]),s("div",be,[s("h3",null,n(e.title),1),s("p",null,n(l.getShortDescription(e.short_description)),1),s("div",_e,[s("span",ke,[t[3]||(t[3]=s("span",{class:"material-symbols-outlined"},"calendar_today",-1)),y(" "+n(l.formatDate(e.start_date)),1)]),s("span",Ce,n(l.formatDate(e.created_at)),1)])])])]),_:1},8,["items","loading","error","onItemClick"]),i(k,{title:"Dernières Vidéos Dinor TV",items:l.latestVideos,loading:l.loadingVideos,error:l.errorVideos,"content-type":"videos","view-all-link":"/dinor-tv",onItemClick:l.handleVideoClick,class:"dinor-tv-section"},{item:o(({item:e})=>[s("div",De,[s("div",Ie,[s("img",{src:e.thumbnail_url||l.getVideoThumbnail(e.video_url),alt:e.title,loading:"lazy"},null,8,Te),s("div",Se,[t[5]||(t[5]=s("div",{class:"play-button"},[s("span",{class:"material-symbols-outlined"},"play_circle")],-1)),e.is_live?(f(),r("div",we,t[4]||(t[4]=[s("span",{class:"live-dot"},null,-1),y(" LIVE ")]))):d("",!0),e.duration?(f(),r("div",Ee,n(l.formatDuration(e.duration)),1)):d("",!0)])]),s("div",Le,[s("h3",null,n(e.title),1),s("p",null,n(l.getShortDescription(e.description)),1),s("div",xe,[s("span",$e,[t[6]||(t[6]=s("span",{class:"material-symbols-outlined"},"visibility",-1)),y(" "+n(e.views_count||0),1)]),s("span",Re,n(l.formatDate(e.created_at)),1)])])])]),_:1},8,["items","loading","error","onItemClick"])])}],["__scopeId","data-v-211d83bf"]]);export{Be as default};
