import{h as e,i as a,k as t,x as s,A as n,l as i,F as l,E as c,q as o,t as r,j as u,G as d,B as m,D as p,r as v,g as h,o as g}from"./vendor.Bvrl98ec.js";import{_ as y,D as b,A as _,u as w,d as k}from"./index.CsDJUcBR.js";const f={class:"tournament-betting"},S={class:"md3-main-content"},z={class:"page-header"},B={class:"header-content"},x={class:"breadcrumb"},A={class:"tournament-selection"},D={class:"section-title"},M={key:0,class:"loading-state"},C={key:1,class:"tournaments-grid"},T=["onClick"],E={class:"tournament-header"},V={class:"tournament-name"},P={class:"tournament-badges"},W={key:0,class:"featured-badge"},q={class:"tournament-description"},U={class:"tournament-stats"},j={class:"stat"},I={key:0,class:"stat"},$={class:"stat"},F={class:"tournament-progress"},R={class:"progress-bar"},N={class:"progress-text"},G={key:0,class:"betting-interface"},L={class:"interface-header"},Q={class:"section-title"},O={key:0,class:"user-balance"},X={class:"matches-section"},H={key:0,class:"loading-state"},J={key:1,class:"no-matches"},K={key:2,class:"matches-grid"},Y={class:"match-header"},Z={class:"match-info"},ee={class:"round"},ae={class:"match-date"},te={class:"betting-status"},se={key:0,class:"status-open"},ne={key:1,class:"status-closed"},ie={class:"teams-section"},le={class:"team home-team"},ce=["src","alt"],oe={key:1,class:"team-logo-placeholder"},re={class:"team-info"},ue={class:"team-name"},de={class:"team-country"},me={class:"vs-section"},pe={key:0,class:"odds-display"},ve={class:"odd-item"},he={class:"odd-value"},ge={class:"odd-item"},ye={class:"odd-value"},be={class:"odd-item"},_e={class:"odd-value"},we={class:"team away-team"},ke=["src","alt"],fe={key:1,class:"team-logo-placeholder"},Se={class:"team-info"},ze={class:"team-name"},Be={class:"team-country"},xe={key:0,class:"betting-form"},Ae={class:"bet-types"},De={class:"bet-type score-prediction"},Me={class:"bet-label"},Ce={class:"score-inputs"},Te={class:"score-input"},Ee=["onUpdate:modelValue"],Ve={class:"score-input"},Pe=["onUpdate:modelValue"],We={class:"bet-type winner-prediction"},qe={class:"bet-label"},Ue={class:"winner-options"},je=["onClick"],Ie=["onClick"],$e=["onClick"],Fe={class:"bet-type bet-amount"},Re={class:"bet-label"},Ne={class:"amount-input"},Ge=["onUpdate:modelValue","max"],Le={class:"quick-amounts"},Qe=["onClick"],Oe={class:"bet-summary"},Xe={class:"summary-item"},He={class:"summary-item"},Je={class:"summary-item"},Ke=["onClick","disabled"],Ye={key:0,class:"loading-spinner"},Ze={key:1},ea={key:1,class:"auth-required"},aa={key:2,class:"existing-bet"},ta={class:"bet-details"},sa={class:"detail-item"},na={class:"detail-item"},ia={class:"detail-item"},la={class:"betting-stats"},ca={class:"subsection-title"},oa={class:"stats-grid"},ra={class:"stat-card"},ua={class:"stat-icon"},da={class:"stat-content"},ma={class:"stat-value"},pa={class:"stat-card"},va={class:"stat-icon"},ha={class:"stat-content"},ga={class:"stat-value"},ya={class:"stat-card"},ba={class:"stat-icon"},_a={class:"stat-content"},wa={class:"stat-value"},ka={class:"stat-card"},fa={class:"stat-icon"},Sa={class:"stat-content"},za={class:"stat-value"},Ba={key:1,class:"no-tournament-selected"},xa={class:"placeholder-content"};const Aa=y({name:"TournamentBetting",components:{AuthModal:_,DinorIcon:b},setup(){const e=w(),a=k(),t=v([]),s=v(null),n=v([]);v({});const i=v({}),l=v({}),c=v(1e3),o=v(!0),r=v(!1),u=v(!1),d=v(!1),m=v({}),p=e=>(m.value[e]||(m.value[e]={homeScore:0,awayScore:0,winner:null,amount:10}),m.value[e]),g=e=>{switch(e){case"home":return"Victoire domicile";case"away":return"Victoire extérieur";case"draw":return"Match nul";default:return"Non défini"}},y=e=>{const a=p(e);return null!==a.homeScore&&null!==a.awayScore&&a.winner&&a.amount>0&&a.amount<=c.value},b=async a=>{try{r.value=!0;const t=await e.get(`/tournaments/${a}/matches/betting`);t.success&&(n.value=t.data)}catch(t){console.error("Erreur chargement matchs:",t)}finally{r.value=!1}},_=async a=>{try{const t=await e.get(`/tournaments/${a}/my-bets`);t.success&&(i.value=t.data.reduce((e,a)=>(e[a.football_match_id]=a,e),{}))}catch(t){console.error("Erreur chargement paris utilisateur:",t)}},f=async()=>{try{const a=await e.get("/betting/my-stats");a.success&&(l.value=a.data)}catch(a){console.error("Erreur chargement stats:",a)}};return h(()=>{(async()=>{try{o.value=!0;const a=await e.get("/tournaments/betting-available");a.success&&(t.value=a.data)}catch(a){console.error("Erreur chargement tournois:",a)}finally{o.value=!1}})()}),{availableTournaments:t,selectedTournament:s,tournamentMatches:n,userStats:l,userBalance:c,loadingTournaments:o,loadingMatches:r,submitting:u,showAuthModal:d,quickAmounts:[10,25,50,100,250],apiStore:e,authStore:a,selectTournament:async e=>{s.value=e,await b(e.id),a.isAuthenticated&&(await _(e.id),await f())},getBetData:p,setBetWinner:(e,a)=>{p(e).winner=a},setQuickAmount:(e,a)=>{p(e).amount=Math.min(a,c.value)},getBetSummary:e=>{const a=p(e);return null!==a.homeScore&&null!==a.awayScore&&a.winner?`${a.homeScore}-${a.awayScore}, ${g(a.winner)}`:"Aucune prédiction"},getWinnerText:g,calculatePotentialWin:e=>{const a=p(e),t=a.amount||0;return a.winner&&t>0?Math.round(2*t*1.5):0},canSubmitBet:y,getExistingBet:e=>i.value[e],submitBet:async t=>{if(y(t))try{u.value=!0;const s=p(t),n=await e.post(`/matches/${t}/bet`,{predicted_home_score:s.homeScore,predicted_away_score:s.awayScore,predicted_winner:s.winner,bet_amount:s.amount});n.success&&(c.value-=s.amount,i.value[t]=n.data,delete m.value[t],alert("Pari placé avec succès!"),a.isAuthenticated&&await f())}catch(s){console.error("Erreur soumission pari:",s),alert("Erreur lors de la soumission du pari")}finally{u.value=!1}},handleAuthenticated:()=>{d.value=!1,s.value&&(_(s.value.id),f())},formatCurrency:(e,a="EUR")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:a}).format(e),formatDate:e=>new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}),formatMatchDateTime:e=>new Date(e).toLocaleString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}}},[["render",function(v,h,y,b,_,w){const k=i("router-link"),Aa=i("DinorIcon"),Da=i("AuthModal");return g(),e("div",f,[a("main",S,[a("div",z,[a("div",B,[a("div",x,[t(k,{to:"/predictions",class:"breadcrumb-link"},{default:s(()=>h[2]||(h[2]=[n("Prédictions")])),_:1,__:[2]}),t(Aa,{name:"chevron_right",size:16}),h[3]||(h[3]=a("span",{class:"current-page"},"Paris de Tournois",-1))]),h[4]||(h[4]=a("h1",{class:"md3-title-large dinor-text-primary"},"Interface de Paris",-1)),h[5]||(h[5]=a("p",{class:"md3-body-medium dinor-text-gray"}," Pariez intelligemment sur les tournois et maximisez vos gains ",-1))])]),a("div",A,[a("h2",D,[t(Aa,{name:"emoji_events",size:20}),h[6]||(h[6]=n(" Sélectionner un tournoi "))]),b.loadingTournaments?(g(),e("div",M,h[7]||(h[7]=[a("div",{class:"md3-circular-progress"},null,-1),a("p",null,"Chargement des tournois...",-1)]))):(g(),e("div",C,[(g(!0),e(l,null,c(b.availableTournaments,s=>{var i;return g(),e("div",{key:s.id,class:o(["tournament-card",{selected:(null==(i=b.selectedTournament)?void 0:i.id)===s.id}]),onClick:e=>b.selectTournament(s)},[a("div",E,[a("h3",V,r(s.name),1),a("div",P,[a("span",{class:o(["status-badge",s.status])},r(s.status_label),3),s.is_featured?(g(),e("span",W,[t(Aa,{name:"star",size:16}),h[8]||(h[8]=n(" Vedette "))])):u("",!0)])]),a("p",q,r(s.description),1),a("div",U,[a("div",j,[t(Aa,{name:"group",size:16}),a("span",null,r(s.participants_count)+" participants",1)]),s.prize_pool>0?(g(),e("div",I,[t(Aa,{name:"emoji_events",size:16}),a("span",null,r(b.formatCurrency(s.prize_pool,s.currency)),1)])):u("",!0),a("div",$,[t(Aa,{name:"schedule",size:16}),a("span",null,r(b.formatDate(s.end_date)),1)])]),a("div",F,[a("div",R,[a("div",{class:"progress-fill",style:d({width:s.progress_percentage+"%"})},null,4)]),a("span",N,r(s.progress_percentage)+"% terminé",1)])],10,T)}),128))]))]),b.selectedTournament?(g(),e("div",G,[a("div",L,[a("h2",Q,[t(Aa,{name:"casino",size:20}),n(" Interface de Paris - "+r(b.selectedTournament.name),1)]),b.authStore.isAuthenticated?(g(),e("div",O,[t(Aa,{name:"account_balance_wallet",size:20}),a("span",null,"Solde: "+r(b.userBalance)+" points",1)])):u("",!0)]),a("div",X,[h[29]||(h[29]=a("h3",{class:"subsection-title"},"Matchs disponibles",-1)),b.loadingMatches?(g(),e("div",H,h[9]||(h[9]=[a("div",{class:"md3-circular-progress"},null,-1),a("p",null,"Chargement des matchs...",-1)]))):0===b.tournamentMatches.length?(g(),e("div",J,[t(Aa,{name:"sports_soccer",size:48}),h[10]||(h[10]=a("h3",null,"Aucun match disponible",-1)),h[11]||(h[11]=a("p",null,"Aucun match n'est actuellement ouvert aux paris pour ce tournoi.",-1))])):(g(),e("div",K,[(g(!0),e(l,null,c(b.tournamentMatches,s=>(g(),e("div",{key:s.id,class:"match-betting-card"},[a("div",Y,[a("div",Z,[a("span",ee,r(s.round||"Match"),1),a("span",ae,r(b.formatMatchDateTime(s.match_date)),1)]),a("div",te,[s.can_predict?(g(),e("span",se,[t(Aa,{name:"lock_open",size:16}),h[12]||(h[12]=n(" Paris ouverts "))])):(g(),e("span",ne,[t(Aa,{name:"lock",size:16}),h[13]||(h[13]=n(" Paris fermés "))]))])]),a("div",ie,[a("div",le,[s.home_team.logo_url?(g(),e("img",{key:0,src:s.home_team.logo_url,alt:s.home_team.name,class:"team-logo"},null,8,ce)):(g(),e("div",oe,[t(Aa,{name:"shield",size:32})])),a("div",re,[a("h4",ue,r(s.home_team.name),1),a("span",de,r(s.home_team.country),1)])]),a("div",me,[h[17]||(h[17]=a("span",{class:"vs-text"},"VS",-1)),s.odds?(g(),e("div",pe,[a("div",ve,[h[14]||(h[14]=a("span",{class:"odd-label"},"Dom.",-1)),a("span",he,r(s.odds.home),1)]),a("div",ge,[h[15]||(h[15]=a("span",{class:"odd-label"},"Nul",-1)),a("span",ye,r(s.odds.draw),1)]),a("div",be,[h[16]||(h[16]=a("span",{class:"odd-label"},"Ext.",-1)),a("span",_e,r(s.odds.away),1)])])):u("",!0)]),a("div",we,[s.away_team.logo_url?(g(),e("img",{key:0,src:s.away_team.logo_url,alt:s.away_team.name,class:"team-logo"},null,8,ke)):(g(),e("div",fe,[t(Aa,{name:"shield",size:32})])),a("div",Se,[a("h4",ze,r(s.away_team.name),1),a("span",Be,r(s.away_team.country),1)])])]),s.can_predict&&b.authStore.isAuthenticated?(g(),e("div",xe,[a("div",Ae,[h[22]||(h[22]=a("h4",{class:"form-title"},"Types de paris",-1)),a("div",De,[a("label",Me,[t(Aa,{name:"sports_score",size:16}),h[18]||(h[18]=n(" Prédiction de score "))]),a("div",Ce,[a("div",Te,[a("label",null,r(s.home_team.short_name||"DOM"),1),m(a("input",{"onUpdate:modelValue":e=>b.getBetData(s.id).homeScore=e,type:"number",min:"0",max:"10",class:"score-field"},null,8,Ee),[[p,b.getBetData(s.id).homeScore,void 0,{number:!0}]])]),h[19]||(h[19]=a("span",{class:"score-separator"},"-",-1)),a("div",Ve,[a("label",null,r(s.away_team.short_name||"EXT"),1),m(a("input",{"onUpdate:modelValue":e=>b.getBetData(s.id).awayScore=e,type:"number",min:"0",max:"10",class:"score-field"},null,8,Pe),[[p,b.getBetData(s.id).awayScore,void 0,{number:!0}]])])])]),a("div",We,[a("label",qe,[t(Aa,{name:"emoji_events",size:16}),h[20]||(h[20]=n(" Vainqueur "))]),a("div",Ue,[a("button",{class:o(["winner-btn",{active:"home"===b.getBetData(s.id).winner}]),onClick:e=>b.setBetWinner(s.id,"home")},r(s.home_team.short_name||"Domicile"),11,je),a("button",{class:o(["winner-btn",{active:"draw"===b.getBetData(s.id).winner}]),onClick:e=>b.setBetWinner(s.id,"draw")}," Match nul ",10,Ie),a("button",{class:o(["winner-btn",{active:"away"===b.getBetData(s.id).winner}]),onClick:e=>b.setBetWinner(s.id,"away")},r(s.away_team.short_name||"Extérieur"),11,$e)])]),a("div",Fe,[a("label",Re,[t(Aa,{name:"payments",size:16}),h[21]||(h[21]=n(" Mise (points) "))]),a("div",Ne,[m(a("input",{"onUpdate:modelValue":e=>b.getBetData(s.id).amount=e,type:"number",min:"1",max:b.userBalance,placeholder:"Montant en points",class:"amount-field"},null,8,Ge),[[p,b.getBetData(s.id).amount,void 0,{number:!0}]]),a("div",Le,[(g(!0),e(l,null,c(b.quickAmounts,a=>(g(),e("button",{key:a,onClick:e=>b.setQuickAmount(s.id,a),class:"quick-amount-btn"},r(a),9,Qe))),128))])])])]),a("div",Oe,[a("div",Xe,[h[23]||(h[23]=a("span",null,"Prédiction:",-1)),a("span",null,r(b.getBetSummary(s.id)),1)]),a("div",He,[h[24]||(h[24]=a("span",null,"Mise:",-1)),a("span",null,r(b.getBetData(s.id).amount||0)+" points",1)]),a("div",Je,[h[25]||(h[25]=a("span",null,"Gain potentiel:",-1)),a("span",null,r(b.calculatePotentialWin(s.id))+" points",1)])]),a("button",{onClick:e=>b.submitBet(s.id),disabled:!b.canSubmitBet(s.id)||b.submitting,class:"btn-primary submit-bet"},[b.submitting?(g(),e("span",Ye)):(g(),e("span",Ze,[t(Aa,{name:"casino",size:16}),h[26]||(h[26]=n(" Placer le pari "))]))],8,Ke)])):s.can_predict&&!b.authStore.isAuthenticated?(g(),e("div",ea,[t(Aa,{name:"login",size:32}),h[27]||(h[27]=a("p",null,"Connectez-vous pour parier sur ce match",-1)),a("button",{onClick:h[0]||(h[0]=e=>b.showAuthModal=!0),class:"btn-primary"}," Se connecter ")])):u("",!0),b.getExistingBet(s.id)?(g(),e("div",aa,[h[28]||(h[28]=a("h4",{class:"existing-bet-title"},"Votre pari actuel",-1)),a("div",ta,[a("div",sa,[t(Aa,{name:"sports_score",size:16}),a("span",null,r(b.getExistingBet(s.id).predicted_home_score)+"-"+r(b.getExistingBet(s.id).predicted_away_score),1)]),a("div",na,[t(Aa,{name:"emoji_events",size:16}),a("span",null,r(b.getWinnerText(b.getExistingBet(s.id).predicted_winner)),1)]),a("div",ia,[t(Aa,{name:"payments",size:16}),a("span",null,r(b.getExistingBet(s.id).bet_amount||0)+" points",1)])])])):u("",!0)]))),128))]))]),a("div",la,[a("h3",ca,[t(Aa,{name:"analytics",size:20}),h[30]||(h[30]=n(" Vos statistiques de paris "))]),a("div",oa,[a("div",ra,[a("div",ua,[t(Aa,{name:"casino",size:24})]),a("div",da,[a("h4",ma,r(b.userStats.totalBets||0),1),h[31]||(h[31]=a("p",{class:"stat-label"},"Paris placés",-1))])]),a("div",pa,[a("div",va,[t(Aa,{name:"trending_up",size:24})]),a("div",ha,[a("h4",ga,r(b.userStats.winRate||0)+"%",1),h[32]||(h[32]=a("p",{class:"stat-label"},"Taux de réussite",-1))])]),a("div",ya,[a("div",ba,[t(Aa,{name:"payments",size:24})]),a("div",_a,[a("h4",wa,r(b.userStats.totalWinnings||0),1),h[33]||(h[33]=a("p",{class:"stat-label"},"Gains totaux",-1))])]),a("div",ka,[a("div",fa,[t(Aa,{name:"leaderboard",size:24})]),a("div",Sa,[a("h4",za,"#"+r(b.userStats.rank||"N/A"),1),h[34]||(h[34]=a("p",{class:"stat-label"},"Classement",-1))])])])])])):(g(),e("div",Ba,[a("div",xa,[t(Aa,{name:"casino",size:64}),h[35]||(h[35]=a("h3",null,"Sélectionnez un tournoi",-1)),h[36]||(h[36]=a("p",null,"Choisissez un tournoi ci-dessus pour commencer à parier",-1))])]))]),t(Da,{modelValue:b.showAuthModal,"onUpdate:modelValue":h[1]||(h[1]=e=>b.showAuthModal=e),onAuthenticated:b.handleAuthenticated},null,8,["modelValue","onAuthenticated"])])}],["__scopeId","data-v-861f175d"]]);export{Aa as default};
