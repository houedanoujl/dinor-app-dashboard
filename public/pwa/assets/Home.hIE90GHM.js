import{b as e,r as t,h as a,q as s,H as i,e as l,f as r,v as n,t as o,p as c,z as u,l as d,g as v,F as m,m as p,n as h,j as f,k as g,o as y,y as k}from"./vendor.CgTKjNNK.js";import{u as _}from"./useApi.CwvlQ1Zj.js";import{B as b,u as w}from"./BannerSection.WFCjefTr.js";import{u as C,a as A,_ as D,C as R,A as T}from"./index.Dqjl_hq9.js";import{L as E}from"./LikeButton.CtoT2qa6.js";const S=t(!1),I=t("");function L(){return function(){const e=C(),t=(t,a="")=>{console.warn("🔐 [Auth Handler] Erreur d'authentification détectée:",t),e.token&&401===t.status&&e.clearAuth();let s="";return s="AUTH_REQUIRED"===t.type?t.message:401===t.status?a?`Pour ${a}, vous devez être connecté. Veuillez vous connecter ou créer un compte.`:"Vous devez être connecté pour effectuer cette action. Veuillez vous connecter ou créer un compte.":t.message||"Une erreur s'est produite lors de l'authentification.",S.value=!0,I.value=s,{shouldShowModal:!0,message:s}},a=(t,a="")=>{if(!e.isAuthenticated){const e=a?`Pour ${a}, vous devez être connecté. Veuillez vous connecter ou créer un compte.`:"Vous devez être connecté pour effectuer cette action. Veuillez vous connecter ou créer un compte.";return S.value=!0,I.value=e,!1}return!0},s=()=>{S.value=!1,I.value=""};return{showAuthModal:S,authModalMessage:I,handleAuthError:t,requireAuth:a,closeAuthModal:s,handleAuthSuccess:e=>{console.log("✅ [Auth Handler] Authentification réussie:",e),s()},withAuth:async(e,s="")=>{if(!a(0,s))return!1;try{return await e()}catch(i){if(401===i.status||"AUTH_REQUIRED"===i.type)return t(i,s),!1;throw i}}}}()}function V(){const e=A(),i=t(new Set),l=t(!1),r={emit(e,t){console.log("🔄 [RefreshBus] Émission événement:",e,t);const a=new CustomEvent(e,{detail:t});window.dispatchEvent(a)},on:(e,t)=>(console.log("👂 [RefreshBus] Écoute événement:",e),window.addEventListener(e,t),()=>window.removeEventListener(e,t))},n=async(t,a={})=>{if(!l.value||a.force){l.value=!0,console.log(`🔄 [Refresh] Début rafraîchissement: ${t}`);try{if(e.invalidateCache(`/${t}`),"caches"in window){const e=await caches.keys();await Promise.all(e.map(e=>{if(e.includes(t)||e.includes("api"))return console.log(`🗑️ [Refresh] Suppression cache: ${e}`),caches.delete(e)}))}r.emit("content-refresh",{type:t,timestamp:Date.now(),source:"manual"}),console.log(`✅ [Refresh] Rafraîchissement terminé: ${t}`)}catch(s){throw console.error(`❌ [Refresh] Erreur rafraîchissement ${t}:`,s),s}finally{l.value=!1}}else console.log("⏳ [Refresh] Rafraîchissement déjà en cours")},o=async()=>{console.log("🔄 [Refresh] Rafraîchissement global");const e=["recipes","tips","events","dinor_tv","banners"];for(const t of e)await n(t,{force:!0})};return a(()=>{"serviceWorker"in navigator&&(navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("🔄 [PWA] Service Worker mis à jour, rafraîchissement des données"),o()}),navigator.serviceWorker.addEventListener("message",e=>{var t;if("CACHE_UPDATED"===(null==(t=e.data)?void 0:t.type)){console.log("🔄 [PWA] Cache mis à jour:",e.data.url);const t=e.data.url;let a=null;t.includes("/recipes")?a="recipes":t.includes("/tips")?a="tips":t.includes("/events")?a="events":t.includes("/dinor-tv")&&(a="dinor_tv"),a&&n(a)}}))}),s(()=>{i.value.forEach(e=>e()),i.value.clear()}),{isRefreshing:l,refreshContentType:n,refreshAll:o,onRefresh:(e,t={})=>{const a=r.on("content-refresh",a=>{const{type:s,timestamp:i,source:l}=a.detail;console.log("📡 [Refresh] Événement reçu:",{type:s,timestamp:i,source:l}),t.contentType&&t.contentType!==s||e(a)});return i.value.add(a),a},setupAutoRefresh:(e=3e5)=>{let t=null,a=Date.now();const s=()=>{a=Date.now()},i=["click","scroll","keypress","touchstart"];return i.forEach(e=>{document.addEventListener(e,s,{passive:!0})}),t=setInterval(async()=>{if(Date.now()-a>12e4)console.log("😴 [AutoRefresh] Utilisateur inactif, pas de rafraîchissement");else{console.log("🔄 [AutoRefresh] Rafraîchissement automatique");try{await o()}catch(e){console.error("❌ [AutoRefresh] Erreur:",e)}}},e),()=>{t&&clearInterval(t),i.forEach(e=>{document.removeEventListener(e,s)})}},refreshBus:r}}const $={name:"ContentCarousel",props:{title:{type:String,required:!0},items:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:null},contentType:{type:String,required:!0,validator:e=>["recipes","tips","events","videos"].includes(e)},viewAllLink:{type:String,required:!0},showControls:{type:Boolean,default:!0},showIndicators:{type:Boolean,default:!1},itemsPerView:{type:Number,default:4}},emits:["item-click"],setup(e,{emit:l}){const r=g(),n=t(null),o=t(0),c=t(!1),u=t(!0),d=()=>{const e=n.value;e&&(c.value=e.scrollLeft>0,u.value=e.scrollLeft<e.scrollWidth-e.clientWidth)},v=()=>({recipes:"/images/default-recipe.jpg",tips:"/images/default-tip.jpg",events:"/images/default-event.jpg",videos:"/images/default-video.jpg"}[e.contentType]||"/images/default-recipe.jpg");return a(async()=>{await i(),d();const e=n.value;e&&e.addEventListener("scroll",d)}),s(()=>{const e=n.value;e&&e.removeEventListener("scroll",d)}),{carouselRef:n,currentIndex:o,canScrollLeft:c,canScrollRight:u,scrollCarousel:e=>{var t;const a=n.value;if(!a)return;const s=2*(((null==(t=a.querySelector(".carousel-item"))?void 0:t.offsetWidth)||280)+16);a.scrollBy({left:e*s,behavior:"smooth"}),setTimeout(d,300)},scrollToIndex:e=>{var t;const a=n.value;if(!a)return;const s=e*(((null==(t=a.querySelector(".carousel-item"))?void 0:t.offsetWidth)||280)+16);a.scrollTo({left:s,behavior:"smooth"}),o.value=e},handleItemClick:t=>{l("item-click",t);const a={recipes:`/recipe/${t.id}`,tips:`/tip/${t.id}`,events:`/event/${t.id}`,videos:`/video/${t.id}`}[e.contentType];a&&r.push(a)},getShortDescription:e=>{if(!e)return"Aucune description disponible";return e.length>100?e.substring(0,100)+"...":e},formatDate:e=>{if(!e)return"";return new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})},formatDuration:e=>{if(!e)return"";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`},getDifficultyLabel:e=>({easy:"Facile",medium:"Moyen",hard:"Difficile",beginner:"Débutant",intermediate:"Intermédiaire",advanced:"Avancé"}[e]||e||"Non spécifié"),getStatusLabel:e=>({active:"Actif",upcoming:"À venir",completed:"Terminé",cancelled:"Annulé",draft:"Brouillon",published:"Publié"}[e]||e||"Non défini"),getStatusClass:e=>`status-${e}`,getItemClass:()=>`content-${e.contentType}`,getTypeIcon:()=>({recipes:"restaurant",tips:"lightbulb",events:"event",videos:"play_circle"}[e.contentType]||"info"),getTotalTime:t=>{if("recipes"===e.contentType){const e=(t.preparation_time||0)+(t.cooking_time||0)+(t.resting_time||0);return e>0?e:null}return t.estimated_time||t.preparation_time||null},getDefaultImage:v,getVideoThumbnail:e=>{if((null==e?void 0:e.includes("youtube.com"))||(null==e?void 0:e.includes("youtu.be"))){return`https://img.youtube.com/vi/${e.split("v=")[1]||e.split("/").pop()}/maxresdefault.jpg`}return"/images/default-video-thumbnail.jpg"},handleImageError:e=>{e.target.src=v()}}}},j={class:"content-carousel"},M={class:"section-header"},B={class:"carousel-container"},x={key:0,class:"carousel-loading"},z={key:1,class:"carousel-error"},F={key:2,class:"carousel-empty"},H={key:3,class:"carousel-wrapper"},P=["onClick"],q={class:"default-card"},W={key:0,class:"card-image"},U=["src","alt"],N={class:"card-overlay"},Q={key:0,class:"time-badge"},G={key:1,class:"card-icon"},J={class:"material-icons"},K={class:"card-content"},O={class:"card-meta"},X={key:0,class:"likes"},Y={key:1,class:"favorites"},Z={key:2,class:"date"},ee={key:3,class:"difficulty"},te={key:0,class:"carousel-controls"},ae=["disabled"],se=["disabled"],ie={key:1,class:"carousel-indicators"},le=["onClick"];const re={class:"home"},ne={class:"content-area"},oe={class:"cache-controls"},ce={class:"recipe-card"},ue={class:"card-image"},de=["src","alt"],ve={class:"card-overlay"},me={key:0,class:"time-badge"},pe={key:1,class:"difficulty-badge"},he={class:"card-content"},fe={class:"card-meta"},ge={class:"likes"},ye={class:"date"},ke={class:"tip-card"},_e={class:"card-content"},be={class:"card-meta"},we={key:0,class:"time"},Ce={class:"difficulty"},Ae={class:"date"},De={class:"event-card"},Re={class:"card-image"},Te=["src","alt"],Ee={class:"card-overlay"},Se={class:"card-content"},Ie={class:"card-meta"},Le={class:"date"},Ve={class:"created"},$e={class:"video-card"},je={class:"video-thumbnail"},Me=["src","alt"],Be={class:"video-overlay"},xe={key:0,class:"live-badge"},ze={key:1,class:"duration-badge"},Fe={class:"card-content"},He={class:"card-meta"},Pe={class:"views"},qe={class:"date"};const We=D({name:"Home",components:{ContentCarousel:D($,[["render",function(e,t,a,s,i,g){const k=d("router-link");return y(),l("section",j,[r("div",M,[r("h2",null,o(a.title),1),n(k,{to:a.viewAllLink,class:"see-all-btn"},{default:c(()=>t[3]||(t[3]=[u(" Voir tout "),r("i",{class:"material-icons"},"arrow_forward",-1)])),_:1,__:[3]},8,["to"])]),r("div",B,[a.loading?(y(),l("div",x,t[4]||(t[4]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"Chargement...",-1)]))):a.error?(y(),l("div",z,t[5]||(t[5]=[r("i",{class:"material-icons"},"error",-1),r("p",null,"Erreur lors du chargement",-1)]))):0===a.items.length?(y(),l("div",F,t[6]||(t[6]=[r("i",{class:"material-icons"},"info",-1),r("p",null,"Aucun contenu disponible",-1)]))):(y(),l("div",H,[r("div",{class:"carousel",ref:s.carouselRef},[(y(!0),l(m,null,p(a.items,a=>(y(),l("div",{key:a.id,onClick:e=>s.handleItemClick(a),class:h(["carousel-item",s.getItemClass()])},[f(e.$slots,"item",{item:a,getShortDescription:s.getShortDescription},()=>[r("div",q,[a.featured_image_url||a.image_url?(y(),l("div",W,[r("img",{src:a.featured_image_url||a.image_url||s.getDefaultImage(),alt:a.title,loading:"lazy",onError:t[0]||(t[0]=(...e)=>s.handleImageError&&s.handleImageError(...e))},null,40,U),r("div",N,[s.getTotalTime(a)?(y(),l("span",Q,o(s.getTotalTime(a))+"min ",1)):v("",!0),a.status?(y(),l("span",{key:1,class:h([s.getStatusClass(a.status),"status-badge"])},o(s.getStatusLabel(a.status)),3)):v("",!0)])])):(y(),l("div",G,[r("i",J,o(s.getTypeIcon()),1)])),r("div",K,[r("h3",null,o(a.title),1),r("p",null,o(s.getShortDescription(a.short_description||a.content||a.description)),1),r("div",O,[a.likes_count?(y(),l("span",X,[t[7]||(t[7]=r("i",{class:"material-icons"},"thumb_up",-1)),u(" "+o(a.likes_count),1)])):v("",!0),a.favorites_count?(y(),l("span",Y,[t[8]||(t[8]=r("i",{class:"material-icons"},"favorite",-1)),u(" "+o(a.favorites_count),1)])):v("",!0),a.created_at?(y(),l("span",Z,o(s.formatDate(a.created_at)),1)):v("",!0),a.difficulty_level?(y(),l("span",ee,o(s.getDifficultyLabel(a.difficulty_level)),1)):v("",!0)])])])])],10,P))),128))],512),a.showControls&&a.items.length>1?(y(),l("div",te,[r("button",{onClick:t[1]||(t[1]=e=>s.scrollCarousel(-1)),class:"carousel-btn prev",disabled:!s.canScrollLeft},t[9]||(t[9]=[r("i",{class:"material-icons"},"chevron_left",-1)]),8,ae),r("button",{onClick:t[2]||(t[2]=e=>s.scrollCarousel(1)),class:"carousel-btn next",disabled:!s.canScrollRight},t[10]||(t[10]=[r("i",{class:"material-icons"},"chevron_right",-1)]),8,se)])):v("",!0),a.showIndicators&&a.items.length>1?(y(),l("div",ie,[(y(!0),l(m,null,p(a.items,(e,t)=>(y(),l("button",{key:t,onClick:e=>s.scrollToIndex(t),class:h(["indicator",{active:s.currentIndex===t}])},null,10,le))),128))])):v("",!0)]))])])}],["__scopeId","data-v-14c0b14b"]]),BannerSection:b,LikeButton:E,AuthModal:T,CacheRefreshButton:R},setup(){const t=g(),{showAuthModal:i,authModalMessage:l,handleAuthError:r,closeAuthModal:n,handleAuthSuccess:o}=L(),{banners:c,loading:u,error:d,loadBannersForContentType:v}=w();a(async()=>{await v("home",!0)});const{recipes:m,error:p,loading:h}=function(t={},a={}){const{data:s,error:i,loading:l,execute:r,refresh:n}=_("/recipes",t,{cacheTTL:3e5,...a}),o=e(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.filter(e=>e.is_featured))||[]}),c=e(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.sort((e,t)=>(t.likes_count||0)-(e.likes_count||0)))||[]});return{recipes:s,featuredRecipes:o,popularRecipes:c,error:i,loading:l,execute:r,refresh:n}}({limit:4,sort_by:"created_at",sort_order:"desc"}),{tips:f,error:y,loading:k}=function(t={},a={}){const{data:s,error:i,loading:l,execute:r,refresh:n}=_("/tips",t,{cacheTTL:3e5,...a}),o=e(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.filter(e=>e.is_featured))||[]}),c=e(()=>{var e;const t={};return(null==(e=s.value)?void 0:e.data)&&s.value.data.forEach(e=>{const a=e.difficulty_level||"beginner";t[a]||(t[a]=[]),t[a].push(e)}),t});return{tips:s,featuredTips:o,tipsByDifficulty:c,error:i,loading:l,execute:r,refresh:n}}({limit:4,sort_by:"created_at",sort_order:"desc"}),{events:b,error:C,loading:A}=function(t={},a={}){const{data:s,error:i,loading:l,execute:r,refresh:n}=_("/events",t,{cacheTTL:3e5,...a}),o=e(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.filter(e=>"active"===e.status))||[]}),c=e(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.filter(e=>new Date(e.date)>new Date).sort((e,t)=>new Date(e.date)-new Date(t.date)))||[]}),u=e(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.filter(e=>e.is_featured))||[]});return{events:s,activeEvents:o,upcomingEvents:c,featuredEvents:u,error:i,loading:l,execute:r,refresh:n}}({limit:4,sort_by:"created_at",sort_order:"desc"}),{videos:D,error:R,loading:T}=function(t={},a={}){const{data:s,error:i,loading:l,execute:r,refresh:n}=_("/dinor-tv",t,{cacheTTL:6e5,...a}),o=e(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.filter(e=>e.is_featured))||[]}),c=e(()=>{var e,t;return(null==(t=null==(e=s.value)?void 0:e.data)?void 0:t.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)))||[]}),u=e(()=>{var e;const t={};return(null==(e=s.value)?void 0:e.data)&&s.value.data.forEach(e=>{var a;const s=(null==(a=e.category)?void 0:a.name)||"Autres";t[s]||(t[s]=[]),t[s].push(e)}),t});return{videos:s,featuredVideos:o,latestVideos:c,videosByCategory:u,error:i,loading:l,execute:r,refresh:n}}({limit:4,sort_by:"created_at",sort_order:"desc"}),E=e(()=>{var e,t;return(null==(t=null==(e=m.value)?void 0:e.data)?void 0:t.slice(0,4))||[]}),S=e(()=>{var e,t;return(null==(t=null==(e=f.value)?void 0:e.data)?void 0:t.slice(0,4))||[]}),I=e(()=>{var e,t;return(null==(t=null==(e=b.value)?void 0:e.data)?void 0:t.slice(0,4))||[]}),$=e(()=>{var e,t;return(null==(t=null==(e=D.value)?void 0:e.data)?void 0:t.slice(0,4))||[]}),{onRefresh:j}=V(),M=e=>{const{type:t,id:a,liked:s,count:i}=e.detail;if("recipe"===t){const e=E.value.find(e=>e.id==a);e&&(e.is_liked=s,e.likes_count=i)}else if("tip"===t){const e=S.value.find(e=>e.id==a);e&&(e.is_liked=s,e.likes_count=i)}},B=e=>{const{type:t}=e.detail;switch(console.log(`🔄 [Home] Rafraîchissement détecté pour: ${t}`),t){case"recipes":console.log("🔄 [Home] Rechargement des recettes..."),m.value=null;break;case"tips":console.log("🔄 [Home] Rechargement des tips..."),f.value=null;break;case"events":console.log("🔄 [Home] Rechargement des événements..."),b.value=null;break;case"dinor_tv":console.log("🔄 [Home] Rechargement des vidéos..."),D.value=null}};let x=null;a(()=>{window.addEventListener("like-updated",M),x=j(B,{global:!0})}),s(()=>{window.removeEventListener("like-updated",M),x&&x()});const z=e(()=>{var e,t,a,s,i,l,r,n;return{recipes:(null==(t=null==(e=m.value)?void 0:e.meta)?void 0:t.total)||E.value.length,tips:(null==(s=null==(a=f.value)?void 0:a.meta)?void 0:s.total)||S.value.length,events:(null==(l=null==(i=b.value)?void 0:i.meta)?void 0:l.total)||I.value.length,videos:(null==(n=null==(r=D.value)?void 0:r.meta)?void 0:n.total)||$.value.length}});return{banners:c,loadingBanners:u,errorBanners:d,latestRecipes:E,latestTips:S,latestEvents:I,latestVideos:$,stats:z,loadingRecipes:h,loadingTips:k,loadingEvents:A,loadingVideos:T,errorRecipes:p,errorTips:y,errorEvents:C,errorVideos:R,handleRecipeClick:e=>{t.push(`/recipe/${e.id}`)},handleTipClick:e=>{t.push(`/tip/${e.id}`)},handleEventClick:e=>{t.push(`/event/${e.id}`)},handleVideoClick:e=>{t.push(`/video/${e.id}`)},handleCacheRefresh:e=>{console.log("Cache actualisé:",e),e.success&&setTimeout(()=>{window.location.reload()},1e3)},handleCacheError:e=>{console.error("Erreur lors de l'actualisation du cache:",e)},getShortDescription:e=>{if(!e)return"";const t=e.replace(/<[^>]*>/g,"");return t.length>80?t.substring(0,80)+"...":t},getDifficultyLabel:e=>({beginner:"Débutant",intermediate:"Intermédiaire",advanced:"Avancé",easy:"Facile",medium:"Moyen",hard:"Difficile"}[e]||e),getPreparationTime:e=>e.preparation_time||0,getTotalTime:e=>(e.preparation_time||0)+(e.cooking_time||0)+(e.resting_time||0),getStatusClass:e=>`status-${e}`,getStatusLabel:e=>({active:"Actif",upcoming:"À venir",completed:"Terminé",cancelled:"Annulé"}[e]||e),formatDate:e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"short"}):"",getVideoThumbnail:e=>{if(!e)return"/images/default-video.jpg";const t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return t?`https://img.youtube.com/vi/${t[1]}/maxresdefault.jpg`:"/images/default-video.jpg"},formatDuration:e=>{if(!e)return"";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`},getContrastColor:e=>(.299*parseInt(e.slice(1,3),16)+.587*parseInt(e.slice(3,5),16)+.114*parseInt(e.slice(5,7),16))/255>.5?"#000000":"#FFFFFF",showAuthModal:i,authModalMessage:l,handleAuthError:r,closeAuthModal:n,handleAuthSuccess:o}}},[["render",function(e,t,a,s,i,m){const p=d("BannerSection"),f=d("CacheRefreshButton"),g=d("LikeButton"),_=d("ContentCarousel"),b=d("AuthModal");return y(),l("div",re,[r("div",ne,[n(p,{type:"home",section:"hero",banners:s.banners},null,8,["banners"]),r("div",oe,[n(f,{variant:"full",size:"medium",onRefresh:s.handleCacheRefresh,onError:s.handleCacheError},null,8,["onRefresh","onError"])]),n(_,{title:"Dernières Recettes",items:s.latestRecipes,loading:s.loadingRecipes,error:s.errorRecipes,"content-type":"recipes","view-all-link":"/recipes",onItemClick:s.handleRecipeClick},{item:c(({item:e})=>[r("div",ce,[r("div",ue,[r("img",{src:e.featured_image_url||"/images/default-recipe.jpg",alt:e.title,loading:"lazy"},null,8,de),r("div",ve,[s.getPreparationTime(e)?(y(),l("span",me,o(s.getPreparationTime(e))+"min ",1)):v("",!0),e.difficulty?(y(),l("span",pe,o(s.getDifficultyLabel(e.difficulty)),1)):v("",!0)])]),r("div",he,[r("h3",null,o(e.title),1),r("p",null,o(s.getShortDescription(e.short_description)),1),r("div",fe,[r("span",ge,[n(g,{type:"recipe","item-id":e.id,"initial-liked":e.is_liked||!1,"initial-count":e.likes_count||0,"show-count":!0,size:"small",variant:"minimal",onAuthRequired:s.handleAuthError,onClick:t[0]||(t[0]=k(()=>{},["stop"]))},null,8,["item-id","initial-liked","initial-count","onAuthRequired"])]),r("span",ye,o(s.formatDate(e.created_at)),1)])])])]),_:1},8,["items","loading","error","onItemClick"]),n(_,{title:"Dernières Astuces",items:s.latestTips,loading:s.loadingTips,error:s.errorTips,"content-type":"tips","view-all-link":"/tips",onItemClick:s.handleTipClick},{item:c(({item:e})=>[r("div",ke,[t[2]||(t[2]=r("div",{class:"tip-icon"},[r("i",{class:"material-icons"},"lightbulb"),r("span",{class:"emoji-fallback"},"💡")],-1)),r("div",_e,[r("h3",null,o(e.title),1),r("p",null,o(s.getShortDescription(e.content)),1),r("div",be,[e.estimated_time?(y(),l("span",we,o(e.estimated_time)+"min ",1)):v("",!0),r("span",Ce,o(s.getDifficultyLabel(e.difficulty_level)),1),r("span",Ae,o(s.formatDate(e.created_at)),1)])])])]),_:1},8,["items","loading","error","onItemClick"]),n(_,{title:"Derniers Événements",items:s.latestEvents,loading:s.loadingEvents,error:s.errorEvents,"content-type":"events","view-all-link":"/events",onItemClick:s.handleEventClick},{item:c(({item:e})=>[r("div",De,[r("div",Re,[r("img",{src:e.featured_image_url||"/images/default-event.jpg",alt:e.title,loading:"lazy"},null,8,Te),r("div",Ee,[r("span",{class:h([s.getStatusClass(e.status),"status-badge"])},o(s.getStatusLabel(e.status)),3)])]),r("div",Se,[r("h3",null,o(e.title),1),r("p",null,o(s.getShortDescription(e.short_description)),1),r("div",Ie,[r("span",Le,[t[3]||(t[3]=r("i",{class:"material-icons"},"event",-1)),t[4]||(t[4]=r("span",{class:"emoji-fallback"},"📅",-1)),u(" "+o(s.formatDate(e.start_date)),1)]),r("span",Ve,o(s.formatDate(e.created_at)),1)])])])]),_:1},8,["items","loading","error","onItemClick"]),n(_,{title:"Dernières Vidéos Dinor TV",items:s.latestVideos,loading:s.loadingVideos,error:s.errorVideos,"content-type":"videos","view-all-link":"/dinor-tv",onItemClick:s.handleVideoClick,class:"dinor-tv-section"},{item:c(({item:e})=>[r("div",$e,[r("div",je,[r("img",{src:e.thumbnail_url||s.getVideoThumbnail(e.video_url),alt:e.title,loading:"lazy"},null,8,Me),r("div",Be,[t[6]||(t[6]=r("div",{class:"play-button"},[r("i",{class:"material-icons"},"play_circle"),r("span",{class:"emoji-fallback"},"▶️")],-1)),e.is_live?(y(),l("div",xe,t[5]||(t[5]=[r("span",{class:"live-dot"},null,-1),u(" LIVE ")]))):v("",!0),e.duration?(y(),l("div",ze,o(s.formatDuration(e.duration)),1)):v("",!0)])]),r("div",Fe,[r("h3",null,o(e.title),1),r("p",null,o(s.getShortDescription(e.description)),1),r("div",He,[r("span",Pe,[t[7]||(t[7]=r("i",{class:"material-icons"},"visibility",-1)),t[8]||(t[8]=r("span",{class:"emoji-fallback"},"👁️",-1)),u(" "+o(e.views_count||0),1)]),r("span",qe,o(s.formatDate(e.created_at)),1)])])])]),_:1},8,["items","loading","error","onItemClick"])]),n(b,{modelValue:s.showAuthModal,"onUpdate:modelValue":[t[1]||(t[1]=e=>s.showAuthModal=e),s.closeAuthModal],"initial-message":s.authModalMessage,onAuthenticated:s.handleAuthSuccess},null,8,["modelValue","initial-message","onUpdate:modelValue","onAuthenticated"])])}],["__scopeId","data-v-48f9abfc"]]);export{We as default};
