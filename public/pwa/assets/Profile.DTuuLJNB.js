import{e,v as s,f as a,g as t,t as o,F as n,m as r,n as i,z as l,y as c,p as d,l as u,B as m,D as v,J as p,K as f,r as g,b as y,w as b,h,k,o as _}from"./vendor.CgTKjNNK.js";import{_ as P,A as w,u as F,a as C}from"./index.DfjICG2s.js";const S={class:"profile"},T={key:0,class:"loading-state"},A={key:1,class:"auth-required"},D={key:2,class:"profile-content"},E={class:"user-info-section"},j={class:"user-details"},M={class:"user-name"},z={class:"user-email"},x={key:0,class:"member-since"},q={class:"profile-navigation"},V=["onClick"],R={class:"material-icons"},I={class:"profile-sections"},L={key:0,class:"section-content"},U={class:"section-header"},N={class:"filter-tabs"},$=["onClick"],O={class:"material-icons"},G={key:0,class:"favorites-list"},J=["onClick"],B={class:"favorite-image"},K=["src","alt"],X={class:"favorite-type-badge"},H={class:"material-icons"},Q={class:"favorite-info"},W={class:"favorite-title"},Y={class:"favorite-description"},Z={class:"favorite-meta"},ee={class:"favorite-date"},se={class:"favorite-stats"},ae={class:"stat"},te={class:"stat"},oe=["onClick"],ne={key:1,class:"empty-favorites"},re={key:1,class:"section-content"},ie={key:0,class:"loading-container"},le={key:1,class:"predictions-section"},ce={class:"sub-tabs"},de=["onClick"],ue={class:"material-icons"},me={key:0,class:"tab-content"},ve={class:"predictions-header"},pe={class:"predictions-stats"},fe={class:"stat-item"},ge={class:"stat-value"},ye={class:"stat-item"},be={class:"stat-value"},he={class:"stat-item"},ke={class:"stat-value"},_e={key:0,class:"predictions-list"},Pe={class:"prediction-match"},we={class:"teams"},Fe={class:"team"},Ce={class:"team"},Se={class:"match-date"},Te={class:"prediction-details"},Ae={class:"predicted-score"},De={key:0,class:"actual-score"},Ee={class:"prediction-status"},je={key:1,class:"pending"},Me={key:1,class:"recent-predictions"},ze={class:"predictions-list"},xe={class:"prediction-match"},qe={class:"teams"},Ve={class:"team"},Re={class:"team"},Ie={class:"match-date"},Le={class:"prediction-details"},Ue={class:"predicted-score"},Ne={class:"prediction-status"},$e={key:0,class:"points-earned"},Oe={key:1,class:"pending"},Ge={key:2,class:"no-predictions"},Je={key:1,class:"tab-content"},Be={class:"global-ranking"},Ke={class:"ranking-card global"},Xe={class:"ranking-info"},He={class:"ranking-stats"},Qe={class:"stat-item"},We={class:"stat-value"},Ye={class:"stat-item"},Ze={class:"stat-value"},es={class:"stat-item"},ss={class:"stat-value"},as={key:0,class:"tournaments-ranking"},ts={class:"tournaments-list"},os={class:"tournament-header"},ns={class:"tournament-name"},rs={class:"tournament-ranking"},is={class:"tournament-stats"},ls={class:"stat-item"},cs={class:"stat-value"},ds={class:"stat-item"},us={class:"stat-value"},ms={class:"stat-item"},vs={class:"stat-value"},ps={key:1,class:"no-tournaments-ranking"},fs={key:2,class:"tab-content"},gs={key:0,class:"active-tournaments-list"},ys=["onClick"],bs={class:"tournament-info"},hs={class:"tournament-name"},ks={key:0,class:"tournament-description"},_s={class:"tournament-meta"},Ps={key:0,class:"participants-count"},ws={class:"tournament-actions"},Fs={key:0,class:"tournament-prize"},Cs=["onClick"],Ss=["onClick"],Ts={key:3,class:"tournament-status-text"},As={key:1,class:"no-active-tournaments"},Ds={class:"suggestions"},Es={key:2,class:"error-state"},js={key:2,class:"section-content"},Ms={class:"form-section"},zs={class:"form-field"},xs={class:"form-actions"},qs=["disabled"],Vs={key:0},Rs={key:1},Is={key:3,class:"section-content"},Ls={class:"form-section"},Us={class:"form-field"},Ns={class:"form-field"},$s={class:"form-field"},Os={class:"form-actions"},Gs=["disabled"],Js={key:0},Bs={key:1},Ks={class:"form-section logout-section"},Xs={key:4,class:"section-content"},Hs={class:"form-section danger-section"},Qs={class:"form-field"},Ws={class:"form-field"},Ys={class:"checkbox-label"},Zs={class:"form-actions"},ea=["disabled"],sa={key:0},aa={key:1};const ta=P({name:"Profile",components:{AuthModal:w},setup(){const e=k(),s=F(),a=C(),t=g(!1),o=g(!1),n=g([]),r=g("all"),i=g("favorites"),l=g(!1),c=g(null),d=g([]),u=g([]),m=g(!1),v=g("my-predictions"),p=g([]),f=g([]),_=g([{key:"my-predictions",label:"Mes prédictions",icon:"sports_soccer"},{key:"my-ranking",label:"Mon classement",icon:"leaderboard"},{key:"active-tournaments",label:"En cours",icon:"emoji_events"}]),P=g({name:"",loading:!1,message:"",success:!1}),w=g({currentPassword:"",newPassword:"",confirmPassword:"",loading:!1,message:"",success:!1}),S=g({reason:"",confirm:!1,loading:!1,message:"",success:!1}),T=g([{key:"favorites",label:"Favoris",icon:"favorite"},{key:"predictions",label:"Pronostics",icon:"sports_soccer"},{key:"account",label:"Compte",icon:"person"},{key:"security",label:"Sécurité",icon:"security"},{key:"legal",label:"Légal",icon:"gavel"}]),A=g([{key:"all",label:"Tout",icon:"apps"},{key:"recipe",label:"Recettes",icon:"restaurant"},{key:"tip",label:"Astuces",icon:"lightbulb"},{key:"event",label:"Événements",icon:"event"},{key:"dinor_tv",label:"Vidéos",icon:"play_circle"}]),D=y(()=>n.value.length),E=y(()=>{const e={};return n.value.forEach(s=>{const a="dinor_tv"===s.type?"videos":`${s.type}s`;e[a]=(e[a]||0)+1}),e}),j=y(()=>"all"===r.value?n.value:n.value.filter(e=>e.type===r.value)),M=async()=>{if(s.isAuthenticated){t.value=!0;try{console.log("🔍 [Profile] Chargement des favoris...");const e=await fetch("/api/test-favorites",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}),s=await e.json();console.log("🔍 [Profile] Réponse API favoris:",s),s.success&&(n.value=s.data,console.log("🔍 [Profile] Favoris chargés:",n.value.length,"éléments"))}catch(e){console.error("❌ [Profile] Erreur lors du chargement des favoris:",e)}finally{t.value=!1}}},z=async()=>{if(s.isAuthenticated){l.value=!0;try{console.log("🏆 [Profile] Chargement des données de pronostics...");const[e,s,t]=await Promise.all([a.get("/leaderboard/my-stats"),a.get("/predictions/my-recent?limit=5"),a.get("/tournaments/my-tournaments")]);e.success&&(c.value=e.data,console.log("🏆 [Profile] Stats utilisateur chargées:",c.value)),s.success&&(d.value=s.data,console.log("🏆 [Profile] Pronostics récents chargés:",d.value.length,"éléments")),t.success&&(u.value=t.data,console.log("🏆 [Profile] Tournois utilisateur chargés:",u.value.length,"éléments"))}catch(e){console.error("❌ [Profile] Erreur lors du chargement des données de pronostics:",e),c.value=null,d.value=[],u.value=[]}finally{l.value=!1}}},x=async()=>{if(s.isAuthenticated)try{const e=await a.get("/predictions");e.success&&(f.value=e.data)}catch(e){console.error("❌ [Profile] Erreur lors du chargement de toutes les prédictions:",e)}},q=async()=>{if(s.isAuthenticated)try{const e=await a.get("/tournaments/featured");e.success&&(p.value=e.data.filter(e=>e.can_predict&&["registration_open","registration_closed","active"].includes(e.status)))}catch(e){console.error("❌ [Profile] Erreur lors du chargement des tournois actifs:",e)}};return b(()=>s.isAuthenticated,e=>{e?(M(),z()):(n.value=[],c.value=null,d.value=[])},{immediate:!0}),b(()=>i.value,e=>{"predictions"===e&&s.isAuthenticated&&!c.value&&z()}),h(()=>{var e,a;s.isAuthenticated&&(M(),z(),P.value.name=(null==(e=s.user)?void 0:e.name)||"",console.log("🔍 [Profile] Données utilisateur:",s.user),console.log("🔍 [Profile] Date création:",null==(a=s.user)?void 0:a.created_at))}),{loading:t,showAuthModal:o,favorites:n,selectedFilter:r,activeSection:i,profileSections:T,filterTabs:A,totalFavorites:D,favoritesStats:E,filteredFavorites:j,authStore:s,usernameForm:P,passwordForm:w,deletionForm:S,predictionsLoading:l,userPredictionsStats:c,recentPredictions:d,loadPredictionsData:z,removeFavorite:async e=>{if(confirm("Êtes-vous sûr de vouloir retirer cet élément de vos favoris ?"))try{(await a.request(`/favorites/${e.id}`,{method:"DELETE"})).success&&(n.value=n.value.filter(s=>s.id!==e.id))}catch(s){console.error("Erreur lors de la suppression du favori:",s),alert("Erreur lors de la suppression du favori")}},goToContent:s=>{const a={recipe:`/recipe/${s.content.id}`,tip:`/tip/${s.content.id}`,event:`/event/${s.content.id}`,dinor_tv:"/dinor-tv"}[s.type];a&&e.push(a)},getTypeIcon:e=>({recipe:"restaurant",tip:"lightbulb",event:"event",dinor_tv:"play_circle"}[e]||"star"),getDefaultImage:e=>({recipe:"/images/default-recipe.jpg",tip:"/images/default-tip.jpg",event:"/images/default-event.jpg",dinor_tv:"/images/default-video.jpg"}[e]||"/images/default-content.jpg"),getShortDescription:e=>{if(!e)return"";const s=e.replace(/<[^>]*>/g,"");return s.length>100?s.substring(0,100)+"...":s},getEmptyMessage:()=>({all:"Aucun favori pour le moment",recipe:"Aucune recette favorite",tip:"Aucune astuce favorite",event:"Aucun événement favori",dinor_tv:"Aucune vidéo favorite"}[r.value]||"Aucun favori"),getEmptyDescription:()=>({all:"Ajoutez du contenu à vos favoris en cliquant sur l'icône cœur",recipe:"Parcourez les recettes et ajoutez vos préférées à vos favoris",tip:"Découvrez des astuces utiles et sauvegardez-les",event:"Trouvez des événements intéressants et ajoutez-les à vos favoris",dinor_tv:"Regardez des vidéos et ajoutez vos préférées à vos favoris"}[r.value]||""),getExploreLink:()=>({all:"/",recipe:"/recipes",tip:"/tips",event:"/events",dinor_tv:"/dinor-tv"}[r.value]||"/"),formatDate:e=>{if(!e)return"";try{const s=new Date(e);return isNaN(s.getTime())?"":s.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})}catch(s){return console.warn("Erreur lors du formatage de la date:",s),""}},formatMemberSince:e=>{if(!e)return"Date inconnue";try{const s=new Date(e);return isNaN(s.getTime())?"Date inconnue":s.toLocaleDateString("fr-FR",{year:"numeric",month:"long"})}catch(s){return console.warn("Erreur lors du formatage de la date membre:",s),"Date inconnue"}},handleImageError:e=>{e.target.src="/images/default-content.jpg"},updateUsername:async()=>{var e,t,o,n,r;P.value.loading=!0,P.value.message="";try{console.log("📝 [Profile] Mise à jour du nom:",{name:P.value.name});const e=await a.put("/profile/name",{name:P.value.name});console.log("✅ [Profile] Réponse mise à jour nom:",e),e.success&&(P.value.success=!0,P.value.message="Nom d'utilisateur mis à jour avec succès",s.user.name=e.data.name,P.value.name="")}catch(i){if(console.error("❌ [Profile] Erreur mise à jour nom:",i),console.error("❌ [Profile] Données d'erreur:",null==(e=i.response)?void 0:e.data),P.value.success=!1,null==(o=null==(t=i.response)?void 0:t.data)?void 0:o.errors){const e=i.response.data.errors;e.name&&e.name.length>0?P.value.message=e.name[0]:P.value.message="Erreur de validation: "+Object.values(e).flat().join(", ")}else P.value.message=(null==(r=null==(n=i.response)?void 0:n.data)?void 0:r.message)||i.message||"Erreur lors de la mise à jour"}finally{P.value.loading=!1}},updatePassword:async()=>{var e,s,t,o,n;if(w.value.newPassword!==w.value.confirmPassword)return w.value.success=!1,void(w.value.message="Les mots de passe ne correspondent pas");w.value.loading=!0,w.value.message="";try{console.log("🔐 [Profile] Mise à jour du mot de passe");const e=await a.put("/profile/password",{current_password:w.value.currentPassword,new_password:w.value.newPassword,new_password_confirmation:w.value.confirmPassword});console.log("✅ [Profile] Réponse mise à jour mdp:",e),e.success&&(w.value.success=!0,w.value.message="Mot de passe mis à jour avec succès",w.value.currentPassword="",w.value.newPassword="",w.value.confirmPassword="")}catch(r){if(console.error("❌ [Profile] Erreur mise à jour mdp:",r),console.error("❌ [Profile] Données d'erreur:",null==(e=r.response)?void 0:e.data),w.value.success=!1,null==(t=null==(s=r.response)?void 0:s.data)?void 0:t.errors){const e=r.response.data.errors;e.current_password&&e.current_password.length>0?w.value.message=e.current_password[0]:e.new_password&&e.new_password.length>0?w.value.message=e.new_password[0]:w.value.message="Erreur de validation: "+Object.values(e).flat().join(", ")}else w.value.message=(null==(n=null==(o=r.response)?void 0:o.data)?void 0:n.message)||r.message||"Erreur lors de la mise à jour"}finally{w.value.loading=!1}},requestDataDeletion:async()=>{var e,s;if(confirm("Êtes-vous absolument sûr de vouloir demander la suppression de toutes vos données ? Cette action est irréversible.")){S.value.loading=!0,S.value.message="";try{const e=await a.request("/profile/request-deletion",{method:"POST",body:{reason:S.value.reason,confirm:S.value.confirm}});e.success&&(S.value.success=!0,S.value.message=e.message,S.value.reason="",S.value.confirm=!1)}catch(t){S.value.success=!1,S.value.message=(null==(s=null==(e=t.response)?void 0:e.data)?void 0:s.message)||"Erreur lors de la demande"}finally{S.value.loading=!1}}},handleLogout:async()=>{if(confirm("Êtes-vous sûr de vouloir vous déconnecter ?")){console.log("👋 [Profile] Déconnexion utilisateur");try{await s.logout(),e.push("/")}catch(a){console.error("❌ [Profile] Erreur lors de la déconnexion:",a)}}},userTournaments:u,tournamentsLoading:m,openTournament:s=>{console.log("🏆 [Profile] Ouverture du tournoi:",s.name),e.push("/predictions/tournaments")},activePredictionsTab:v,predictionsTabs:_,userAllPredictions:f,activeTournaments:p,switchPredictionsTab:e=>{v.value=e,"my-predictions"===e&&0===f.value.length?x():"active-tournaments"===e&&0===p.value.length&&q()},loadAllUserPredictions:x,loadActiveTournaments:q,openTournamentModal:s=>{console.log("🏆 [Profile] Ouverture modale tournoi:",s.name),e.push("/predictions/tournaments")},registerToTournament:async e=>{console.log("🏆 [Profile] Inscription au tournoi:",e.name);try{(await a.post(`/tournaments/${e.id}/register`)).success&&(e.user_is_participant=!0,e.can_register=!1)}catch(s){console.error("❌ [Profile] Erreur inscription tournoi:",s)}},goToPredictions:s=>{console.log("🏆 [Profile] Aller aux prédictions:",s.name),e.push("/predictions")},formatPrize:(e,s="XOF")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:s,minimumFractionDigits:0}).format(e),getRankClass:e=>e?1===e?"rank-gold":2===e?"rank-silver":3===e?"rank-bronze":e<=10?"rank-top10":"":""}}},[["render",function(g,y,b,h,k,P){var w,F;const C=u("router-link"),ta=u("AuthModal");return _(),e("div",S,[h.loading?(_(),e("div",T,y[16]||(y[16]=[a("div",{class:"loading-spinner"},null,-1),a("p",null,"Chargement du profil...",-1)]))):h.authStore.isAuthenticated?(_(),e("div",D,[a("div",E,[y[20]||(y[20]=a("div",{class:"user-avatar"},[a("i",{class:"material-icons"},"person")],-1)),a("div",j,[a("h1",M,o(h.authStore.userName),1),a("p",z,o(null==(w=h.authStore.user)?void 0:w.email),1),(null==(F=h.authStore.user)?void 0:F.created_at)?(_(),e("p",x,"Membre depuis "+o(h.formatMemberSince(h.authStore.user.created_at)),1)):t("",!0)])]),a("div",q,[(_(!0),e(n,null,r(h.profileSections,s=>(_(),e("button",{key:s.key,onClick:e=>h.activeSection=s.key,class:i(["nav-button",{active:h.activeSection===s.key}])},[a("i",R,o(s.icon),1),a("span",null,o(s.label),1)],10,V))),128))]),a("div",I,["favorites"===h.activeSection?(_(),e("div",L,[a("div",U,[y[21]||(y[21]=a("h2",{class:"section-title"},"Mes Favoris",-1)),a("div",N,[(_(!0),e(n,null,r(h.filterTabs,s=>(_(),e("button",{key:s.key,onClick:e=>h.selectedFilter=s.key,class:i(["filter-tab",{active:h.selectedFilter===s.key}])},[a("i",O,o(s.icon),1),a("span",null,o(s.label),1)],10,$))),128))])]),h.filteredFavorites.length?(_(),e("div",G,[(_(!0),e(n,null,r(h.filteredFavorites,s=>(_(),e("div",{key:s.id,onClick:e=>h.goToContent(s),class:"favorite-item"},[a("div",B,[a("img",{src:s.content.image||h.getDefaultImage(s.type),alt:s.content.title,onError:y[1]||(y[1]=(...e)=>h.handleImageError&&h.handleImageError(...e))},null,40,K),a("div",X,[a("i",H,o(h.getTypeIcon(s.type)),1)])]),a("div",Q,[a("h3",W,o(s.content.title),1),a("p",Y,o(h.getShortDescription(s.content.description)),1),a("div",Z,[a("span",ee," Ajouté "+o(h.formatDate(s.favorited_at)),1),a("div",se,[a("span",ae,[y[22]||(y[22]=a("i",{class:"material-icons"},"favorite",-1)),l(" "+o(s.content.likes_count||0),1)]),a("span",te,[y[23]||(y[23]=a("i",{class:"material-icons"},"comment",-1)),l(" "+o(s.content.comments_count||0),1)])])])]),a("button",{onClick:c(e=>h.removeFavorite(s),["stop"]),class:"remove-favorite",title:"Retirer des favoris"},y[24]||(y[24]=[a("i",{class:"material-icons"},"close",-1)]),8,oe)],8,J))),128))])):(_(),e("div",ne,[y[26]||(y[26]=a("div",{class:"empty-icon"},[a("i",{class:"material-icons"},"favorite_border")],-1)),a("h3",null,o(h.getEmptyMessage()),1),a("p",null,o(h.getEmptyDescription()),1),s(C,{to:h.getExploreLink(),class:"btn-secondary"},{default:d(()=>y[25]||(y[25]=[l(" Découvrir du contenu ")])),_:1,__:[25]},8,["to"])]))])):t("",!0),"predictions"===h.activeSection?(_(),e("div",re,[y[61]||(y[61]=a("h2",{class:"section-title"},"Mes Pronostics",-1)),h.predictionsLoading?(_(),e("div",ie,y[27]||(y[27]=[a("div",{class:"md3-circular-progress"},null,-1),a("p",null,"Chargement de vos statistiques...",-1)]))):h.userPredictionsStats?(_(),e("div",le,[a("div",ce,[(_(!0),e(n,null,r(h.predictionsTabs,s=>(_(),e("button",{key:s.key,onClick:e=>h.switchPredictionsTab(s.key),class:i(["sub-tab",{active:h.activePredictionsTab===s.key}])},[a("i",ue,o(s.icon),1),a("span",null,o(s.label),1)],10,de))),128))]),"my-predictions"===h.activePredictionsTab?(_(),e("div",me,[a("div",ve,[y[31]||(y[31]=a("h3",{class:"tab-title"},"Mes prédictions",-1)),a("div",pe,[a("div",fe,[a("span",ge,o(h.userPredictionsStats.total_predictions),1),y[28]||(y[28]=a("span",{class:"stat-label"},"Total",-1))]),a("div",ye,[a("span",be,o(h.userPredictionsStats.total_points),1),y[29]||(y[29]=a("span",{class:"stat-label"},"Points",-1))]),a("div",he,[a("span",ke,o(h.userPredictionsStats.accuracy_percentage)+"%",1),y[30]||(y[30]=a("span",{class:"stat-label"},"Précision",-1))])])]),h.userAllPredictions.length?(_(),e("div",_e,[(_(!0),e(n,null,r(h.userAllPredictions,s=>(_(),e("div",{key:s.id,class:i(["prediction-card",{calculated:s.is_calculated}])},[a("div",Pe,[a("div",we,[a("span",Fe,o(s.football_match.home_team.name),1),y[32]||(y[32]=a("span",{class:"vs"},"vs",-1)),a("span",Ce,o(s.football_match.away_team.name),1)]),a("div",Se,o(h.formatDate(s.football_match.match_date)),1)]),a("div",Te,[a("div",Ae,o(s.predicted_home_score)+" - "+o(s.predicted_away_score),1),s.football_match.is_finished?(_(),e("div",De," Résultat: "+o(s.football_match.home_score)+" - "+o(s.football_match.away_score),1)):t("",!0),a("div",Ee,[s.is_calculated?(_(),e("span",{key:0,class:i(["points-earned",{"points-positive":s.points_earned>0}])},o(s.points_earned)+" point"+o(s.points_earned>1?"s":""),3)):(_(),e("span",je,"En attente"))])])],2))),128))])):h.recentPredictions.length?(_(),e("div",Me,[a("div",ze,[(_(!0),e(n,null,r(h.recentPredictions,s=>(_(),e("div",{key:s.id,class:i(["prediction-card",{calculated:s.is_calculated}])},[a("div",xe,[a("div",qe,[a("span",Ve,o(s.football_match.home_team.name),1),y[33]||(y[33]=a("span",{class:"vs"},"vs",-1)),a("span",Re,o(s.football_match.away_team.name),1)]),a("div",Ie,o(h.formatDate(s.football_match.match_date)),1)]),a("div",Le,[a("div",Ue,o(s.predicted_home_score)+" - "+o(s.predicted_away_score),1),a("div",Ne,[s.is_calculated?(_(),e("span",$e,o(s.points_earned)+" point"+o(s.points_earned>1?"s":""),1)):(_(),e("span",Oe,"En attente"))])])],2))),128))]),a("button",{onClick:y[2]||(y[2]=(...e)=>h.loadAllUserPredictions&&h.loadAllUserPredictions(...e)),class:"btn-secondary load-more-btn"}," Charger toutes mes prédictions ")])):(_(),e("div",Ge,[y[35]||(y[35]=a("div",{class:"empty-icon"},[a("i",{class:"material-icons"},"sports_soccer")],-1)),y[36]||(y[36]=a("h3",null,"Aucun pronostic",-1)),y[37]||(y[37]=a("p",null,"Vous n'avez pas encore fait de pronostic. Commencez dès maintenant!",-1)),s(C,{to:"/predictions",class:"btn-primary"},{default:d(()=>y[34]||(y[34]=[l(" Faire mon premier pronostic ")])),_:1,__:[34]})]))])):t("",!0),"my-ranking"===h.activePredictionsTab?(_(),e("div",Je,[y[52]||(y[52]=a("div",{class:"ranking-header"},[a("h3",{class:"tab-title"},"Mon classement")],-1)),a("div",Be,[y[43]||(y[43]=a("h4",{class:"subsection-title"},"Classement global",-1)),a("div",Ke,[a("div",Xe,[a("div",{class:i(["rank-badge",h.getRankClass(h.userPredictionsStats.current_rank)])},[y[38]||(y[38]=a("i",{class:"material-icons"},"star",-1)),a("span",null,o(h.userPredictionsStats.current_rank?`#${h.userPredictionsStats.current_rank}`:"Non classé"),1)],2),a("div",He,[a("div",Qe,[a("span",We,o(h.userPredictionsStats.total_points),1),y[39]||(y[39]=a("span",{class:"stat-label"},"Points totaux",-1))]),a("div",Ye,[a("span",Ze,o(h.userPredictionsStats.accuracy_percentage)+"%",1),y[40]||(y[40]=a("span",{class:"stat-label"},"Précision",-1))]),a("div",es,[a("span",ss,o(h.userPredictionsStats.correct_scores||0),1),y[41]||(y[41]=a("span",{class:"stat-label"},"Scores exacts",-1))])])]),s(C,{to:"/predictions/leaderboard",class:"view-leaderboard-btn"},{default:d(()=>y[42]||(y[42]=[l(" Voir le classement complet ")])),_:1,__:[42]})])]),h.userTournaments.length?(_(),e("div",as,[y[47]||(y[47]=a("h4",{class:"subsection-title"},"Mes tournois",-1)),a("div",ts,[(_(!0),e(n,null,r(h.userTournaments,s=>(_(),e("div",{key:s.tournament.id,class:"tournament-ranking-card"},[a("div",os,[a("h5",ns,o(s.tournament.name),1),a("span",{class:i(["tournament-status",s.tournament.status])},o(s.tournament.status_label),3)]),a("div",rs,[a("div",{class:i(["rank-badge",h.getRankClass(s.user_rank)])},[a("span",null,o(s.user_rank?`#${s.user_rank}`:"N/A"),1)],2),a("div",is,[a("div",ls,[a("span",cs,o(s.user_points),1),y[44]||(y[44]=a("span",{class:"stat-label"},"Points",-1))]),a("div",ds,[a("span",us,o(s.user_predictions),1),y[45]||(y[45]=a("span",{class:"stat-label"},"Prédictions",-1))]),a("div",ms,[a("span",vs,o(s.user_accuracy)+"%",1),y[46]||(y[46]=a("span",{class:"stat-label"},"Précision",-1))])])])]))),128))])])):(_(),e("div",ps,[y[49]||(y[49]=a("div",{class:"empty-icon"},[a("i",{class:"material-icons"},"emoji_events")],-1)),y[50]||(y[50]=a("h4",null,"Aucun tournoi actif",-1)),y[51]||(y[51]=a("p",null,"Participez à des tournois pour voir votre classement.",-1)),s(C,{to:"/predictions/tournaments",class:"btn-secondary"},{default:d(()=>y[48]||(y[48]=[l(" Découvrir les tournois ")])),_:1,__:[48]})]))])):t("",!0),"active-tournaments"===h.activePredictionsTab?(_(),e("div",fs,[y[57]||(y[57]=a("div",{class:"active-tournaments-header"},[a("h3",{class:"tab-title"},"Tournois en cours"),a("p",{class:"tab-description"},"Tournois où vous pouvez faire des prédictions")],-1)),h.activeTournaments.length?(_(),e("div",gs,[(_(!0),e(n,null,r(h.activeTournaments,s=>(_(),e("div",{key:s.id,class:"active-tournament-card",onClick:e=>h.openTournamentModal(s)},[a("div",bs,[a("h4",hs,o(s.name),1),s.description?(_(),e("p",ks,o(s.description),1)):t("",!0),a("div",_s,[a("span",{class:i(["tournament-status",s.status])},o(s.status_label),3),s.participants_count?(_(),e("span",Ps,o(s.participants_count)+" participant"+o(s.participants_count>1?"s":""),1)):t("",!0)])]),a("div",ws,[s.prize_pool?(_(),e("div",Fs,o(h.formatPrize(s.prize_pool,s.currency)),1)):t("",!0),s.can_register&&!s.user_is_participant?(_(),e("button",{key:1,onClick:c(e=>h.registerToTournament(s),["stop"]),class:"btn-primary tournament-action-btn"}," S'inscrire ",8,Cs)):s.user_is_participant&&s.can_predict?(_(),e("button",{key:2,onClick:c(e=>h.goToPredictions(s),["stop"]),class:"btn-secondary tournament-action-btn"}," Prédire ",8,Ss)):(_(),e("span",Ts,o(s.user_is_participant?"Inscrit":"Complet"),1))])],8,ys))),128))])):(_(),e("div",As,[y[54]||(y[54]=a("div",{class:"empty-icon"},[a("i",{class:"material-icons"},"schedule")],-1)),y[55]||(y[55]=a("h4",null,"Aucun tournoi ouvert",-1)),y[56]||(y[56]=a("p",null,"Il n'y a pas de tournoi ouvert aux prédictions pour le moment. Revenez bientôt!",-1)),a("div",Ds,[s(C,{to:"/predictions",class:"btn-secondary"},{default:d(()=>y[53]||(y[53]=[l(" Faire des prédictions ")])),_:1,__:[53]}),a("button",{onClick:y[3]||(y[3]=(...e)=>h.loadActiveTournaments&&h.loadActiveTournaments(...e)),class:"btn-outline"}," Actualiser ")])]))])):t("",!0)])):(_(),e("div",Es,[y[58]||(y[58]=a("div",{class:"error-icon"},[a("i",{class:"material-icons"},"error_outline")],-1)),y[59]||(y[59]=a("h3",null,"Erreur de chargement",-1)),y[60]||(y[60]=a("p",null,"Impossible de charger vos statistiques de pronostics.",-1)),a("button",{onClick:y[4]||(y[4]=(...e)=>h.loadPredictionsData&&h.loadPredictionsData(...e)),class:"btn-secondary"}," Réessayer ")]))])):t("",!0),"account"===h.activeSection?(_(),e("div",js,[y[64]||(y[64]=a("h2",{class:"section-title"},"Mon Compte",-1)),a("div",Ms,[y[63]||(y[63]=a("h3",{class:"form-title"},"Nom d'utilisateur",-1)),a("form",{onSubmit:y[6]||(y[6]=c((...e)=>h.updateUsername&&h.updateUsername(...e),["prevent"])),class:"update-form"},[a("div",zs,[y[62]||(y[62]=a("label",{class:"form-label"},"Nouveau nom d'utilisateur",-1)),m(a("input",{"onUpdate:modelValue":y[5]||(y[5]=e=>h.usernameForm.name=e),type:"text",class:"form-input",placeholder:"Votre nom d'utilisateur",required:"",minlength:"2",maxlength:"255"},null,512),[[v,h.usernameForm.name]])]),a("div",xs,[a("button",{type:"submit",class:"btn-primary",disabled:h.usernameForm.loading},[h.usernameForm.loading?(_(),e("span",Vs,"Mise à jour...")):(_(),e("span",Rs,"Mettre à jour"))],8,qs)]),h.usernameForm.message?(_(),e("div",{key:0,class:i(["form-message",h.usernameForm.success?"success":"error"])},o(h.usernameForm.message),3)):t("",!0)],32)])])):t("",!0),"security"===h.activeSection?(_(),e("div",Is,[y[73]||(y[73]=a("h2",{class:"section-title"},"Sécurité",-1)),a("div",Ls,[y[69]||(y[69]=a("h3",{class:"form-title"},"Changer le mot de passe",-1)),a("form",{onSubmit:y[10]||(y[10]=c((...e)=>h.updatePassword&&h.updatePassword(...e),["prevent"])),class:"update-form"},[a("div",Us,[y[65]||(y[65]=a("label",{class:"form-label"},"Mot de passe actuel",-1)),m(a("input",{"onUpdate:modelValue":y[7]||(y[7]=e=>h.passwordForm.currentPassword=e),type:"password",class:"form-input",placeholder:"Votre mot de passe actuel",required:""},null,512),[[v,h.passwordForm.currentPassword]])]),a("div",Ns,[y[66]||(y[66]=a("label",{class:"form-label"},"Nouveau mot de passe",-1)),m(a("input",{"onUpdate:modelValue":y[8]||(y[8]=e=>h.passwordForm.newPassword=e),type:"password",class:"form-input",placeholder:"Votre nouveau mot de passe",required:"",minlength:"8"},null,512),[[v,h.passwordForm.newPassword]]),y[67]||(y[67]=a("small",{class:"form-hint"},"Au moins 8 caractères avec lettres et chiffres",-1))]),a("div",$s,[y[68]||(y[68]=a("label",{class:"form-label"},"Confirmer le nouveau mot de passe",-1)),m(a("input",{"onUpdate:modelValue":y[9]||(y[9]=e=>h.passwordForm.confirmPassword=e),type:"password",class:"form-input",placeholder:"Confirmer votre nouveau mot de passe",required:"",minlength:"8"},null,512),[[v,h.passwordForm.confirmPassword]])]),a("div",Os,[a("button",{type:"submit",class:"btn-primary",disabled:h.passwordForm.loading},[h.passwordForm.loading?(_(),e("span",Js,"Mise à jour...")):(_(),e("span",Bs,"Changer le mot de passe"))],8,Gs)]),h.passwordForm.message?(_(),e("div",{key:0,class:i(["form-message",h.passwordForm.success?"success":"error"])},o(h.passwordForm.message),3)):t("",!0)],32)]),a("div",Ks,[y[71]||(y[71]=a("h3",{class:"form-title"},"Déconnexion",-1)),y[72]||(y[72]=a("p",{class:"form-description"}," Vous serez déconnecté de votre compte sur cet appareil. Vos données seront conservées. ",-1)),a("button",{onClick:y[11]||(y[11]=(...e)=>h.handleLogout&&h.handleLogout(...e)),class:"btn-logout-main"},y[70]||(y[70]=[a("i",{class:"material-icons"},"logout",-1),a("span",null,"Se déconnecter",-1)]))])])):t("",!0),"legal"===h.activeSection?(_(),e("div",Xs,[y[78]||(y[78]=p('<h2 class="section-title" data-v-1f17b50e>Légal &amp; Confidentialité</h2><div class="legal-section" data-v-1f17b50e><h3 class="form-title" data-v-1f17b50e>Conditions d&#39;utilisation</h3><div class="legal-links" data-v-1f17b50e><a href="/terms" class="legal-link" data-v-1f17b50e><i class="material-icons" data-v-1f17b50e>description</i><span data-v-1f17b50e>Conditions générales d&#39;utilisation</span><i class="material-icons" data-v-1f17b50e>arrow_forward_ios</i></a><a href="/privacy" class="legal-link" data-v-1f17b50e><i class="material-icons" data-v-1f17b50e>privacy_tip</i><span data-v-1f17b50e>Politique de confidentialité</span><i class="material-icons" data-v-1f17b50e>arrow_forward_ios</i></a><a href="/cookies" class="legal-link" data-v-1f17b50e><i class="material-icons" data-v-1f17b50e>cookie</i><span data-v-1f17b50e>Politique des cookies</span><i class="material-icons" data-v-1f17b50e>arrow_forward_ios</i></a></div></div>',2)),a("div",Hs,[y[76]||(y[76]=a("h3",{class:"form-title danger-title"},"Suppression des données",-1)),y[77]||(y[77]=a("p",{class:"danger-description"}," Vous pouvez demander la suppression de toutes vos données personnelles conformément au RGPD. Cette action est irréversible. ",-1)),a("form",{onSubmit:y[14]||(y[14]=c((...e)=>h.requestDataDeletion&&h.requestDataDeletion(...e),["prevent"])),class:"update-form"},[a("div",Qs,[y[74]||(y[74]=a("label",{class:"form-label"},"Raison de la suppression (optionnel)",-1)),m(a("textarea",{"onUpdate:modelValue":y[12]||(y[12]=e=>h.deletionForm.reason=e),class:"form-textarea",placeholder:"Expliquez pourquoi vous souhaitez supprimer vos données...",rows:"3",maxlength:"500"},null,512),[[v,h.deletionForm.reason]])]),a("div",Ws,[a("label",Ys,[m(a("input",{"onUpdate:modelValue":y[13]||(y[13]=e=>h.deletionForm.confirm=e),type:"checkbox",required:""},null,512),[[f,h.deletionForm.confirm]]),y[75]||(y[75]=l(" Je confirme vouloir supprimer définitivement toutes mes données "))])]),a("div",Zs,[a("button",{type:"submit",class:"btn-danger",disabled:h.deletionForm.loading||!h.deletionForm.confirm},[h.deletionForm.loading?(_(),e("span",sa,"Demande en cours...")):(_(),e("span",aa,"Demander la suppression"))],8,ea)]),h.deletionForm.message?(_(),e("div",{key:0,class:i(["form-message",h.deletionForm.success?"success":"error"])},o(h.deletionForm.message),3)):t("",!0)],32)])])):t("",!0)])])):(_(),e("div",A,[y[17]||(y[17]=a("div",{class:"auth-icon"},[a("i",{class:"material-icons"},"person")],-1)),y[18]||(y[18]=a("h2",{class:"md3-title-large"},"Profil utilisateur",-1)),y[19]||(y[19]=a("p",{class:"md3-body-large"},"Connectez-vous pour voir votre profil et vos favoris",-1)),a("button",{onClick:y[0]||(y[0]=e=>h.showAuthModal=!0),class:"btn-primary"}," Se connecter ")])),s(ta,{modelValue:h.showAuthModal,"onUpdate:modelValue":y[15]||(y[15]=e=>h.showAuthModal=e)},null,8,["modelValue"])])}],["__scopeId","data-v-1f17b50e"]]);export{ta as default};
