import{h as e,k as s,i as t,l as a,j as i,t as n,F as o,E as r,q as l,A as c,z as d,x as u,e as m,G as p,B as v,D as g,M as f,r as h,b as y,w as b,g as _,p as k,o as P}from"./vendor.Bvrl98ec.js";import{_ as w,D as S,A as z,d as F,u as T}from"./index.Bsia8KuI.js";const C={class:"profile"},D={key:0,class:"loading-state"},A={key:1,class:"auth-required"},E={class:"auth-icon"},j={key:2,class:"profile-content"},M={class:"user-info-section"},I={class:"user-avatar"},x={class:"user-details"},R={class:"user-name"},V={class:"user-email"},q={key:0,class:"member-since"},L={class:"profile-navigation"},N=["onClick"],U={class:"profile-sections"},O={key:0,class:"section-content"},$={class:"section-header"},B={class:"filter-tabs"},J=["onClick"],G={key:0,class:"favorites-list"},H=["onClick"],X={class:"favorite-image"},K=["src","alt"],Q={class:"favorite-type-badge"},W={class:"favorite-info"},Y={class:"favorite-title"},Z={class:"favorite-description"},ee={class:"favorite-meta"},se={class:"favorite-date"},te={class:"favorite-stats"},ae={class:"stat"},ie={class:"stat"},ne=["onClick"],oe={key:1,class:"empty-favorites"},re={class:"empty-icon"},le={key:1,class:"section-content"},ce={key:0,class:"loading-container"},de={key:1,class:"predictions-dashboard"},ue={class:"predictions-overview"},me={class:"stats-grid"},pe={class:"stat-card total-predictions"},ve={class:"stat-icon"},ge={class:"stat-content"},fe={class:"stat-value"},he={class:"stat-card total-points"},ye={class:"stat-icon"},be={class:"stat-content"},_e={class:"stat-value"},ke={class:"stat-card accuracy"},Pe={class:"stat-icon"},we={class:"stat-content"},Se={class:"stat-value"},ze={key:0,class:"stat-card ranking"},Fe={class:"stat-icon"},Te={class:"stat-content"},Ce={class:"stat-value"},De={class:"quick-actions"},Ae={class:"sub-tabs"},Ee=["onClick"],je={key:0,class:"tab-content"},Me={key:0,class:"predictions-stats-overview"},Ie={class:"stats-grid"},xe={class:"stat-card"},Re={class:"stat-icon"},Ve={class:"stat-info"},qe={class:"stat-value"},Le={class:"stat-card"},Ne={class:"stat-icon accuracy"},Ue={class:"stat-info"},Oe={class:"stat-value"},$e={class:"stat-card"},Be={class:"stat-icon points"},Je={class:"stat-info"},Ge={class:"stat-value"},He={key:0,class:"stat-card"},Xe={class:"stat-icon ranking"},Ke={class:"stat-info"},Qe={class:"stat-value"},We={key:1,class:"recent-predictions-preview"},Ye={class:"section-header-with-action"},Ze={class:"subsection-title"},es={class:"predictions-filter-mini"},ss={class:"predictions-list compact"},ts={class:"prediction-status-indicator"},as={class:"prediction-match"},is={class:"teams"},ns={class:"team"},os={class:"team"},rs={class:"match-info"},ls={class:"predicted-score"},cs={key:1,class:"pending"},ds={class:"prediction-date"},us={key:2,class:"all-predictions"},ms={class:"predictions-header"},ps={class:"subsection-title"},vs={class:"predictions-filters"},gs={class:"filter-chips"},fs={class:"predictions-list grouped"},hs={class:"group-header"},ys={class:"group-date"},bs={class:"group-count"},_s={class:"group-predictions"},ks={class:"prediction-status-indicator"},Ps={class:"prediction-match"},ws={class:"teams"},Ss={class:"team"},zs={class:"team"},Fs={class:"match-date"},Ts={class:"prediction-details"},Cs={class:"prediction-scores"},Ds={class:"predicted"},As={class:"score highlight"},Es={key:0,class:"actual"},js={class:"score"},Ms={class:"prediction-result"},Is={key:1,class:"pending"},xs={key:3,class:"empty-predictions"},Rs={class:"empty-illustration"},Vs={class:"empty-icon"},qs={class:"empty-actions"},Ls={key:1,class:"tab-content"},Ns={class:"ranking-section"},Us={class:"subsection-title"},Os={key:0,class:"my-rank-card enhanced"},$s={class:"rank-number"},Bs={class:"rank-info"},Js={class:"rank-stats"},Gs={class:"stat-item"},Hs={class:"stat-item"},Xs={key:1,class:"progress-card"},Ks={class:"progress-info"},Qs={class:"progress-bar"},Ws={class:"ranking-actions"},Ys={key:2,class:"tab-content"},Zs={class:"tournaments-section"},et={key:0,class:"tournaments-list"},st={class:"tournament-header"},tt={class:"tournament-info"},at={key:0,class:"prize"},it={class:"participants"},nt={class:"tournament-actions"},ot=["onClick","disabled"],rt=["onClick"],lt={key:1,class:"empty-tournaments"},ct={class:"empty-icon"},dt={key:2,class:"error-state"},ut={class:"error-icon"},mt={key:2,class:"section-content"},pt={class:"form-section"},vt={class:"form-field"},gt={class:"form-actions"},ft=["disabled"],ht={key:0},yt={key:1},bt={key:3,class:"section-content"},_t={class:"form-section"},kt={class:"form-field"},Pt={class:"form-field"},wt={class:"form-field"},St={class:"form-actions"},zt=["disabled"],Ft={key:0},Tt={key:1},Ct={class:"form-section logout-section"},Dt={key:4,class:"section-content"},At={class:"legal-section"},Et={class:"legal-links"},jt={href:"/terms",class:"legal-link"},Mt={href:"/privacy",class:"legal-link"},It={href:"/cookies",class:"legal-link"},xt={class:"form-section danger-section"},Rt={class:"form-field"},Vt={class:"form-field"},qt={class:"checkbox-label"},Lt={class:"form-actions"},Nt=["disabled"],Ut={key:0},Ot={key:1};const $t=w({name:"Profile",components:{AuthModal:z,DinorIcon:S},setup(){const e=k(),s=F(),t=T();if(!s)return console.error("‚ùå [Profile] AuthStore non initialis√©"),{};const a=h(!1),i=h(!1),n=h([]),o=h("all"),r=h("favorites"),l=h(!1),c=h(null),d=h([]),u=h([]);h(!1);const m=h("my-predictions"),p=h([]),v=h([]),g=h("all"),f=h("all"),P=h([{key:"my-predictions",label:"Mes pr√©dictions",icon:"sports_soccer"},{key:"my-ranking",label:"Mon classement",icon:"leaderboard"},{key:"active-tournaments",label:"Tournois actifs",icon:"emoji_events"}]),w=h({name:"",loading:!1,message:"",success:!1}),S=h({currentPassword:"",newPassword:"",confirmPassword:"",loading:!1,message:"",success:!1}),z=h({reason:"",confirm:!1,loading:!1,message:"",success:!1}),C=h([{key:"favorites",label:"Favoris",icon:"favorite"},{key:"predictions",label:"Pronostics",icon:"sports_soccer"},{key:"account",label:"Compte",icon:"person"},{key:"security",label:"S√©curit√©",icon:"security"},{key:"legal",label:"L√©gal",icon:"gavel"}]),D=h([{key:"all",label:"Tout",icon:"apps"},{key:"recipe",label:"Recettes",icon:"restaurant"},{key:"tip",label:"Astuces",icon:"lightbulb"},{key:"event",label:"√âv√©nements",icon:"event"},{key:"dinor_tv",label:"Vid√©os",icon:"play_circle"}]),A=y(()=>n.value.length),E=y(()=>{const e={};return n.value.forEach(s=>{const t="dinor_tv"===s.type?"videos":`${s.type}s`;e[t]=(e[t]||0)+1}),e}),j=y(()=>"all"===o.value?n.value:n.value.filter(e=>e.type===o.value)),M=async()=>{if(null==s?void 0:s.isAuthenticated){a.value=!0;try{console.log("üîç [Profile] Chargement des favoris...");const e=await fetch("/api/test-favorites",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}),s=await e.json();console.log("üîç [Profile] R√©ponse API favoris:",s),s.success&&(n.value=s.data,console.log("üîç [Profile] Favoris charg√©s:",n.value.length,"√©l√©ments"))}catch(e){console.error("‚ùå [Profile] Erreur lors du chargement des favoris:",e)}finally{a.value=!1}}},I=async()=>{var e;if(null==s?void 0:s.isAuthenticated){l.value=!0;try{console.log("üèÜ [Profile] Chargement des donn√©es de pronostics...");const i=`dinor_predictions_${null==(e=s.user)?void 0:e.id}`,n=localStorage.getItem(i);if(n)try{const e=JSON.parse(n);if(Date.now()-e.timestamp<3e5)return c.value=e.stats,d.value=e.recent,u.value=e.tournaments,l.value=!1,void console.log("üèÜ [Profile] Donn√©es charg√©es depuis le cache")}catch(a){localStorage.removeItem(i)}const[o,r,m]=await Promise.all([t.get("/leaderboard/my-stats"),t.get("/predictions/my-recent?limit=5"),t.get("/tournaments/my-tournaments")]);o.success&&(c.value=o.data,console.log("üèÜ [Profile] Stats utilisateur charg√©es:",c.value)),r.success&&(d.value=r.data,console.log("üèÜ [Profile] Pronostics r√©cents charg√©s:",d.value.length,"√©l√©ments")),m.success&&(u.value=m.data,console.log("üèÜ [Profile] Tournois utilisateur charg√©s:",u.value.length,"√©l√©ments"));const p={timestamp:Date.now(),stats:c.value,recent:d.value,tournaments:u.value};localStorage.setItem(i,JSON.stringify(p))}catch(i){console.error("‚ùå [Profile] Erreur lors du chargement des donn√©es de pronostics:",i),c.value=null,d.value=[],u.value=[]}finally{l.value=!1}}},x=async()=>{var e;if((null==s?void 0:s.isAuthenticated)&&!(v.value.length>0))try{const i=`dinor_all_predictions_${null==(e=s.user)?void 0:e.id}`,n=localStorage.getItem(i);if(n)try{const e=JSON.parse(n);if(Date.now()-e.timestamp<6e5)return v.value=e.data,void console.log("üèÜ [Profile] Toutes les pr√©dictions charg√©es depuis le cache")}catch(a){localStorage.removeItem(i)}const o=await t.get("/predictions");if(o.success){v.value=o.data;const e={timestamp:Date.now(),data:o.data};localStorage.setItem(i,JSON.stringify(e))}}catch(i){console.error("‚ùå [Profile] Erreur lors du chargement de toutes les pr√©dictions:",i)}},R=async()=>{if(null==s?void 0:s.isAuthenticated)try{const e=await t.get("/tournaments/featured");e.success&&(p.value=e.data.filter(e=>e.can_predict&&["registration_open","registration_closed","active"].includes(e.status)))}catch(e){console.error("‚ùå [Profile] Erreur lors du chargement des tournois actifs:",e)}},V=e=>{m.value=e,"my-predictions"===e&&0===v.value.length?x():"active-tournaments"===e&&0===p.value.length&&R()},q=e=>{if(!e)return"";try{const s=new Date(e);return isNaN(s.getTime())?"":s.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})}catch(s){return console.warn("Erreur lors du formatage de la date:",s),""}},L=y(()=>{if(!v.value.length)return[];switch(g.value){case"calculated":return v.value.filter(e=>e.is_calculated);case"pending":return v.value.filter(e=>!e.is_calculated);case"won":return v.value.filter(e=>e.is_calculated&&e.points_earned>0);default:return v.value}}),N=y(()=>{const e={};return L.value.forEach(s=>{const t=new Date(s.football_match.match_date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});e[t]||(e[t]={date:t,predictions:[]}),e[t].predictions.push(s)}),Object.values(e).sort((e,s)=>{const t=new Date(e.predictions[0].football_match.match_date);return new Date(s.predictions[0].football_match.match_date)-t})});return b(()=>null==s?void 0:s.isAuthenticated,e=>{e?(M(),I()):(n.value=[],c.value=null,d.value=[])},{immediate:!0}),b(()=>r.value,e=>{"predictions"===e&&(null==s?void 0:s.isAuthenticated)&&!c.value&&I()}),_(()=>{var e,t;(null==s?void 0:s.isAuthenticated)&&(M(),I(),w.value.name=(null==(e=s.user)?void 0:e.name)||"",console.log("üîç [Profile] Donn√©es utilisateur:",s.user),console.log("üîç [Profile] Date cr√©ation:",null==(t=s.user)?void 0:t.created_at));const a=localStorage.getItem("dinor_predictions_filter"),i=localStorage.getItem("dinor_predictions_filter_mini");a&&(g.value=a),i&&(f.value=i)}),{authStore:s,loading:a,activeSection:r,showAuthModal:i,favorites:n,selectedFilter:o,favoriteOptions:D,filteredFavorites:j,loadFavorites:M,removeFavorite:async e=>{if(confirm("√ätes-vous s√ªr de vouloir retirer cet √©l√©ment de vos favoris ?"))try{(await t.request(`/favorites/${e.id}`,{method:"DELETE"})).success&&(n.value=n.value.filter(s=>s.id!==e.id))}catch(s){console.error("Erreur lors de la suppression du favori:",s),alert("Erreur lors de la suppression du favori")}},goToContent:s=>{const t={recipe:`/recipe/${s.content.id}`,tip:`/tip/${s.content.id}`,event:`/event/${s.content.id}`,dinor_tv:"/dinor-tv"}[s.type];t&&e.push(t)},profileSections:C,filterTabs:D,totalFavorites:A,favoritesStats:E,formatMemberSince:e=>{if(!e)return"Date inconnue";try{const s=new Date(e);return isNaN(s.getTime())?"Date inconnue":s.toLocaleDateString("fr-FR",{year:"numeric",month:"long"})}catch(s){return console.warn("Erreur lors du formatage de la date membre:",s),"Date inconnue"}},handleImageError:e=>{e.target.src="/images/default-content.jpg"},usernameForm:w,passwordForm:S,deletionForm:z,updateUsername:async()=>{var e,a,i,n,o;w.value.loading=!0,w.value.message="";try{console.log("üìù [Profile] Mise √† jour du nom:",{name:w.value.name});const e=await t.put("/profile/name",{name:w.value.name});if(console.log("‚úÖ [Profile] R√©ponse mise √† jour nom:",e),e.success){w.value.success=!0,w.value.message="Nom d'utilisateur mis √† jour avec succ√®s";const t={...s.user,name:e.data.name};s.setUser(t),w.value.name=""}}catch(r){if(console.error("‚ùå [Profile] Erreur mise √† jour nom:",r),console.error("‚ùå [Profile] Donn√©es d'erreur:",null==(e=r.response)?void 0:e.data),w.value.success=!1,null==(i=null==(a=r.response)?void 0:a.data)?void 0:i.errors){const e=r.response.data.errors;e.name&&e.name.length>0?w.value.message=e.name[0]:w.value.message="Erreur de validation: "+Object.values(e).flat().join(", ")}else w.value.message=(null==(o=null==(n=r.response)?void 0:n.data)?void 0:o.message)||r.message||"Erreur lors de la mise √† jour"}finally{w.value.loading=!1}},updatePassword:async()=>{var e,s,a,i,n;if(S.value.newPassword!==S.value.confirmPassword)return S.value.success=!1,void(S.value.message="Les mots de passe ne correspondent pas");S.value.loading=!0,S.value.message="";try{console.log("üîê [Profile] Mise √† jour du mot de passe");const e=await t.put("/profile/password",{current_password:S.value.currentPassword,new_password:S.value.newPassword,new_password_confirmation:S.value.confirmPassword});console.log("‚úÖ [Profile] R√©ponse mise √† jour mdp:",e),e.success&&(S.value.success=!0,S.value.message="Mot de passe mis √† jour avec succ√®s",S.value.currentPassword="",S.value.newPassword="",S.value.confirmPassword="")}catch(o){if(console.error("‚ùå [Profile] Erreur mise √† jour mdp:",o),console.error("‚ùå [Profile] Donn√©es d'erreur:",null==(e=o.response)?void 0:e.data),S.value.success=!1,null==(a=null==(s=o.response)?void 0:s.data)?void 0:a.errors){const e=o.response.data.errors;e.current_password&&e.current_password.length>0?S.value.message=e.current_password[0]:e.new_password&&e.new_password.length>0?S.value.message=e.new_password[0]:S.value.message="Erreur de validation: "+Object.values(e).flat().join(", ")}else S.value.message=(null==(n=null==(i=o.response)?void 0:i.data)?void 0:n.message)||o.message||"Erreur lors de la mise √† jour"}finally{S.value.loading=!1}},requestDataDeletion:async()=>{var e,s;if(confirm("√ätes-vous absolument s√ªr de vouloir demander la suppression de toutes vos donn√©es ? Cette action est irr√©versible.")){z.value.loading=!0,z.value.message="";try{const e=await t.request("/profile/request-deletion",{method:"POST",body:{reason:z.value.reason,confirm:z.value.confirm}});e.success&&(z.value.success=!0,z.value.message=e.message,z.value.reason="",z.value.confirm=!1)}catch(a){z.value.success=!1,z.value.message=(null==(s=null==(e=a.response)?void 0:e.data)?void 0:s.message)||"Erreur lors de la demande"}finally{z.value.loading=!1}}},handleLogout:async()=>{if(confirm("√ätes-vous s√ªr de vouloir vous d√©connecter ?")){console.log("üëã [Profile] D√©connexion utilisateur");try{await s.logout(),e.push("/")}catch(t){console.error("‚ùå [Profile] Erreur lors de la d√©connexion:",t)}}},openTournament:s=>{console.log("üèÜ [Profile] Ouverture du tournoi:",s.name),e.push("/predictions/tournaments")},openTournamentModal:s=>{console.log("üèÜ [Profile] Ouverture modale tournoi:",s.name),e.push("/predictions/tournaments")},predictionsLoading:l,userPredictionsStats:c,recentPredictions:d,userTournaments:u,predictionsTabs:P,activePredictionsTab:m,activeTournaments:p,userAllPredictions:v,predictionsFilter:g,predictionsFilterMini:f,formatRelativeTime:e=>{const s=new Date,t=new Date(e),a=Math.floor((s-t)/36e5);if(a<1)return"Il y a moins d'une heure";if(a<24)return`Il y a ${a}h`;if(a<48)return"Hier";const i=Math.floor(a/24);return i<7?`Il y a ${i} jour${i>1?"s":""}`:q(e)},formatTime:e=>new Date(e).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),getFilteredRecentPredictions:()=>{const e=d.value.slice(0,5);return"all"===f.value?e:"pending"===f.value?e.filter(e=>!e.is_calculated):"calculated"===f.value?e.filter(e=>e.is_calculated):e},getPredictionsCountByStatus:e=>"pending"===e?v.value.filter(e=>!e.is_calculated).length:"calculated"===e?v.value.filter(e=>e.is_calculated).length:"won"===e?v.value.filter(e=>e.is_calculated&&e.points_earned>0).length:v.value.length,getProgressPercentage:()=>{var e;if(!(null==(e=c.value)?void 0:e.points_to_next_rank))return 0;const s=c.value.total_points||0,t=c.value.points_to_next_rank||100;return Math.min(100,s/(s+t)*100)},groupedPredictions:N,filteredPredictions:L,loadPredictionsData:I,loadAllUserPredictions:x,loadActiveTournaments:R,switchPredictionsTab:V,registerToTournament:async e=>{console.log("üèÜ [Profile] Inscription au tournoi:",e.name);try{(await t.post(`/tournaments/${e.id}/register`)).success&&(e.user_is_participant=!0,e.can_register=!1)}catch(s){console.error("‚ùå [Profile] Erreur inscription tournoi:",s)}},goToPredictions:s=>{console.log("üèÜ [Profile] Aller aux pr√©dictions:",(null==s?void 0:s.name)||"global"),e.push("/predictions")},goToLeaderboard:()=>{console.log("üèÜ [Profile] Aller au classement"),V("my-ranking")},getPointsClass:e=>e>0?"points-positive":0===e?"points-neutral":"points-negative",getTournamentStatusLabel:e=>({registration_open:"Inscriptions ouvertes",registration_closed:"Inscriptions ferm√©es",active:"En cours",finished:"Termin√©",cancelled:"Annul√©"}[e]||e),formatPrize:(e,s="XOF")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:s,minimumFractionDigits:0}).format(e),getRankClass:e=>e?1===e?"rank-gold":2===e?"rank-silver":3===e?"rank-bronze":e<=10?"rank-top10":"":"",formatDate:q,getTypeIcon:e=>({recipe:"restaurant",tip:"lightbulb",event:"event",dinor_tv:"play_circle"}[e]||"star"),getDefaultImage:e=>({recipe:"/images/default-recipe.jpg",tip:"/images/default-tip.jpg",event:"/images/default-event.jpg",dinor_tv:"/images/default-video.jpg"}[e]||"/images/default-content.jpg"),getShortDescription:e=>{if(!e)return"";const s=e.replace(/<[^>]*>/g,"");return s.length>100?s.substring(0,100)+"...":s},getEmptyMessage:()=>({all:"Aucun favori pour le moment",recipe:"Aucune recette favorite",tip:"Aucune astuce favorite",event:"Aucun √©v√©nement favori",dinor_tv:"Aucune vid√©o favorite"}[o.value]||"Aucun favori"),getEmptyDescription:()=>({all:"Ajoutez du contenu √† vos favoris en cliquant sur l'ic√¥ne c≈ìur",recipe:"Parcourez les recettes et ajoutez vos pr√©f√©r√©es √† vos favoris",tip:"D√©couvrez des astuces utiles et sauvegardez-les",event:"Trouvez des √©v√©nements int√©ressants et ajoutez-les √† vos favoris",dinor_tv:"Regardez des vid√©os et ajoutez vos pr√©f√©r√©es √† vos favoris"}[o.value]||""),getExploreLink:()=>({all:"/",recipe:"/recipes",tip:"/tips",event:"/events",dinor_tv:"/dinor-tv"}[o.value]||"/")}}},[["render",function(h,y,b,_,k,w){var S,z,F,T;const $t=a("DinorIcon"),Bt=a("router-link"),Jt=a("AuthModal");return P(),e("div",C,[_.loading?(P(),e("div",D,y[29]||(y[29]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Chargement du profil...",-1)]))):(null==(S=_.authStore)?void 0:S.isAuthenticated)?(P(),e("div",j,[t("div",M,[t("div",I,[s($t,{name:"person",size:32})]),t("div",x,[t("h1",R,n(_.authStore.userName),1),t("p",V,n(null==(z=_.authStore.user)?void 0:z.email),1),(null==(F=_.authStore.user)?void 0:F.created_at)?(P(),e("p",q,"Membre depuis "+n(_.formatMemberSince(_.authStore.user.created_at)),1)):i("",!0)])]),t("div",L,[(P(!0),e(o,null,r(_.profileSections,a=>(P(),e("button",{key:a.key,onClick:e=>_.activeSection=a.key,class:l(["nav-button",{active:_.activeSection===a.key}])},[s($t,{name:a.icon,size:20},null,8,["name"]),t("span",null,n(a.label),1)],10,N))),128))]),t("div",U,["favorites"===_.activeSection?(P(),e("div",O,[t("div",$,[y[32]||(y[32]=t("h2",{class:"section-title"},"Mes Favoris",-1)),t("div",B,[(P(!0),e(o,null,r(_.filterTabs,a=>(P(),e("button",{key:a.key,onClick:e=>_.selectedFilter=a.key,class:l(["filter-tab",{active:_.selectedFilter===a.key}])},[s($t,{name:a.icon,size:18},null,8,["name"]),t("span",null,n(a.label),1)],10,J))),128))])]),_.filteredFavorites.length?(P(),e("div",G,[(P(!0),e(o,null,r(_.filteredFavorites,a=>(P(),e("div",{key:a.id,onClick:e=>_.goToContent(a),class:"favorite-item"},[t("div",X,[t("img",{src:a.content.image||_.getDefaultImage(a.type),alt:a.content.title,onError:y[1]||(y[1]=(...e)=>_.handleImageError&&_.handleImageError(...e))},null,40,K),t("div",Q,[s($t,{name:_.getTypeIcon(a.type),size:16},null,8,["name"])])]),t("div",W,[t("h3",Y,n(a.content.title),1),t("p",Z,n(_.getShortDescription(a.content.description)),1),t("div",ee,[t("span",se," Ajout√© "+n(_.formatDate(a.favorited_at)),1),t("div",te,[t("span",ae,[s($t,{name:"favorite",size:16}),c(" "+n(a.content.likes_count||0),1)]),t("span",ie,[s($t,{name:"comment",size:16}),c(" "+n(a.content.comments_count||0),1)])])])]),t("button",{onClick:d(e=>_.removeFavorite(a),["stop"]),class:"remove-favorite",title:"Retirer des favoris"},[s($t,{name:"close",size:16})],8,ne)],8,H))),128))])):(P(),e("div",oe,[t("div",re,[s($t,{name:"favorite_border",size:48})]),t("h3",null,n(_.getEmptyMessage()),1),t("p",null,n(_.getEmptyDescription()),1),s(Bt,{to:_.getExploreLink(),class:"btn-secondary"},{default:u(()=>y[33]||(y[33]=[c(" D√©couvrir du contenu ")])),_:1,__:[33]},8,["to"])]))])):i("",!0),"predictions"===_.activeSection?(P(),e("div",le,[y[67]||(y[67]=t("h2",{class:"section-title"},"Mes Pronostics",-1)),_.predictionsLoading?(P(),e("div",ce,y[34]||(y[34]=[t("div",{class:"md3-circular-progress"},null,-1),t("p",null,"Chargement de vos statistiques...",-1)]))):_.userPredictionsStats?(P(),e("div",de,[t("div",ue,[t("div",me,[t("div",pe,[t("div",ve,[s($t,{name:"target",size:24})]),t("div",ge,[t("span",fe,n(_.userPredictionsStats.total_predictions),1),y[35]||(y[35]=t("span",{class:"stat-label"},"Total pr√©dictions",-1))])]),t("div",he,[t("div",ye,[s($t,{name:"trophy",size:24})]),t("div",be,[t("span",_e,n(_.userPredictionsStats.total_points),1),y[36]||(y[36]=t("span",{class:"stat-label"},"Points gagn√©s",-1))])]),t("div",ke,[t("div",Pe,[s($t,{name:"target",size:24})]),t("div",we,[t("span",Se,n(_.userPredictionsStats.accuracy_percentage)+"%",1),y[37]||(y[37]=t("span",{class:"stat-label"},"Pr√©cision",-1))])]),_.userPredictionsStats.current_rank?(P(),e("div",ze,[t("div",Fe,[s($t,{name:"activity",size:24})]),t("div",Te,[t("span",Ce,"#"+n(_.userPredictionsStats.current_rank),1),y[38]||(y[38]=t("span",{class:"stat-label"},"Classement",-1))])])):i("",!0)]),t("div",De,[t("button",{onClick:y[2]||(y[2]=(...e)=>_.goToPredictions&&_.goToPredictions(...e)),class:"action-button primary"},[s($t,{name:"add",size:18}),y[39]||(y[39]=t("span",null,"Faire un pronostic",-1))]),t("button",{onClick:y[3]||(y[3]=e=>_.switchPredictionsTab("my-ranking")),class:"action-button secondary"},[s($t,{name:"activity",size:18}),y[40]||(y[40]=t("span",null,"Voir le classement",-1))]),t("button",{onClick:y[4]||(y[4]=e=>_.switchPredictionsTab("active-tournaments")),class:"action-button secondary"},[s($t,{name:"trophy",size:18}),y[41]||(y[41]=t("span",null,"Tournois actifs",-1))])])]),t("div",Ae,[(P(!0),e(o,null,r(_.predictionsTabs,a=>(P(),e("button",{key:a.key,onClick:e=>_.switchPredictionsTab(a.key),class:l(["sub-tab",{active:_.activePredictionsTab===a.key}])},[s($t,{name:a.icon,size:18},null,8,["name"]),t("span",null,n(a.label),1)],10,Ee))),128))]),"my-predictions"===_.activePredictionsTab?(P(),e("div",je,[_.userPredictionsStats?(P(),e("div",Me,[t("div",Ie,[t("div",xe,[t("div",Re,[s($t,{name:"target",size:20})]),t("div",Ve,[t("span",qe,n(_.userPredictionsStats.total_predictions||0),1),y[42]||(y[42]=t("span",{class:"stat-label"},"Pronostics",-1))])]),t("div",Le,[t("div",Ne,[s($t,{name:"target",size:20})]),t("div",Ue,[t("span",Oe,n(_.userPredictionsStats.accuracy_percentage||0)+"%",1),y[43]||(y[43]=t("span",{class:"stat-label"},"Pr√©cision",-1))])]),t("div",$e,[t("div",Be,[s($t,{name:"trophy",size:20})]),t("div",Je,[t("span",Ge,n(_.userPredictionsStats.total_points||0),1),y[44]||(y[44]=t("span",{class:"stat-label"},"Points",-1))])]),_.userPredictionsStats.current_rank?(P(),e("div",He,[t("div",Xe,[s($t,{name:"activity",size:20})]),t("div",Ke,[t("span",Qe,"#"+n(_.userPredictionsStats.current_rank),1),y[45]||(y[45]=t("span",{class:"stat-label"},"Classement",-1))])])):i("",!0)])])):i("",!0),_.recentPredictions.length?(P(),e("div",We,[t("div",Ye,[t("h3",Ze,[s($t,{name:"loading",size:18}),y[46]||(y[46]=c(" Pronostics r√©cents "))]),t("div",es,[t("button",{onClick:y[5]||(y[5]=e=>_.predictionsFilterMini="all"),class:l(["filter-btn",{active:"all"===_.predictionsFilterMini}])}," Tous ",2),t("button",{onClick:y[6]||(y[6]=e=>_.predictionsFilterMini="pending"),class:l(["filter-btn",{active:"pending"===_.predictionsFilterMini}])}," En attente ",2),t("button",{onClick:y[7]||(y[7]=e=>_.predictionsFilterMini="calculated"),class:l(["filter-btn",{active:"calculated"===_.predictionsFilterMini}])}," Termin√©s ",2)])]),t("div",ss,[(P(!0),e(o,null,r(_.getFilteredRecentPredictions(),s=>(P(),e("div",{key:s.id,class:l(["prediction-card compact",{calculated:s.is_calculated,"positive-result":s.is_calculated&&s.points_earned>0,"negative-result":s.is_calculated&&0===s.points_earned}])},[t("div",ts,[s.is_calculated?(P(),m($t,{key:0,name:s.points_earned>0?"check_circle":"cancel",size:16},null,8,["name"])):(P(),m($t,{key:1,name:"schedule",size:16,class:"pending-icon"}))]),t("div",as,[t("div",is,[t("span",ns,n(s.football_match.home_team.short_name||s.football_match.home_team.name),1),y[47]||(y[47]=t("span",{class:"vs"},"vs",-1)),t("span",os,n(s.football_match.away_team.short_name||s.football_match.away_team.name),1)]),t("div",rs,[t("span",ls,n(s.predicted_home_score)+" - "+n(s.predicted_away_score),1),s.is_calculated?(P(),e("span",{key:0,class:l(["points-earned",{"points-positive":s.points_earned>0}])},n(s.points_earned>0?"+":"")+n(s.points_earned)+" pt"+n(s.points_earned>1?"s":""),3)):(P(),e("span",cs,"En attente"))])]),t("div",ds,n(_.formatRelativeTime(s.created_at)),1)],2))),128))]),t("button",{onClick:y[8]||(y[8]=(...e)=>_.loadAllUserPredictions&&_.loadAllUserPredictions(...e)),class:"btn-secondary show-all-btn"},[s($t,{name:"visibility",size:18}),c(" Voir tous mes pronostics ("+n(_.userPredictionsStats.total_predictions)+") ",1)])])):i("",!0),_.userAllPredictions.length?(P(),e("div",us,[t("div",ms,[t("h3",ps,[s($t,{name:"list",size:18}),y[48]||(y[48]=c(" Tous mes pronostics "))]),t("div",vs,[t("div",gs,[t("button",{onClick:y[9]||(y[9]=e=>_.predictionsFilter="all"),class:l(["filter-chip",{active:"all"===_.predictionsFilter}])},[s($t,{name:"check",size:16}),c(" Tous ("+n(_.userAllPredictions.length)+") ",1)],2),t("button",{onClick:y[10]||(y[10]=e=>_.predictionsFilter="pending"),class:l(["filter-chip",{active:"pending"===_.predictionsFilter}])},[s($t,{name:"schedule",size:16}),c(" En attente ("+n(_.getPredictionsCountByStatus("pending"))+") ",1)],2),t("button",{onClick:y[11]||(y[11]=e=>_.predictionsFilter="calculated"),class:l(["filter-chip",{active:"calculated"===_.predictionsFilter}])},[s($t,{name:"check_circle",size:16}),c(" Termin√©s ("+n(_.getPredictionsCountByStatus("calculated"))+") ",1)],2),t("button",{onClick:y[12]||(y[12]=e=>_.predictionsFilter="won"),class:l(["filter-chip",{active:"won"===_.predictionsFilter}])},[s($t,{name:"trophy",size:16}),c(" Gagnants ("+n(_.getPredictionsCountByStatus("won"))+") ",1)],2)])])]),t("div",fs,[(P(!0),e(o,null,r(_.groupedPredictions,a=>(P(),e("div",{key:a.date,class:"predictions-group"},[t("div",hs,[t("span",ys,n(a.date),1),t("span",bs,n(a.predictions.length)+" pronostic"+n(a.predictions.length>1?"s":""),1)]),t("div",_s,[(P(!0),e(o,null,r(a.predictions,a=>(P(),e("div",{key:a.id,class:l(["prediction-card detailed",{calculated:a.is_calculated,"positive-result":a.is_calculated&&a.points_earned>0,"negative-result":a.is_calculated&&0===a.points_earned}])},[t("div",ks,[a.is_calculated?(P(),m($t,{key:0,name:a.points_earned>0?"check_circle":"cancel",size:20},null,8,["name"])):(P(),m($t,{key:1,name:"schedule",size:20,class:"pending-icon"}))]),t("div",Ps,[t("div",ws,[t("span",Ss,n(a.football_match.home_team.name),1),y[49]||(y[49]=t("span",{class:"vs"},"vs",-1)),t("span",zs,n(a.football_match.away_team.name),1)]),t("div",Fs,n(_.formatTime(a.football_match.match_date)),1)]),t("div",Ts,[t("div",Cs,[t("div",Ds,[y[50]||(y[50]=t("span",{class:"label"},"Mon pronostic",-1)),t("span",As,n(a.predicted_home_score)+" - "+n(a.predicted_away_score),1)]),a.football_match.is_finished?(P(),e("div",Es,[y[51]||(y[51]=t("span",{class:"label"},"R√©sultat final",-1)),t("span",js,n(a.football_match.home_score)+" - "+n(a.football_match.away_score),1)])):i("",!0)]),t("div",Ms,[a.is_calculated?(P(),e("span",{key:0,class:l(["points-earned",_.getPointsClass(a.points_earned)])},[s($t,{name:a.points_earned>0?"add":"remove",size:14},null,8,["name"]),c(" "+n(a.points_earned)+" point"+n(a.points_earned>1?"s":""),1)],2)):(P(),e("span",Is,[s($t,{name:"schedule",size:14}),y[52]||(y[52]=c(" En attente du r√©sultat "))]))])])],2))),128))])]))),128))])])):i("",!0),_.recentPredictions.length||_.userAllPredictions.length?i("",!0):(P(),e("div",xs,[t("div",Rs,[t("div",Vs,[s($t,{name:"target",size:48})]),y[53]||(y[53]=t("div",{class:"empty-pattern"},null,-1))]),y[56]||(y[56]=t("h3",null,"Aucun pronostic pour le moment",-1)),y[57]||(y[57]=t("p",null,"Commencez √† faire des pronostics pour gagner des points et grimper dans le classement !",-1)),t("div",qs,[t("button",{onClick:y[13]||(y[13]=(...e)=>_.goToPredictions&&_.goToPredictions(...e)),class:"btn-primary"},[s($t,{name:"add",size:18}),y[54]||(y[54]=c(" Faire mon premier pronostic "))]),t("button",{onClick:y[14]||(y[14]=e=>_.switchPredictionsTab("active-tournaments")),class:"btn-secondary"},[s($t,{name:"trophy",size:18}),y[55]||(y[55]=c(" Voir les tournois "))])])]))])):i("",!0),"my-ranking"===_.activePredictionsTab?(P(),e("div",Ls,[t("div",Ns,[t("h3",Us,[s($t,{name:"activity",size:18}),y[58]||(y[58]=c(" Mon classement "))]),_.userPredictionsStats.current_rank?(P(),e("div",Os,[t("div",{class:l(["rank-badge",_.getRankClass(_.userPredictionsStats.current_rank)])},[s($t,{name:"trophy",size:20}),t("span",$s,"#"+n(_.userPredictionsStats.current_rank),1)],2),t("div",Bs,[t("h4",null,n((null==(T=_.authStore.user)?void 0:T.name)||"Vous"),1),t("div",Js,[t("div",Gs,[s($t,{name:"star",size:16}),t("span",null,n(_.userPredictionsStats.total_points)+" points",1)]),t("div",Hs,[s($t,{name:"target",size:16}),t("span",null,n(_.userPredictionsStats.accuracy_percentage)+"% de r√©ussite",1)])]),_.userPredictionsStats.rank_change?(P(),e("div",{key:0,class:l(["rank-change",{positive:_.userPredictionsStats.rank_change>0,negative:_.userPredictionsStats.rank_change<0}])},[s($t,{name:_.userPredictionsStats.rank_change>0?"trending_up":"trending_down",size:16},null,8,["name"]),c(" "+n(_.userPredictionsStats.rank_change>0?"+":"")+n(_.userPredictionsStats.rank_change)+" place"+n(Math.abs(_.userPredictionsStats.rank_change)>1?"s":""),1)],2)):i("",!0)])])):i("",!0),_.userPredictionsStats.points_to_next_rank?(P(),e("div",Xs,[y[59]||(y[59]=t("h4",null,"Progression",-1)),t("div",Ks,[t("span",null,n(_.userPredictionsStats.points_to_next_rank)+" points pour le prochain rang",1),t("div",Qs,[t("div",{class:"progress-fill",style:p({width:_.getProgressPercentage()+"%"})},null,4)])])])):i("",!0),t("div",Ws,[t("button",{onClick:y[15]||(y[15]=(...e)=>_.goToLeaderboard&&_.goToLeaderboard(...e)),class:"btn-primary"},[s($t,{name:"activity",size:18}),y[60]||(y[60]=c(" Voir le classement complet "))]),t("button",{onClick:y[16]||(y[16]=e=>_.switchPredictionsTab("active-tournaments")),class:"btn-secondary"},[s($t,{name:"trophy",size:18}),y[61]||(y[61]=c(" Rejoindre un tournoi "))])])])])):i("",!0),"active-tournaments"===_.activePredictionsTab?(P(),e("div",Ys,[t("div",Zs,[y[64]||(y[64]=t("h3",{class:"subsection-title"},"Tournois en cours",-1)),_.activeTournaments.length?(P(),e("div",et,[(P(!0),e(o,null,r(_.activeTournaments,a=>(P(),e("div",{key:a.id,class:"tournament-card"},[t("div",st,[t("h4",null,n(a.name),1),t("span",{class:l(["tournament-status",a.status])},n(_.getTournamentStatusLabel(a.status)),3)]),t("div",tt,[a.total_prize?(P(),e("div",at,[s($t,{name:"trophy",size:16}),t("span",null,n(_.formatPrize(a.total_prize)),1)])):i("",!0),t("div",it,[s($t,{name:"group",size:16}),t("span",null,n(a.participants_count||0)+" participant"+n((a.participants_count||0)>1?"s":""),1)])]),t("div",nt,[a.can_register&&!a.user_is_participant?(P(),e("button",{key:0,onClick:e=>_.registerToTournament(a),disabled:h.registering===a.id,class:"btn-secondary"},n(h.registering===a.id?"Inscription...":"S'inscrire"),9,ot)):i("",!0),a.user_is_participant?(P(),e("button",{key:1,onClick:e=>_.goToPredictions(a),class:"btn-primary"}," Faire mes pronostics ",8,rt)):i("",!0)])]))),128))])):(P(),e("div",lt,[t("div",ct,[s($t,{name:"trophy",size:48})]),y[62]||(y[62]=t("h4",null,"Aucun tournoi actif",-1)),y[63]||(y[63]=t("p",null,"Les nouveaux tournois appara√Ætront ici d√®s qu'ils seront disponibles.",-1))]))])])):i("",!0)])):(P(),e("div",dt,[t("div",ut,[s($t,{name:"error",size:48})]),y[65]||(y[65]=t("h3",null,"Impossible de charger vos pronostics",-1)),y[66]||(y[66]=t("p",null,"V√©rifiez votre connexion et r√©essayez.",-1)),t("button",{onClick:y[17]||(y[17]=(...e)=>_.loadPredictionsData&&_.loadPredictionsData(...e)),class:"btn-secondary"},"R√©essayer")]))])):i("",!0),"account"===_.activeSection?(P(),e("div",mt,[y[70]||(y[70]=t("h2",{class:"section-title"},"Mon Compte",-1)),t("div",pt,[y[69]||(y[69]=t("h3",{class:"form-title"},"Nom d'utilisateur",-1)),t("form",{onSubmit:y[19]||(y[19]=d((...e)=>_.updateUsername&&_.updateUsername(...e),["prevent"])),class:"update-form"},[t("div",vt,[y[68]||(y[68]=t("label",{class:"form-label"},"Nouveau nom d'utilisateur",-1)),v(t("input",{"onUpdate:modelValue":y[18]||(y[18]=e=>_.usernameForm.name=e),type:"text",class:"form-input",placeholder:"Votre nom d'utilisateur",required:"",minlength:"2",maxlength:"255"},null,512),[[g,_.usernameForm.name]])]),t("div",gt,[t("button",{type:"submit",class:"btn-primary",disabled:_.usernameForm.loading},[_.usernameForm.loading?(P(),e("span",ht,"Mise √† jour...")):(P(),e("span",yt,"Mettre √† jour"))],8,ft)]),_.usernameForm.message?(P(),e("div",{key:0,class:l(["form-message",_.usernameForm.success?"success":"error"])},n(_.usernameForm.message),3)):i("",!0)],32)])])):i("",!0),"security"===_.activeSection?(P(),e("div",bt,[y[79]||(y[79]=t("h2",{class:"section-title"},"S√©curit√©",-1)),t("div",_t,[y[75]||(y[75]=t("h3",{class:"form-title"},"Changer le mot de passe",-1)),t("form",{onSubmit:y[23]||(y[23]=d((...e)=>_.updatePassword&&_.updatePassword(...e),["prevent"])),class:"update-form"},[t("div",kt,[y[71]||(y[71]=t("label",{class:"form-label"},"Mot de passe actuel",-1)),v(t("input",{"onUpdate:modelValue":y[20]||(y[20]=e=>_.passwordForm.currentPassword=e),type:"password",class:"form-input",placeholder:"Votre mot de passe actuel",required:""},null,512),[[g,_.passwordForm.currentPassword]])]),t("div",Pt,[y[72]||(y[72]=t("label",{class:"form-label"},"Nouveau mot de passe",-1)),v(t("input",{"onUpdate:modelValue":y[21]||(y[21]=e=>_.passwordForm.newPassword=e),type:"password",class:"form-input",placeholder:"Votre nouveau mot de passe",required:"",minlength:"8"},null,512),[[g,_.passwordForm.newPassword]]),y[73]||(y[73]=t("small",{class:"form-hint"},"Au moins 8 caract√®res avec lettres et chiffres",-1))]),t("div",wt,[y[74]||(y[74]=t("label",{class:"form-label"},"Confirmer le nouveau mot de passe",-1)),v(t("input",{"onUpdate:modelValue":y[22]||(y[22]=e=>_.passwordForm.confirmPassword=e),type:"password",class:"form-input",placeholder:"Confirmer votre nouveau mot de passe",required:"",minlength:"8"},null,512),[[g,_.passwordForm.confirmPassword]])]),t("div",St,[t("button",{type:"submit",class:"btn-primary",disabled:_.passwordForm.loading},[_.passwordForm.loading?(P(),e("span",Ft,"Mise √† jour...")):(P(),e("span",Tt,"Changer le mot de passe"))],8,zt)]),_.passwordForm.message?(P(),e("div",{key:0,class:l(["form-message",_.passwordForm.success?"success":"error"])},n(_.passwordForm.message),3)):i("",!0)],32)]),t("div",Ct,[y[77]||(y[77]=t("h3",{class:"form-title"},"D√©connexion",-1)),y[78]||(y[78]=t("p",{class:"form-description"}," Vous serez d√©connect√© de votre compte sur cet appareil. Vos donn√©es seront conserv√©es. ",-1)),t("button",{onClick:y[24]||(y[24]=(...e)=>_.handleLogout&&_.handleLogout(...e)),class:"btn-logout-main"},[s($t,{name:"logout",size:18}),y[76]||(y[76]=t("span",null,"Se d√©connecter",-1))])])])):i("",!0),"legal"===_.activeSection?(P(),e("div",Dt,[y[88]||(y[88]=t("h2",{class:"section-title"},"L√©gal & Confidentialit√©",-1)),t("div",At,[y[83]||(y[83]=t("h3",{class:"form-title"},"Conditions d'utilisation",-1)),t("div",Et,[t("a",jt,[s($t,{name:"edit",size:18}),y[80]||(y[80]=t("span",null,"Conditions g√©n√©rales d'utilisation",-1)),s($t,{name:"chevron_right",size:18})]),t("a",Mt,[s($t,{name:"security",size:18}),y[81]||(y[81]=t("span",null,"Politique de confidentialit√©",-1)),s($t,{name:"chevron_right",size:18})]),t("a",It,[s($t,{name:"settings",size:18}),y[82]||(y[82]=t("span",null,"Politique des cookies",-1)),s($t,{name:"chevron_right",size:18})])])]),t("div",xt,[y[86]||(y[86]=t("h3",{class:"form-title danger-title"},"Suppression des donn√©es",-1)),y[87]||(y[87]=t("p",{class:"danger-description"}," Vous pouvez demander la suppression de toutes vos donn√©es personnelles conform√©ment au RGPD. Cette action est irr√©versible. ",-1)),t("form",{onSubmit:y[27]||(y[27]=d((...e)=>_.requestDataDeletion&&_.requestDataDeletion(...e),["prevent"])),class:"update-form"},[t("div",Rt,[y[84]||(y[84]=t("label",{class:"form-label"},"Raison de la suppression (optionnel)",-1)),v(t("textarea",{"onUpdate:modelValue":y[25]||(y[25]=e=>_.deletionForm.reason=e),class:"form-textarea",placeholder:"Expliquez pourquoi vous souhaitez supprimer vos donn√©es...",rows:"3",maxlength:"500"},null,512),[[g,_.deletionForm.reason]])]),t("div",Vt,[t("label",qt,[v(t("input",{"onUpdate:modelValue":y[26]||(y[26]=e=>_.deletionForm.confirm=e),type:"checkbox",required:""},null,512),[[f,_.deletionForm.confirm]]),y[85]||(y[85]=c(" Je confirme vouloir supprimer d√©finitivement toutes mes donn√©es "))])]),t("div",Lt,[t("button",{type:"submit",class:"btn-danger",disabled:_.deletionForm.loading||!_.deletionForm.confirm},[_.deletionForm.loading?(P(),e("span",Ut,"Demande en cours...")):(P(),e("span",Ot,"Demander la suppression"))],8,Nt)]),_.deletionForm.message?(P(),e("div",{key:0,class:l(["form-message",_.deletionForm.success?"success":"error"])},n(_.deletionForm.message),3)):i("",!0)],32)])])):i("",!0)])])):(P(),e("div",A,[t("div",E,[s($t,{name:"person",size:48})]),y[30]||(y[30]=t("h2",{class:"md3-title-large"},"Profil utilisateur",-1)),y[31]||(y[31]=t("p",{class:"md3-body-large"},"Connectez-vous pour voir votre profil et vos favoris",-1)),t("button",{onClick:y[0]||(y[0]=e=>_.showAuthModal=!0),class:"btn-primary"}," Se connecter ")])),s(Jt,{modelValue:_.showAuthModal,"onUpdate:modelValue":y[28]||(y[28]=e=>_.showAuthModal=e)},null,8,["modelValue"])])}],["__scopeId","data-v-9679717d"]]);export{$t as default};
