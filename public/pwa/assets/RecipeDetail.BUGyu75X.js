import{r as e,b as t,w as i,g as a,s as n,h as r,j as o,i as s,z as l,k as c,l as d,t as u,o as m,e as p,n as g,q as h,K as v,x as y,F as b,E as f,A as k,B as x,D as w,p as C}from"./vendor.Bvrl98ec.js";import{_ as I,D as L,A as _,S as D,u as $,d as R,e as A}from"./index.dD73OAp8.js";import{u as E}from"./useComments.Dc8klCVx.js";import{B as S}from"./Badge.BSFocAhE.js";import{F as U}from"./FavoriteButton.DCgE5Byr.js";import{L as z}from"./LikeButton.BKJJoEjU.js";const M={name:"ImageLightbox",props:{images:{type:Array,required:!0},title:{type:String,default:""},initialIndex:{type:Number,default:0},isOpen:{type:Boolean,default:!1}},emits:["close","change"],setup(r,{emit:o}){const s=e(r.initialIndex),l=e(!1),c=t(()=>r.images[s.value]||""),d=t(()=>`${r.title} - Image ${s.value+1}`),u=()=>{s.value<r.images.length-1&&(s.value++,o("change",s.value))},m=()=>{s.value>0&&(s.value--,o("change",s.value))},p=()=>{o("close")},g=e=>{if(r.isOpen)switch(e.key){case"Escape":p();break;case"ArrowLeft":m();break;case"ArrowRight":u()}};return i(()=>s.value,()=>{l.value=!0}),i(()=>r.initialIndex,e=>{s.value=e}),i(()=>r.isOpen,e=>{document.body.style.overflow=e?"hidden":""}),a(()=>{document.addEventListener("keydown",g)}),n(()=>{document.removeEventListener("keydown",g),document.body.style.overflow=""}),{currentIndex:s,currentImage:c,currentAlt:d,imageLoading:l,nextImage:u,previousImage:m,closeLightbox:p,handleImageLoad:()=>{l.value=!1},handleImageError:()=>{l.value=!1}}}},j={class:"lightbox-container"},B=["disabled"],F=["disabled"],q=["src","alt"],O={key:0,class:"lightbox-loading"},T={class:"lightbox-info"},V={class:"lightbox-title"},H={key:0,class:"lightbox-counter"};const P=I(M,[["render",function(e,t,i,a,n,p){const g=d("LucideChevronLeft"),h=d("LucideChevronRight"),v=d("LucideX");return i.isOpen?(m(),r("div",{key:0,class:"lightbox-overlay",onClick:t[6]||(t[6]=(...e)=>a.closeLightbox&&a.closeLightbox(...e))},[s("div",j,[i.images.length>1?(m(),r("button",{key:0,class:"lightbox-nav lightbox-nav-prev",onClick:t[0]||(t[0]=l((...e)=>a.previousImage&&a.previousImage(...e),["stop"])),disabled:0===a.currentIndex},[c(g,{size:32})],8,B)):o("",!0),i.images.length>1?(m(),r("button",{key:1,class:"lightbox-nav lightbox-nav-next",onClick:t[1]||(t[1]=l((...e)=>a.nextImage&&a.nextImage(...e),["stop"])),disabled:a.currentIndex===i.images.length-1},[c(h,{size:32})],8,F)):o("",!0),s("div",{class:"lightbox-image-container",onClick:t[4]||(t[4]=l(()=>{},["stop"]))},[s("img",{src:a.currentImage,alt:a.currentAlt,class:"lightbox-image",onLoad:t[2]||(t[2]=(...e)=>a.handleImageLoad&&a.handleImageLoad(...e)),onError:t[3]||(t[3]=(...e)=>a.handleImageError&&a.handleImageError(...e))},null,40,q),a.imageLoading?(m(),r("div",O,t[7]||(t[7]=[s("div",{class:"md3-circular-progress"},null,-1)]))):o("",!0)]),s("div",T,[s("div",V,u(i.title),1),i.images.length>1?(m(),r("div",H,u(a.currentIndex+1)+" / "+u(i.images.length),1)):o("",!0),s("button",{class:"lightbox-close",onClick:t[5]||(t[5]=(...e)=>a.closeLightbox&&a.closeLightbox(...e))},[c(v,{size:20})])])])])):o("",!0)}],["__scopeId","data-v-a911b163"]]),G={name:"Accordion",props:{title:{type:String,required:!0},initialOpen:{type:Boolean,default:!1},id:{type:String,default:null},toggleable:{type:Boolean,default:!0}},emits:["toggle"],setup(n,{emit:r}){const o=e(n.initialOpen),s=e(null),l=e(!1),c=t(()=>n.id||`accordion-${Math.random().toString(36).substr(2,9)}`);i(o,async e=>{if(!s.value||!l.value)return;const t=s.value;if(e){t.style.height="0px",t.style.overflow="hidden",await v();const e=t.scrollHeight;t.style.height=e+"px",setTimeout(()=>{t.style.height="auto",t.style.overflow="visible"},300)}else{const e=t.scrollHeight;t.style.height=e+"px",t.style.overflow="hidden",await v(),t.style.height="0px",setTimeout(()=>{o.value||(t.style.overflow="hidden")},300)}}),a(()=>{if(s.value){const e=s.value;n.initialOpen?(e.style.height="auto",e.style.overflow="visible"):(e.style.height="0px",e.style.overflow="hidden")}l.value=!0});return{isOpen:o,contentId:c,contentRef:s,toggle:()=>{n.toggleable&&(o.value=!o.value,r("toggle",o.value))},open:()=>{n.toggleable&&(o.value=!0,r("toggle",!0))},close:()=>{n.toggleable&&(o.value=!1,r("toggle",!1))},setOpen:e=>{n.toggleable&&(o.value=e,r("toggle",e))}}}},N=["aria-expanded","aria-controls","disabled"],K={class:"accordion-title"},X={class:"accordion-icon"},J=["id","aria-hidden"],Q={class:"accordion-body"};const W={class:"recipe-detail"},Y={class:"md3-main-content"},Z={key:0,class:"loading-container"},ee={key:1,class:"recipe-content"},te={class:"recipe-hero"},ie=["src","alt"],ae={class:"recipe-overlay dinor-gradient-primary"},ne={class:"recipe-badges"},re={class:"recipe-info"},oe={class:"recipe-stats"},se={class:"stat-item"},le={class:"md3-body-medium"},ce={class:"stat-item"},de={class:"md3-body-medium"},ue={class:"stat-item"},me={class:"md3-body-medium"},pe={class:"stat-item"},ge={class:"md3-body-medium"},he={key:0,class:"recipe-description"},ve=["innerHTML"],ye={key:1,class:"recipe-summary-video"},be={class:"video-container"},fe=["src","title"],ke={key:2,class:"recipe-main-video"},xe={class:"video-container"},we=["src","title"],Ce={class:"recipe-sections"},Ie={class:"ingredients-list"},Le={class:"md3-body-medium"},_e={class:"dinor-ingredients-section"},De={class:"dinor-ingredients-list"},$e={class:"dinor-ingredient-content"},Re={class:"dinor-ingredient-main md3-body-medium"},Ae={key:0,class:"dinor-ingredient-description md3-body-small"},Ee={key:1,class:"dinor-ingredient-brand md3-body-small"},Se={key:2,class:"dinor-ingredient-purchase"},Ue=["onClick"],ze=["innerHTML"],Me={class:"gallery-grid"},je=["src","alt","onClick"],Be={class:"add-comment-form"},Fe={key:0,class:"auth-prompt"},qe={key:1},Oe={class:"authenticated-user"},Te={class:"user-info"},Ve=["disabled"],He={key:0,class:"comments-list"},Pe={class:"comment-header"},Ge={class:"comment-meta"},Ne={class:"comment-author md3-body-medium"},Ke={class:"comment-date md3-body-small dinor-text-gray"},Xe={key:0,class:"comment-actions"},Je=["onClick"],Qe={class:"comment-content md3-body-medium"},We={key:1,class:"empty-comments"},Ye={class:"recipe-header-actions"},Ze=["disabled"],et={key:2,class:"error-state"},tt={class:"error-icon"};const it=I({name:"RecipeDetail",emits:["update-header"],components:{Badge:S,ShareModal:D,AuthModal:_,FavoriteButton:U,LikeButton:z,ImageLightbox:P,Accordion:I(G,[["render",function(e,t,i,a,n,o){const l=d("LucideChevronUp"),c=d("LucideChevronDown");return m(),r("div",{class:h(["accordion",{"accordion--open":a.isOpen}])},[s("button",{class:"accordion-header",onClick:t[0]||(t[0]=(...e)=>a.toggle&&a.toggle(...e)),"aria-expanded":a.isOpen,"aria-controls":a.contentId,disabled:!i.toggleable},[s("span",K,u(i.title),1),s("span",X,[a.isOpen?(m(),p(l,{key:0,size:20})):(m(),p(c,{key:1,size:20}))])],8,N),s("div",{class:"accordion-content",id:a.contentId,"aria-hidden":!a.isOpen,ref:"contentRef"},[s("div",Q,[g(e.$slots,"default",{},void 0)])],8,J)],2)}],["__scopeId","data-v-15fe9c09"]]),DinorIcon:L},props:{id:{type:String,required:!0}},setup(i,{emit:n}){const r=C(),o=$(),s=R(),{showShareModal:l,updateOpenGraphTags:c}=A(),{share:d}=function(){const t=e(!1),i=e(null),a=()=>"share"in navigator;return{isSharing:t,shareError:i,canShare:a,share:async e=>{if(!a())return i.value="Le partage n'est pas supporté sur cet appareil",!1;try{return t.value=!0,i.value=null,await navigator.share({title:e.title||document.title,text:e.text||e.description||"",url:e.url||window.location.href}),!0}catch(n){return"AbortError"!==n.name&&(console.error("Erreur lors du partage:",n),i.value="Erreur lors du partage"),!1}finally{t.value=!1}},copyToClipboard:async e=>{try{return await navigator.clipboard.writeText(e),!0}catch(t){return console.error("Erreur lors de la copie:",t),i.value="Impossible de copier le lien",!1}},shareViaUrl:(e,t)=>{const{url:a=window.location.href,title:n=document.title,text:r=""}=t;let o="";switch(e){case"facebook":o=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}`;break;case"twitter":o=`https://twitter.com/intent/tweet?url=${encodeURIComponent(a)}&text=${encodeURIComponent(r||n)}`;break;case"whatsapp":o=`https://wa.me/?text=${encodeURIComponent((r||n)+" "+a)}`;break;case"telegram":o=`https://t.me/share/url?url=${encodeURIComponent(a)}&text=${encodeURIComponent(r||n)}`;break;default:return i.value="Plateforme non supportée",!1}return!!o&&(window.open(o,"_blank","width=600,height=400"),!0)}}}(),{comments:u,loadComments:m,canDeleteComment:p,deleteComment:g,setContext:h,addComment:v}=E(),y=e(null),b=e(!0),f=e(!1),k=e(!1),x=e(""),w=e(!1),I=e(!1),L=e(0),_=t(()=>y.value?{title:y.value.title,text:y.value.description||`Découvrez cette délicieuse recette : ${y.value.title}`,url:window.location.href,image:y.value.featured_image_url,type:"recipe",id:y.value.id}:{}),D=async(e=!1)=>{try{console.log("🔄 [RecipeDetail] Chargement recette ID:",i.id,"ForceRefresh:",e);const t=e?await o.request(`/recipes/${i.id}`,{forceRefresh:!0}):await o.get(`/recipes/${i.id}`);t.success&&(y.value=t.data,h("Recipe",i.id),await m(),await S(),await U(),c(_.value),n("update-header",{title:y.value.title||"Recette",showShare:!0,showFavorite:!0,favoriteType:"recipe",favoriteItemId:parseInt(i.id),isContentFavorited:k.value,backPath:"/recipes"}))}catch(t){console.error("Erreur lors du chargement de la recette:",t)}finally{b.value=!1}},S=async()=>{try{const e=await o.get("/likes/check",{type:"recipe",id:i.id});f.value=e.success&&e.is_liked}catch(e){console.error("Erreur lors de la vérification du like:",e)}},U=async()=>{try{const e=await o.get("/favorites/check",{type:"recipe",id:i.id});k.value=e.success&&e.is_favorited}catch(e){console.error("Erreur lors de la vérification du favori:",e)}},z=async()=>{if(x.value.trim())if(s.isAuthenticated)try{console.log("📝 [Comments] Envoi du commentaire pour Recipe:",i.id),await v("Recipe",i.id,x.value),console.log("✅ [Comments] Commentaire ajouté avec succès"),x.value=""}catch(e){console.error("❌ [Comments] Erreur lors de l'ajout du commentaire:",e),(e.message.includes("401")||e.message.includes("connecté"))&&(w.value=!0)}else w.value=!0};a(()=>{D()});return{recipe:y,loading:b,showAuthModal:w,comments:u,newComment:x,authStore:s,userLiked:f,userFavorited:k,shareData:_,goBack:()=>{r.push("/recipes")},goHome:()=>{r.push("/")},forceRefresh:async()=>{console.log("🔄 [RecipeDetail] Rechargement forcé demandé"),b.value=!0;try{await D(!0),console.log("✅ [RecipeDetail] Rechargement forcé terminé")}catch(e){console.error("❌ [RecipeDetail] Erreur lors du rechargement forcé:",e)}},addComment:z,canDeleteComment:p,deleteComment:g,callShare:()=>{d(_.value)},handleLikeUpdate:e=>{f.value=e,console.log("❤️ [RecipeDetail] Like mis à jour:",e)},handleLikeCountUpdate:e=>{y.value&&(y.value.likes_count=e),console.log("🔢 [RecipeDetail] Compteur likes mis à jour:",e)},handleImageError:e=>{e.target.src="/images/default-recipe.jpg"},formatIngredients:e=>e?"string"==typeof e?e:Array.isArray(e)?e.map((e,t)=>"object"==typeof e&&e.name?`<div class="ingredient-item">\n              <span class="md3-body-medium">${e.quantity||""} ${e.unit||""} ${e.name}</span>\n            </div>`:"string"==typeof e?`<div class="ingredient-item">\n              <span class="md3-body-medium">${e}</span>\n            </div>`:`<div class="ingredient-item"><span class="md3-body-medium">${e}</span></div>`).join(""):e.toString():"",formatInstructions:e=>e?"string"==typeof e?e:Array.isArray(e)?e.map((e,t)=>"object"==typeof e&&e.step?`<div class="instruction-step">\n              <h4>Étape ${t+1}</h4>\n              <p>${e.step}</p>\n            </div>`:"string"==typeof e?`<div class="instruction-step">\n              <h4>Étape ${t+1}</h4>\n              <p>${e}</p>\n            </div>`:`<div class="instruction-step"><p>${e}</p></div>`).join(""):e.toString():"",getDifficultyColor:e=>({beginner:"#4CAF50",intermediate:"#FF9800",advanced:"#F44336"}[e]||"#4CAF50"),formatDate:e=>new Date(e).toLocaleDateString("fr-FR"),formatCookingTime:e=>e?`${e} min`:"N/A",getDifficultyLabel:e=>({beginner:"Débutant",easy:"Facile",medium:"Intermédiaire",hard:"Difficile",expert:"Expert"}[e]||e),getEmbedUrl:e=>{if(!e)return"";const t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);if(t)return`https://www.youtube.com/embed/${t[1]}?rel=0&modestbranding=1`;const i=e.match(/vimeo\.com\/(\d+)/);return i?`https://player.vimeo.com/video/${i[1]}`:e},showShareModal:l,handleAuthenticated:()=>{w.value=!1,x.value.trim()&&z()},openGalleryModal:e=>{var t,i;(null==(i=null==(t=y.value)?void 0:t.gallery_urls)?void 0:i[e])&&(L.value=e,I.value=!0)},formatIngredientDisplay:e=>{if(!e)return"";let t="";return e.quantity&&(t+=`${e.quantity} `),e.unit&&(t+=`${e.unit} `),e.name&&(t+=`de ${e.name}`),e.notes&&(t+=` (${e.notes})`),e.recommended_brand&&(t+=` [${e.recommended_brand}]`),t.trim()},formatDinorIngredientDisplay:e=>{if(!e)return"";let t="";return e.quantity&&(t+=`${e.quantity} `),e.unit&&(t+=`${e.unit} `),e.name?t+=`de ${e.name}`:e.ingredient_name&&(t+=`de ${e.ingredient_name}`),e.notes&&(t+=` (${e.notes})`),t.trim()},showLightbox:I,lightboxIndex:L,closeLightbox:()=>{I.value=!1},openPurchaseLink:e=>{if(e)try{new URL(e);window.open(e,"_blank","noopener,noreferrer"),console.log("🛒 [RecipeDetail] Lien d'achat ouvert:",e)}catch(t){console.error("❌ [RecipeDetail] URL invalide:",t)}}}}},[["render",function(e,t,i,a,n,l){const g=d("Badge"),v=d("DinorIcon"),C=d("Accordion"),I=d("LikeButton"),L=d("ShareModal"),_=d("AuthModal"),D=d("ImageLightbox");return m(),r("div",W,[s("main",Y,[a.loading?(m(),r("div",Z,t[12]||(t[12]=[s("div",{class:"md3-circular-progress"},null,-1),s("p",{class:"md3-body-large"},"Chargement de la recette...",-1)]))):a.recipe?(m(),r("div",ee,[s("div",te,[s("img",{src:a.recipe.featured_image_url||"/images/default-recipe.jpg",alt:a.recipe.title,class:"recipe-hero-image",onError:t[0]||(t[0]=(...e)=>a.handleImageError&&a.handleImageError(...e))},null,40,ie),s("div",ae,[s("div",ne,[a.recipe.difficulty?(m(),p(g,{key:0,text:a.getDifficultyLabel(a.recipe.difficulty),icon:"restaurant",variant:"secondary",size:"medium"},null,8,["text"])):o("",!0),a.recipe.category?(m(),p(g,{key:1,text:a.recipe.category.name,icon:"tag",variant:"neutral",size:"medium"},null,8,["text"])):o("",!0)])])]),s("div",re,[s("div",oe,[s("div",se,[c(v,{name:"schedule",size:20,class:"dinor-text-secondary"}),s("span",le,u(a.recipe.cooking_time)+"min",1)]),s("div",ce,[c(v,{name:"group",size:20,class:"dinor-text-secondary"}),s("span",de,u(a.recipe.servings)+" pers.",1)]),s("div",ue,[c(v,{name:"favorite",size:20,class:"dinor-text-secondary"}),s("span",me,u(a.recipe.likes_count||0),1)]),s("div",pe,[c(v,{name:"comment",size:20,class:"dinor-text-secondary"}),s("span",ge,u(a.recipe.comments_count||0),1)])]),a.recipe.description?(m(),r("div",he,[t[13]||(t[13]=s("h2",{class:"md3-title-medium dinor-text-primary"},"Description",-1)),s("p",{class:"md3-body-large dinor-text-gray",innerHTML:a.recipe.description},null,8,ve)])):o("",!0),a.recipe.summary_video_url?(m(),r("div",ye,[t[14]||(t[14]=s("h2",{class:"md3-title-medium dinor-text-primary"},"Résumé en vidéo",-1)),s("div",be,[s("iframe",{src:a.getEmbedUrl(a.recipe.summary_video_url),title:`Résumé vidéo : ${a.recipe.title}`,frameborder:"0",allowfullscreen:"",class:"summary-video-iframe"},null,8,fe)])])):o("",!0),a.recipe.video_url?(m(),r("div",ke,[t[15]||(t[15]=s("h2",{class:"md3-title-medium dinor-text-primary"},"Vidéo de la recette",-1)),s("div",xe,[s("iframe",{src:a.getEmbedUrl(a.recipe.video_url),title:`Vidéo : ${a.recipe.title}`,frameborder:"0",allowfullscreen:"",class:"video-iframe"},null,8,we)])])):o("",!0),s("div",Ce,[a.recipe.ingredients&&a.recipe.ingredients.length?(m(),p(C,{key:0,title:"Ingrédients","initial-open":!0,id:"ingredients-accordion"},{default:y(()=>[s("ul",Ie,[(m(!0),r(b,null,f(a.recipe.ingredients,(e,t)=>(m(),r("li",{key:t,class:"ingredient-item"},[s("span",Le,u(a.formatIngredientDisplay(e)),1)]))),128))])]),_:1})):o("",!0),a.recipe.dinor_ingredients&&a.recipe.dinor_ingredients.length?(m(),p(C,{key:1,title:"Ingrédients Dinor","initial-open":!0,id:"dinor-ingredients-accordion"},{default:y(()=>[s("div",_e,[t[17]||(t[17]=s("p",{class:"dinor-ingredients-description md3-body-small"},[s("strong",null,"Ingrédients recommandés par Dinor"),k(" - Des produits sélectionnés pour leur qualité et leur saveur authentique. ")],-1)),s("ul",De,[(m(!0),r(b,null,f(a.recipe.dinor_ingredients,(e,i)=>(m(),r("li",{key:i,class:"dinor-ingredient-item"},[s("div",$e,[s("span",Re,u(a.formatDinorIngredientDisplay(e)),1),e.description?(m(),r("div",Ae,u(e.description),1)):o("",!0),e.brand||e.supplier?(m(),r("div",Ee,[c(v,{name:"verified",size:14,class:"dinor-brand-icon"}),k(" "+u(e.brand||e.supplier),1)])):o("",!0),e.purchase_url?(m(),r("div",Se,[s("button",{onClick:t=>a.openPurchaseLink(e.purchase_url),class:"dinor-purchase-button",title:"Acheter cet ingrédient"},[c(v,{name:"shopping_cart",size:16}),t[16]||(t[16]=k(" Acheter "))],8,Ue)])):o("",!0)])]))),128))])])]),_:1})):o("",!0),a.recipe.instructions?(m(),p(C,{key:2,title:"Instructions","initial-open":!0,id:"instructions-accordion"},{default:y(()=>[s("div",{class:"md3-body-large dinor-text-gray",innerHTML:a.formatInstructions(a.recipe.instructions)},null,8,ze)]),_:1})):o("",!0),a.recipe.gallery_urls&&a.recipe.gallery_urls.length?(m(),p(C,{key:3,title:"Galerie photos","initial-open":!1,id:"gallery-accordion"},{default:y(()=>[s("div",Me,[(m(!0),r(b,null,f(a.recipe.gallery_urls,(e,i)=>(m(),r("img",{key:i,src:e,alt:`${a.recipe.title} - Photo ${i+1}`,class:"gallery-image",onError:t[1]||(t[1]=(...e)=>a.handleImageError&&a.handleImageError(...e)),onClick:e=>a.openGalleryModal(i)},null,40,je))),128))])]),_:1})):o("",!0),c(C,{title:`Commentaires (${a.comments.length})`,"initial-open":!1,id:"comments-accordion"},{default:y(()=>[s("div",Be,[a.authStore.isAuthenticated?(m(),r("div",qe,[s("div",Oe,[s("span",Te,"Connecté en tant que "+u(a.authStore.userName),1),s("button",{onClick:t[3]||(t[3]=e=>a.authStore.logout()),class:"btn-logout"},"Déconnexion")]),x(s("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.newComment=e),placeholder:"Ajoutez votre commentaire...",class:"md3-textarea",rows:"3"},"                  ",512),[[w,a.newComment]]),s("button",{onClick:t[5]||(t[5]=(...e)=>a.addComment&&a.addComment(...e)),class:"btn-primary",disabled:!a.newComment.trim()}," Publier ",8,Ve)])):(m(),r("div",Fe,[t[18]||(t[18]=s("p",{class:"auth-prompt-text"},"Connectez-vous pour laisser un commentaire",-1)),s("button",{onClick:t[2]||(t[2]=e=>a.showAuthModal=!0),class:"btn-primary"}," Se connecter ")]))]),a.comments.length?(m(),r("div",He,[(m(!0),r(b,null,f(a.comments,e=>(m(),r("div",{key:e.id,class:"comment-item"},[s("div",Pe,[s("div",Ge,[s("span",Ne,u(e.author_name),1),s("span",Ke,u(a.formatDate(e.created_at)),1)]),a.canDeleteComment(e)?(m(),r("div",Xe,[s("button",{onClick:t=>a.deleteComment(e.id),class:"btn-delete",title:"Supprimer le commentaire"},[c(v,{name:"delete",size:16})],8,Je)])):o("",!0)]),s("p",Qe,u(e.content),1)]))),128))])):(m(),r("div",We,t[19]||(t[19]=[s("p",{class:"md3-body-medium dinor-text-gray"},"Aucun commentaire pour le moment.",-1)])))]),_:1},8,["title"])]),s("div",Ye,[c(I,{type:"recipe","item-id":a.recipe.id,"initial-liked":a.userLiked,"initial-count":a.recipe.likes_count||0,"show-count":!0,size:"medium",onAuthRequired:t[6]||(t[6]=e=>a.showAuthModal=!0),"onUpdate:liked":a.handleLikeUpdate,"onUpdate:count":a.handleLikeCountUpdate},null,8,["item-id","initial-liked","initial-count","onUpdate:liked","onUpdate:count"]),s("button",{onClick:t[7]||(t[7]=(...e)=>a.forceRefresh&&a.forceRefresh(...e)),class:"refresh-button",title:"Actualiser les données",disabled:a.loading},[c(v,{name:"refresh",size:20,class:h({spinning:a.loading})},null,8,["class"])],8,Ze),s("button",{onClick:t[8]||(t[8]=(...e)=>a.callShare&&a.callShare(...e)),class:"share-button",title:"Partager cette recette"},[c(v,{name:"share",size:20})])])])])):(m(),r("div",et,[s("div",tt,[c(v,{name:"error",size:64})]),t[20]||(t[20]=s("h2",{class:"md3-title-large"},"Recette introuvable",-1)),t[21]||(t[21]=s("p",{class:"md3-body-large dinor-text-gray"},"La recette demandée n'existe pas ou a été supprimée.",-1)),s("button",{onClick:t[9]||(t[9]=(...e)=>a.goBack&&a.goBack(...e)),class:"btn-primary"},"Retour")]))]),c(L,{modelValue:a.showShareModal,"onUpdate:modelValue":t[10]||(t[10]=e=>a.showShareModal=e),"share-data":a.shareData},null,8,["modelValue","share-data"]),c(_,{modelValue:a.showAuthModal,"onUpdate:modelValue":t[11]||(t[11]=e=>a.showAuthModal=e),onAuthenticated:a.handleAuthenticated},null,8,["modelValue","onAuthenticated"]),a.recipe&&a.recipe.gallery_urls?(m(),p(D,{key:0,images:a.recipe.gallery_urls,title:a.recipe.title,"initial-index":a.lightboxIndex,"is-open":a.showLightbox,onClose:a.closeLightbox},null,8,["images","title","initial-index","is-open","onClose"])):o("",!0)])}],["__scopeId","data-v-af86dcd4"]]);export{it as default};
