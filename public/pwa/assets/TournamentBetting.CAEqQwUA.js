import{e as a,f as e,p as s,q as t,x as n,l,F as i,B as o,n as c,t as r,g as u,D as d,y as m,A as p,r as v,h,o as y}from"./vendor.DPtJZQQS.js";import{_ as b,A as g,u as _,d as w}from"./index.C2Y7xW-Y.js";const k={class:"tournament-betting"},f={class:"md3-main-content"},S={class:"page-header"},B={class:"header-content"},x={class:"breadcrumb"},A={class:"tournament-selection"},M={key:0,class:"loading-state"},D={key:1,class:"tournaments-grid"},C=["onClick"],T={class:"tournament-header"},E={class:"tournament-name"},V={class:"tournament-badges"},P={key:0,class:"featured-badge"},W={class:"tournament-description"},q={class:"tournament-stats"},U={class:"stat"},z={key:0,class:"stat"},j={class:"stat"},$={class:"tournament-progress"},F={class:"progress-bar"},R={class:"progress-text"},I={key:0,class:"betting-interface"},N={class:"interface-header"},G={class:"section-title"},L={key:0,class:"user-balance"},Q={class:"matches-section"},O={key:0,class:"loading-state"},X={key:1,class:"no-matches"},H={key:2,class:"matches-grid"},J={class:"match-header"},K={class:"match-info"},Y={class:"round"},Z={class:"match-date"},aa={class:"betting-status"},ea={key:0,class:"status-open"},sa={key:1,class:"status-closed"},ta={class:"teams-section"},na={class:"team home-team"},la=["src","alt"],ia={key:1,class:"team-logo-placeholder"},oa={class:"team-info"},ca={class:"team-name"},ra={class:"team-country"},ua={class:"vs-section"},da={key:0,class:"odds-display"},ma={class:"odd-item"},pa={class:"odd-value"},va={class:"odd-item"},ha={class:"odd-value"},ya={class:"odd-item"},ba={class:"odd-value"},ga={class:"team away-team"},_a=["src","alt"],wa={key:1,class:"team-logo-placeholder"},ka={class:"team-info"},fa={class:"team-name"},Sa={class:"team-country"},Ba={key:0,class:"betting-form"},xa={class:"bet-types"},Aa={class:"bet-type score-prediction"},Ma={class:"score-inputs"},Da={class:"score-input"},Ca=["onUpdate:modelValue"],Ta={class:"score-input"},Ea=["onUpdate:modelValue"],Va={class:"bet-type winner-prediction"},Pa={class:"winner-options"},Wa=["onClick"],qa=["onClick"],Ua=["onClick"],za={class:"bet-type bet-amount"},ja={class:"amount-input"},$a=["onUpdate:modelValue","max"],Fa={class:"quick-amounts"},Ra=["onClick"],Ia={class:"bet-summary"},Na={class:"summary-item"},Ga={class:"summary-item"},La={class:"summary-item"},Qa=["onClick","disabled"],Oa={key:0,class:"loading-spinner"},Xa={key:1},Ha={key:1,class:"auth-required"},Ja={key:2,class:"existing-bet"},Ka={class:"bet-details"},Ya={class:"detail-item"},Za={class:"detail-item"},ae={class:"detail-item"},ee={class:"betting-stats"},se={class:"stats-grid"},te={class:"stat-card"},ne={class:"stat-content"},le={class:"stat-value"},ie={class:"stat-card"},oe={class:"stat-content"},ce={class:"stat-value"},re={class:"stat-card"},ue={class:"stat-content"},de={class:"stat-value"},me={class:"stat-card"},pe={class:"stat-content"},ve={class:"stat-value"},he={key:1,class:"no-tournament-selected"};const ye=b({name:"TournamentBetting",components:{AuthModal:g},setup(){const a=_(),e=w(),s=v([]),t=v(null),n=v([]);v({});const l=v({}),i=v({}),o=v(1e3),c=v(!0),r=v(!1),u=v(!1),d=v(!1),m=v({}),p=a=>(m.value[a]||(m.value[a]={homeScore:0,awayScore:0,winner:null,amount:10}),m.value[a]),y=a=>{switch(a){case"home":return"Victoire domicile";case"away":return"Victoire extérieur";case"draw":return"Match nul";default:return"Non défini"}},b=a=>{const e=p(a);return null!==e.homeScore&&null!==e.awayScore&&e.winner&&e.amount>0&&e.amount<=o.value},g=async e=>{try{r.value=!0;const s=await a.get(`/tournaments/${e}/matches/betting`);s.success&&(n.value=s.data)}catch(s){console.error("Erreur chargement matchs:",s)}finally{r.value=!1}},k=async e=>{try{const s=await a.get(`/tournaments/${e}/my-bets`);s.success&&(l.value=s.data.reduce((a,e)=>(a[e.football_match_id]=e,a),{}))}catch(s){console.error("Erreur chargement paris utilisateur:",s)}},f=async()=>{try{const e=await a.get("/betting/my-stats");e.success&&(i.value=e.data)}catch(e){console.error("Erreur chargement stats:",e)}};return h(()=>{(async()=>{try{c.value=!0;const e=await a.get("/tournaments/betting-available");e.success&&(s.value=e.data)}catch(e){console.error("Erreur chargement tournois:",e)}finally{c.value=!1}})()}),{availableTournaments:s,selectedTournament:t,tournamentMatches:n,userStats:i,userBalance:o,loadingTournaments:c,loadingMatches:r,submitting:u,showAuthModal:d,quickAmounts:[10,25,50,100,250],apiStore:a,authStore:e,selectTournament:async a=>{t.value=a,await g(a.id),e.isAuthenticated&&(await k(a.id),await f())},getBetData:p,setBetWinner:(a,e)=>{p(a).winner=e},setQuickAmount:(a,e)=>{p(a).amount=Math.min(e,o.value)},getBetSummary:a=>{const e=p(a);return null!==e.homeScore&&null!==e.awayScore&&e.winner?`${e.homeScore}-${e.awayScore}, ${y(e.winner)}`:"Aucune prédiction"},getWinnerText:y,calculatePotentialWin:a=>{const e=p(a),s=e.amount||0;return e.winner&&s>0?Math.round(2*s*1.5):0},canSubmitBet:b,getExistingBet:a=>l.value[a],submitBet:async s=>{if(b(s))try{u.value=!0;const t=p(s),n=await a.post(`/matches/${s}/bet`,{predicted_home_score:t.homeScore,predicted_away_score:t.awayScore,predicted_winner:t.winner,bet_amount:t.amount});n.success&&(o.value-=t.amount,l.value[s]=n.data,delete m.value[s],alert("Pari placé avec succès!"),e.isAuthenticated&&await f())}catch(t){console.error("Erreur soumission pari:",t),alert("Erreur lors de la soumission du pari")}finally{u.value=!1}},handleAuthenticated:()=>{d.value=!1,t.value&&(k(t.value.id),f())},formatCurrency:(a,e="EUR")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(a),formatDate:a=>new Date(a).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}),formatMatchDateTime:a=>new Date(a).toLocaleString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}}},[["render",function(v,h,b,g,_,w){const ye=l("router-link"),be=l("AuthModal");return y(),a("div",k,[e("main",f,[e("div",S,[e("div",B,[e("div",x,[s(ye,{to:"/predictions",class:"breadcrumb-link"},{default:t(()=>h[2]||(h[2]=[n("Prédictions")])),_:1,__:[2]}),h[3]||(h[3]=e("span",{class:"material-symbols-outlined"},"chevron_right",-1)),h[4]||(h[4]=e("span",{class:"current-page"},"Paris de Tournois",-1))]),h[5]||(h[5]=e("h1",{class:"md3-title-large dinor-text-primary"},"Interface de Paris",-1)),h[6]||(h[6]=e("p",{class:"md3-body-medium dinor-text-gray"}," Pariez intelligemment sur les tournois et maximisez vos gains ",-1))])]),e("div",A,[h[12]||(h[12]=e("h2",{class:"section-title"},[e("span",{class:"material-symbols-outlined"},"emoji_events"),n(" Sélectionner un tournoi ")],-1)),g.loadingTournaments?(y(),a("div",M,h[7]||(h[7]=[e("div",{class:"md3-circular-progress"},null,-1),e("p",null,"Chargement des tournois...",-1)]))):(y(),a("div",D,[(y(!0),a(i,null,o(g.availableTournaments,s=>{var t;return y(),a("div",{key:s.id,class:c(["tournament-card",{selected:(null==(t=g.selectedTournament)?void 0:t.id)===s.id}]),onClick:a=>g.selectTournament(s)},[e("div",T,[e("h3",E,r(s.name),1),e("div",V,[e("span",{class:c(["status-badge",s.status])},r(s.status_label),3),s.is_featured?(y(),a("span",P,h[8]||(h[8]=[e("span",{class:"material-symbols-outlined"},"star",-1),n(" Vedette ")]))):u("",!0)])]),e("p",W,r(s.description),1),e("div",q,[e("div",U,[h[9]||(h[9]=e("span",{class:"material-symbols-outlined"},"group",-1)),e("span",null,r(s.participants_count)+" participants",1)]),s.prize_pool>0?(y(),a("div",z,[h[10]||(h[10]=e("span",{class:"material-symbols-outlined"},"emoji_events",-1)),e("span",null,r(g.formatCurrency(s.prize_pool,s.currency)),1)])):u("",!0),e("div",j,[h[11]||(h[11]=e("span",{class:"material-symbols-outlined"},"schedule",-1)),e("span",null,r(g.formatDate(s.end_date)),1)])]),e("div",$,[e("div",F,[e("div",{class:"progress-fill",style:d({width:s.progress_percentage+"%"})},null,4)]),e("span",R,r(s.progress_percentage)+"% terminé",1)])],10,C)}),128))]))]),g.selectedTournament?(y(),a("div",I,[e("div",N,[e("h2",G,[h[13]||(h[13]=e("span",{class:"material-symbols-outlined"},"casino",-1)),n(" Interface de Paris - "+r(g.selectedTournament.name),1)]),g.authStore.isAuthenticated?(y(),a("div",L,[h[14]||(h[14]=e("span",{class:"material-symbols-outlined"},"account_balance_wallet",-1)),e("span",null,"Solde: "+r(g.userBalance)+" points",1)])):u("",!0)]),e("div",Q,[h[40]||(h[40]=e("h3",{class:"subsection-title"},"Matchs disponibles",-1)),g.loadingMatches?(y(),a("div",O,h[15]||(h[15]=[e("div",{class:"md3-circular-progress"},null,-1),e("p",null,"Chargement des matchs...",-1)]))):0===g.tournamentMatches.length?(y(),a("div",X,h[16]||(h[16]=[e("span",{class:"material-symbols-outlined"},"sports_soccer",-1),e("h3",null,"Aucun match disponible",-1),e("p",null,"Aucun match n'est actuellement ouvert aux paris pour ce tournoi.",-1)]))):(y(),a("div",H,[(y(!0),a(i,null,o(g.tournamentMatches,s=>(y(),a("div",{key:s.id,class:"match-betting-card"},[e("div",J,[e("div",K,[e("span",Y,r(s.round||"Match"),1),e("span",Z,r(g.formatMatchDateTime(s.match_date)),1)]),e("div",aa,[s.can_predict?(y(),a("span",ea,h[17]||(h[17]=[e("span",{class:"material-symbols-outlined"},"lock_open",-1),n(" Paris ouverts ")]))):(y(),a("span",sa,h[18]||(h[18]=[e("span",{class:"material-symbols-outlined"},"lock",-1),n(" Paris fermés ")])))])]),e("div",ta,[e("div",na,[s.home_team.logo_url?(y(),a("img",{key:0,src:s.home_team.logo_url,alt:s.home_team.name,class:"team-logo"},null,8,la)):(y(),a("div",ia,h[19]||(h[19]=[e("span",{class:"material-symbols-outlined"},"shield",-1)]))),e("div",oa,[e("h4",ca,r(s.home_team.name),1),e("span",ra,r(s.home_team.country),1)])]),e("div",ua,[h[23]||(h[23]=e("span",{class:"vs-text"},"VS",-1)),s.odds?(y(),a("div",da,[e("div",ma,[h[20]||(h[20]=e("span",{class:"odd-label"},"Dom.",-1)),e("span",pa,r(s.odds.home),1)]),e("div",va,[h[21]||(h[21]=e("span",{class:"odd-label"},"Nul",-1)),e("span",ha,r(s.odds.draw),1)]),e("div",ya,[h[22]||(h[22]=e("span",{class:"odd-label"},"Ext.",-1)),e("span",ba,r(s.odds.away),1)])])):u("",!0)]),e("div",ga,[s.away_team.logo_url?(y(),a("img",{key:0,src:s.away_team.logo_url,alt:s.away_team.name,class:"team-logo"},null,8,_a)):(y(),a("div",wa,h[24]||(h[24]=[e("span",{class:"material-symbols-outlined"},"shield",-1)]))),e("div",ka,[e("h4",fa,r(s.away_team.name),1),e("span",Sa,r(s.away_team.country),1)])])]),s.can_predict&&g.authStore.isAuthenticated?(y(),a("div",Ba,[e("div",xa,[h[29]||(h[29]=e("h4",{class:"form-title"},"Types de paris",-1)),e("div",Aa,[h[26]||(h[26]=e("label",{class:"bet-label"},[e("span",{class:"material-symbols-outlined"},"sports_score"),n(" Prédiction de score ")],-1)),e("div",Ma,[e("div",Da,[e("label",null,r(s.home_team.short_name||"DOM"),1),m(e("input",{"onUpdate:modelValue":a=>g.getBetData(s.id).homeScore=a,type:"number",min:"0",max:"10",class:"score-field"},null,8,Ca),[[p,g.getBetData(s.id).homeScore,void 0,{number:!0}]])]),h[25]||(h[25]=e("span",{class:"score-separator"},"-",-1)),e("div",Ta,[e("label",null,r(s.away_team.short_name||"EXT"),1),m(e("input",{"onUpdate:modelValue":a=>g.getBetData(s.id).awayScore=a,type:"number",min:"0",max:"10",class:"score-field"},null,8,Ea),[[p,g.getBetData(s.id).awayScore,void 0,{number:!0}]])])])]),e("div",Va,[h[27]||(h[27]=e("label",{class:"bet-label"},[e("span",{class:"material-symbols-outlined"},"emoji_events"),n(" Vainqueur ")],-1)),e("div",Pa,[e("button",{class:c(["winner-btn",{active:"home"===g.getBetData(s.id).winner}]),onClick:a=>g.setBetWinner(s.id,"home")},r(s.home_team.short_name||"Domicile"),11,Wa),e("button",{class:c(["winner-btn",{active:"draw"===g.getBetData(s.id).winner}]),onClick:a=>g.setBetWinner(s.id,"draw")}," Match nul ",10,qa),e("button",{class:c(["winner-btn",{active:"away"===g.getBetData(s.id).winner}]),onClick:a=>g.setBetWinner(s.id,"away")},r(s.away_team.short_name||"Extérieur"),11,Ua)])]),e("div",za,[h[28]||(h[28]=e("label",{class:"bet-label"},[e("span",{class:"material-symbols-outlined"},"payments"),n(" Mise (points) ")],-1)),e("div",ja,[m(e("input",{"onUpdate:modelValue":a=>g.getBetData(s.id).amount=a,type:"number",min:"1",max:g.userBalance,placeholder:"Montant en points",class:"amount-field"},null,8,$a),[[p,g.getBetData(s.id).amount,void 0,{number:!0}]]),e("div",Fa,[(y(!0),a(i,null,o(g.quickAmounts,e=>(y(),a("button",{key:e,onClick:a=>g.setQuickAmount(s.id,e),class:"quick-amount-btn"},r(e),9,Ra))),128))])])])]),e("div",Ia,[e("div",Na,[h[30]||(h[30]=e("span",null,"Prédiction:",-1)),e("span",null,r(g.getBetSummary(s.id)),1)]),e("div",Ga,[h[31]||(h[31]=e("span",null,"Mise:",-1)),e("span",null,r(g.getBetData(s.id).amount||0)+" points",1)]),e("div",La,[h[32]||(h[32]=e("span",null,"Gain potentiel:",-1)),e("span",null,r(g.calculatePotentialWin(s.id))+" points",1)])]),e("button",{onClick:a=>g.submitBet(s.id),disabled:!g.canSubmitBet(s.id)||g.submitting,class:"btn-primary submit-bet"},[g.submitting?(y(),a("span",Oa)):(y(),a("span",Xa,h[33]||(h[33]=[e("span",{class:"material-symbols-outlined"},"casino",-1),n(" Placer le pari ")])))],8,Qa)])):s.can_predict&&!g.authStore.isAuthenticated?(y(),a("div",Ha,[h[34]||(h[34]=e("span",{class:"material-symbols-outlined"},"login",-1)),h[35]||(h[35]=e("p",null,"Connectez-vous pour parier sur ce match",-1)),e("button",{onClick:h[0]||(h[0]=a=>g.showAuthModal=!0),class:"btn-primary"}," Se connecter ")])):u("",!0),g.getExistingBet(s.id)?(y(),a("div",Ja,[h[39]||(h[39]=e("h4",{class:"existing-bet-title"},"Votre pari actuel",-1)),e("div",Ka,[e("div",Ya,[h[36]||(h[36]=e("span",{class:"material-symbols-outlined"},"sports_score",-1)),e("span",null,r(g.getExistingBet(s.id).predicted_home_score)+"-"+r(g.getExistingBet(s.id).predicted_away_score),1)]),e("div",Za,[h[37]||(h[37]=e("span",{class:"material-symbols-outlined"},"emoji_events",-1)),e("span",null,r(g.getWinnerText(g.getExistingBet(s.id).predicted_winner)),1)]),e("div",ae,[h[38]||(h[38]=e("span",{class:"material-symbols-outlined"},"payments",-1)),e("span",null,r(g.getExistingBet(s.id).bet_amount||0)+" points",1)])])])):u("",!0)]))),128))]))]),e("div",ee,[h[49]||(h[49]=e("h3",{class:"subsection-title"},[e("span",{class:"material-symbols-outlined"},"analytics"),n(" Vos statistiques de paris ")],-1)),e("div",se,[e("div",te,[h[42]||(h[42]=e("div",{class:"stat-icon"},[e("span",{class:"material-symbols-outlined"},"casino")],-1)),e("div",ne,[e("h4",le,r(g.userStats.totalBets||0),1),h[41]||(h[41]=e("p",{class:"stat-label"},"Paris placés",-1))])]),e("div",ie,[h[44]||(h[44]=e("div",{class:"stat-icon"},[e("span",{class:"material-symbols-outlined"},"trending_up")],-1)),e("div",oe,[e("h4",ce,r(g.userStats.winRate||0)+"%",1),h[43]||(h[43]=e("p",{class:"stat-label"},"Taux de réussite",-1))])]),e("div",re,[h[46]||(h[46]=e("div",{class:"stat-icon"},[e("span",{class:"material-symbols-outlined"},"payments")],-1)),e("div",ue,[e("h4",de,r(g.userStats.totalWinnings||0),1),h[45]||(h[45]=e("p",{class:"stat-label"},"Gains totaux",-1))])]),e("div",me,[h[48]||(h[48]=e("div",{class:"stat-icon"},[e("span",{class:"material-symbols-outlined"},"leaderboard")],-1)),e("div",pe,[e("h4",ve,"#"+r(g.userStats.rank||"N/A"),1),h[47]||(h[47]=e("p",{class:"stat-label"},"Classement",-1))])])])])])):(y(),a("div",he,h[50]||(h[50]=[e("div",{class:"placeholder-content"},[e("span",{class:"material-symbols-outlined"},"casino"),e("h3",null,"Sélectionnez un tournoi"),e("p",null,"Choisissez un tournoi ci-dessus pour commencer à parier")],-1)])))]),s(be,{modelValue:g.showAuthModal,"onUpdate:modelValue":h[1]||(h[1]=a=>g.showAuthModal=a),onAuthenticated:g.handleAuthenticated},null,8,["modelValue","onAuthenticated"])])}],["__scopeId","data-v-54311a47"]]);export{ye as default};
