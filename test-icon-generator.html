<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test du g√©n√©rateur d'ic√¥nes Dinor</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
        .status { margin: 10px 0; font-weight: bold; }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
        button { padding: 10px 20px; margin: 5px; background: #E1251B; color: white; border: none; border-radius: 5px; cursor: pointer; }
        canvas { border: 1px solid #ccc; margin: 5px; }
    </style>
</head>
<body>
    <h1>üß™ Test du g√©n√©rateur d'ic√¥nes Dinor</h1>
    
    <div class="test-section">
        <h2>1. Test de chargement du logo SVG</h2>
        <button onclick="testLogoLoad()">Tester le chargement du logo</button>
        <div id="logo-status" class="status"></div>
        <div id="logo-preview"></div>
    </div>
    
    <div class="test-section">
        <h2>2. Test de g√©n√©ration d'ic√¥ne simple</h2>
        <button onclick="testIconGeneration()">G√©n√©rer une ic√¥ne test 128x128</button>
        <div id="icon-status" class="status"></div>
        <div id="icon-preview"></div>
    </div>
    
    <div class="test-section">
        <h2>3. Informations de d√©bogage</h2>
        <div id="debug-info"></div>
    </div>

    <script>
        function updateStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `status ${type}`;
            console.log(`[${type.toUpperCase()}] ${message}`);
        }
        
        function testLogoLoad() {
            updateStatus('logo-status', 'üîÑ Test de chargement du logo...');
            
            const img = new Image();
            img.crossOrigin = 'anonymous';
            
            img.onload = function() {
                updateStatus('logo-status', '‚úÖ Logo charg√© avec succ√®s !', 'success');
                
                // Afficher les informations du logo
                const info = `
                    Dimensions: ${img.naturalWidth}x${img.naturalHeight}px
                    Ratio: ${(img.naturalWidth / img.naturalHeight).toFixed(2)}
                    Taille affich√©e: ${img.width}x${img.height}px
                `;
                
                // Afficher l'aper√ßu
                const preview = document.getElementById('logo-preview');
                preview.innerHTML = `
                    <p><strong>Informations du logo:</strong></p>
                    <pre>${info}</pre>
                    <p><strong>Aper√ßu:</strong></p>
                `;
                
                // Cr√©er un canvas pour afficher le logo
                const canvas = document.createElement('canvas');
                canvas.width = 200;
                canvas.height = 200;
                const ctx = canvas.getContext('2d');
                
                // Fond blanc
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, 200, 200);
                
                // Dessiner le logo centr√©
                const aspectRatio = img.naturalWidth / img.naturalHeight;
                let drawWidth, drawHeight;
                
                if (aspectRatio > 1) {
                    drawWidth = 180;
                    drawHeight = drawWidth / aspectRatio;
                } else {
                    drawHeight = 180;
                    drawWidth = drawHeight * aspectRatio;
                }
                
                const x = (200 - drawWidth) / 2;
                const y = (200 - drawHeight) / 2;
                
                ctx.drawImage(img, x, y, drawWidth, drawHeight);
                
                preview.appendChild(canvas);
            };
            
            img.onerror = function() {
                updateStatus('logo-status', '‚ùå Erreur lors du chargement du logo', 'error');
                
                // Diagnostic
                const preview = document.getElementById('logo-preview');
                preview.innerHTML = `
                    <p><strong>Erreur de chargement !</strong></p>
                    <p>Chemin test√©: <code>/images/Dinor-Logo.svg</code></p>
                    <p>V√©rifiez que le fichier existe et est accessible.</p>
                `;
            };
            
            img.src = '/images/Dinor-Logo.svg';
        }
        
        function testIconGeneration() {
            updateStatus('icon-status', 'üîÑ G√©n√©ration d\'une ic√¥ne test...');
            
            const img = new Image();
            img.crossOrigin = 'anonymous';
            
            img.onload = function() {
                updateStatus('icon-status', '‚úÖ Ic√¥ne g√©n√©r√©e avec succ√®s !', 'success');
                
                // G√©n√©rer une ic√¥ne 128x128
                const canvas = document.createElement('canvas');
                canvas.width = 128;
                canvas.height = 128;
                const ctx = canvas.getContext('2d');
                
                // Fond blanc
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, 128, 128);
                
                // Calculer les dimensions
                const aspectRatio = img.naturalWidth / img.naturalHeight;
                let drawWidth, drawHeight;
                
                if (aspectRatio > 1) {
                    drawWidth = 128 * 0.85;
                    drawHeight = drawWidth / aspectRatio;
                } else {
                    drawHeight = 128 * 0.85;
                    drawWidth = drawHeight * aspectRatio;
                }
                
                const x = (128 - drawWidth) / 2;
                const y = (128 - drawHeight) / 2;
                
                ctx.drawImage(img, x, y, drawWidth, drawHeight);
                
                // Afficher l'ic√¥ne g√©n√©r√©e
                const preview = document.getElementById('icon-preview');
                preview.innerHTML = '<p><strong>Ic√¥ne g√©n√©r√©e 128x128:</strong></p>';
                preview.appendChild(canvas);
                
                // Ajouter un bouton de t√©l√©chargement
                const downloadBtn = document.createElement('button');
                downloadBtn.textContent = 'T√©l√©charger l\'ic√¥ne test';
                downloadBtn.onclick = function() {
                    const link = document.createElement('a');
                    link.download = 'icon-test-128x128.png';
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                };
                preview.appendChild(downloadBtn);
            };
            
            img.onerror = function() {
                updateStatus('icon-status', '‚ùå Impossible de g√©n√©rer l\'ic√¥ne', 'error');
            };
            
            img.src = '/images/Dinor-Logo.svg';
        }
        
        // Informations de d√©bogage au chargement
        window.addEventListener('load', function() {
            const debugInfo = document.getElementById('debug-info');
            debugInfo.innerHTML = `
                <h3>Informations syst√®me :</h3>
                <ul>
                    <li><strong>User Agent:</strong> ${navigator.userAgent}</li>
                    <li><strong>URL actuelle:</strong> ${window.location.href}</li>
                    <li><strong>Protocole:</strong> ${window.location.protocol}</li>
                    <li><strong>Support Canvas:</strong> ${!!document.createElement('canvas').getContext}</li>
                    <li><strong>Support Image:</strong> ${!!window.Image}</li>
                </ul>
                <p><strong>Chemin du logo test√©:</strong> <code>/images/Dinor-Logo.svg</code></p>
                <p><em>Cliquez sur les boutons ci-dessus pour tester le g√©n√©rateur.</em></p>
            `;
        });
    </script>
</body>
</html> 