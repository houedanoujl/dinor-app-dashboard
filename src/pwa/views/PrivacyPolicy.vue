<template>
  <div class="legal-page">
    <div class="legal-content">
      <header class="legal-header">
        <h1 class="legal-title">Politique de Confidentialité</h1>
        <p class="legal-date">Dernière mise à jour : {{ lastUpdated }}</p>
      </header>

      <div class="legal-body">
        <section class="legal-section">
          <h2>1. Introduction</h2>
          <p>
            Dinor (ci-après "nous", "notre" ou "la Société") s'engage à protéger la confidentialité de vos données personnelles. 
            Cette Politique de Confidentialité explique comment nous collectons, utilisons, stockons et protégeons vos informations 
            lorsque vous utilisez notre application mobile et web (ci-après "l'Application").
          </p>
          <p>
            Cette politique est conforme au Règlement Général sur la Protection des Données (RGPD) et à la loi française relative 
            à l'informatique, aux fichiers et aux libertés.
          </p>
        </section>

        <section class="legal-section">
          <h2>2. Responsable du traitement</h2>
          <p>
            Le responsable du traitement des données personnelles est :<br>
            <strong>Dinor</strong><br>
            Email : <a href="mailto:privacy@dinor.app" class="legal-link">privacy@dinor.app</a><br>
            Contact DPO : <a href="mailto:dpo@dinor.app" class="legal-link">dpo@dinor.app</a>
          </p>
        </section>

        <section class="legal-section">
          <h2>3. Données personnelles collectées</h2>
          
          <h3>3.1 Données d'inscription</h3>
          <p>Lors de la création de votre compte, nous collectons :</p>
          <ul>
            <li>Nom d'utilisateur</li>
            <li>Adresse email</li>
            <li>Mot de passe (crypté)</li>
          </ul>

          <h3>3.2 Données d'utilisation</h3>
          <p>Lors de votre utilisation de l'Application, nous pouvons collecter :</p>
          <ul>
            <li>Historique de navigation et d'interaction</li>
            <li>Recettes consultées et ajoutées aux favoris</li>
            <li>Commentaires et avis publiés</li>
            <li>Préférences culinaires</li>
            <li>Données de géolocalisation (avec votre consentement)</li>
          </ul>

          <h3>3.3 Données techniques</h3>
          <p>Nous collectons automatiquement certaines informations techniques :</p>
          <ul>
            <li>Adresse IP</li>
            <li>Type de navigateur et version</li>
            <li>Système d'exploitation</li>
            <li>Résolution d'écran</li>
            <li>Données de cookies et technologies similaires</li>
            <li>Logs de connexion et d'utilisation</li>
          </ul>
        </section>

        <section class="legal-section">
          <h2>4. Finalités du traitement</h2>
          <p>Nous utilisons vos données personnelles pour :</p>
          
          <h3>4.1 Fourniture du service</h3>
          <ul>
            <li>Créer et gérer votre compte utilisateur</li>
            <li>Personnaliser votre expérience utilisateur</li>
            <li>Fournir les fonctionnalités de l'Application</li>
            <li>Traiter vos demandes et commentaires</li>
          </ul>

          <h3>4.2 Communication</h3>
          <ul>
            <li>Vous envoyer des notifications relatives au service</li>
            <li>Répondre à vos questions et demandes d'assistance</li>
            <li>Vous informer des nouveautés (avec votre consentement)</li>
          </ul>

          <h3>4.3 Amélioration du service</h3>
          <ul>
            <li>Analyser l'utilisation de l'Application</li>
            <li>Développer de nouvelles fonctionnalités</li>
            <li>Résoudre les problèmes techniques</li>
            <li>Réaliser des statistiques anonymisées</li>
          </ul>

          <h3>4.4 Sécurité et conformité</h3>
          <ul>
            <li>Détecter et prévenir les fraudes</li>
            <li>Assurer la sécurité de l'Application</li>
            <li>Respecter nos obligations légales</li>
          </ul>
        </section>

        <section class="legal-section">
          <h2>5. Base légale du traitement</h2>
          <p>Nous traitons vos données personnelles sur la base de :</p>
          <ul>
            <li><strong>Consentement :</strong> pour les newsletters et communications marketing</li>
            <li><strong>Exécution du contrat :</strong> pour la fourniture du service</li>
            <li><strong>Intérêt légitime :</strong> pour l'amélioration du service et la sécurité</li>
            <li><strong>Obligation légale :</strong> pour le respect de la réglementation</li>
          </ul>
        </section>

        <section class="legal-section">
          <h2>6. Partage des données</h2>
          
          <h3>6.1 Principe général</h3>
          <p>
            Nous ne vendons, ne louons ni ne partageons vos données personnelles avec des tiers à des fins commerciales, 
            sauf dans les cas décrits ci-dessous.
          </p>

          <h3>6.2 Partage autorisé</h3>
          <p>Nous pouvons partager vos données dans les situations suivantes :</p>
          <ul>
            <li><strong>Prestataires de services :</strong> hébergement, analyse, support client (sous contrat de confidentialité)</li>
            <li><strong>Obligations légales :</strong> en cas de demande des autorités compétentes</li>
            <li><strong>Protection des droits :</strong> pour protéger nos droits ou ceux des utilisateurs</li>
            <li><strong>Avec votre consentement :</strong> dans tout autre cas avec votre autorisation explicite</li>
          </ul>
        </section>

        <section class="legal-section">
          <h2>7. Transferts internationaux</h2>
          <p>
            Vos données personnelles peuvent être transférées et stockées dans des pays situés en dehors de l'Espace Économique Européen (EEE). 
            Dans ce cas, nous nous assurons que des garanties appropriées sont mises en place pour protéger vos données, 
            notamment par le biais de clauses contractuelles types approuvées par la Commission européenne.
          </p>
        </section>

        <section class="legal-section">
          <h2>8. Durée de conservation</h2>
          <p>Nous conservons vos données personnelles pendant les durées suivantes :</p>
          <ul>
            <li><strong>Compte actif :</strong> pendant toute la durée d'utilisation de votre compte</li>
            <li><strong>Compte supprimé :</strong> 30 jours après la suppression (pour permettre la récupération)</li>
            <li><strong>Données de logs :</strong> 12 mois maximum</li>
            <li><strong>Données comptables :</strong> 10 ans (obligation légale)</li>
            <li><strong>Données marketing :</strong> 3 ans après le dernier contact</li>
          </ul>
          <p>
            Au-delà de ces durées, vos données sont supprimées ou anonymisées, sauf obligation légale de conservation plus longue.
          </p>
        </section>

        <section class="legal-section">
          <h2>9. Sécurité des données</h2>
          <p>Nous mettons en œuvre des mesures techniques et organisationnelles appropriées pour protéger vos données :</p>
          <ul>
            <li>Chiffrement des données sensibles (HTTPS, cryptage des mots de passe)</li>
            <li>Accès restreint aux données personnelles</li>
            <li>Surveillance et détection des intrusions</li>
            <li>Sauvegardes régulières et sécurisées</li>
            <li>Formation du personnel à la protection des données</li>
            <li>Audits de sécurité réguliers</li>
          </ul>
        </section>

        <section class="legal-section">
          <h2>10. Vos droits</h2>
          <p>Conformément au RGPD, vous disposez des droits suivants :</p>
          
          <h3>10.1 Droit d'accès</h3>
          <p>Vous pouvez demander l'accès à vos données personnelles et obtenir des informations sur leur traitement.</p>

          <h3>10.2 Droit de rectification</h3>
          <p>Vous pouvez demander la correction de données inexactes ou incomplètes.</p>

          <h3>10.3 Droit à l'effacement</h3>
          <p>Vous pouvez demander la suppression de vos données dans certaines circonstances.</p>

          <h3>10.4 Droit à la limitation</h3>
          <p>Vous pouvez demander la limitation du traitement de vos données.</p>

          <h3>10.5 Droit à la portabilité</h3>
          <p>Vous pouvez demander la transmission de vos données dans un format structuré.</p>

          <h3>10.6 Droit d'opposition</h3>
          <p>Vous pouvez vous opposer au traitement de vos données pour des raisons légitimes.</p>

          <h3>10.7 Retrait du consentement</h3>
          <p>Vous pouvez retirer votre consentement à tout moment pour les traitements basés sur le consentement.</p>

          <h3>10.8 Exercice des droits</h3>
          <p>
            Pour exercer ces droits, contactez-nous à <a href="mailto:privacy@dinor.app" class="legal-link">privacy@dinor.app</a> 
            ou directement depuis les paramètres de votre compte dans l'Application.
          </p>
        </section>

        <section class="legal-section">
          <h2>11. Cookies et technologies similaires</h2>
          <p>
            Nous utilisons des cookies et technologies similaires pour améliorer votre expérience. 
            Pour plus d'informations, consultez notre 
            <router-link to="/cookies" class="legal-link">Politique des Cookies</router-link>.
          </p>
        </section>

        <section class="legal-section">
          <h2>12. Mineurs</h2>
          <p>
            Notre Application n'est pas destinée aux mineurs de moins de 16 ans. 
            Nous ne collectons pas sciemment de données personnelles auprès de mineurs de moins de 16 ans.
          </p>
        </section>

        <section class="legal-section">
          <h2>13. Modifications de la politique</h2>
          <p>
            Nous pouvons modifier cette Politique de Confidentialité à tout moment. 
            Les modifications importantes vous seront notifiées par email ou via l'Application.
          </p>
        </section>

        <section class="legal-section">
          <h2>14. Réclamations</h2>
          <p>
            Si vous estimez que vos droits ne sont pas respectés, vous pouvez introduire une réclamation auprès de 
            la Commission Nationale de l'Informatique et des Libertés (CNIL) :
          </p>
          <p>
            <strong>CNIL</strong><br>
            3 Place de Fontenoy - TSA 80715<br>
            75334 PARIS CEDEX 07<br>
            Téléphone : 01 53 73 22 22<br>
            Site web : <a href="https://www.cnil.fr" class="legal-link" target="_blank" rel="noopener">www.cnil.fr</a>
          </p>
        </section>

        <section class="legal-section">
          <h2>15. Contact</h2>
          <p>
            Pour toute question concernant cette Politique de Confidentialité ou le traitement de vos données personnelles, 
            contactez-nous :
          </p>
          <p>
            Email : <a href="mailto:privacy@dinor.app" class="legal-link">privacy@dinor.app</a><br>
            DPO : <a href="mailto:dpo@dinor.app" class="legal-link">dpo@dinor.app</a>
          </p>
        </section>
      </div>

      <footer class="legal-footer">
        <p>© {{ currentYear }} Dinor. Tous droits réservés.</p>
      </footer>
    </div>
  </div>
</template>

<script>
import { computed } from 'vue'

export default {
  name: 'PrivacyPolicy',
  setup() {
    const lastUpdated = computed(() => {
      return new Date('2024-01-01').toLocaleDateString('fr-FR', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      })
    })

    const currentYear = computed(() => {
      return new Date().getFullYear()
    })

    return {
      lastUpdated,
      currentYear
    }
  }
}
</script>

<style scoped>
.legal-page {
  min-height: 100vh;
  background: #FFFFFF;
  padding: 16px;
  padding-bottom: 100px; /* Space for bottom nav */
  font-family: 'Roboto', sans-serif;
}

.legal-content {
  max-width: 800px;
  margin: 0 auto;
  background: #FFFFFF;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  overflow: hidden;
}

.legal-header {
  background: linear-gradient(135deg, #E53E3E 0%, #C53030 100%);
  color: #FFFFFF;
  padding: 32px 24px;
  text-align: center;
}

.legal-title {
  margin: 0 0 8px 0;
  font-size: 28px;
  font-weight: 700;
  font-family: 'Open Sans', sans-serif;
}

.legal-date {
  margin: 0;
  font-size: 14px;
  opacity: 0.9;
}

.legal-body {
  padding: 32px 24px;
}

.legal-section {
  margin-bottom: 32px;
}

.legal-section:last-child {
  margin-bottom: 0;
}

.legal-section h2 {
  margin: 0 0 16px 0;
  font-size: 20px;
  font-weight: 600;
  color: #E53E3E;
  font-family: 'Open Sans', sans-serif;
  border-bottom: 2px solid #F4D03F;
  padding-bottom: 8px;
}

.legal-section h3 {
  margin: 24px 0 12px 0;
  font-size: 16px;
  font-weight: 600;
  color: #2D3748;
  font-family: 'Open Sans', sans-serif;
}

.legal-section p {
  margin: 0 0 16px 0;
  font-size: 14px;
  line-height: 1.6;
  color: #4A5568;
}

.legal-section p:last-child {
  margin-bottom: 0;
}

.legal-section ul {
  margin: 0 0 16px 0;
  padding-left: 24px;
}

.legal-section li {
  margin-bottom: 8px;
  font-size: 14px;
  line-height: 1.6;
  color: #4A5568;
}

.legal-link {
  color: #E53E3E;
  text-decoration: none;
  font-weight: 500;
  transition: color 0.2s ease;
}

.legal-link:hover {
  color: #C53030;
  text-decoration: underline;
}

.legal-footer {
  background: #F8F9FA;
  padding: 24px;
  text-align: center;
  border-top: 1px solid #E2E8F0;
}

.legal-footer p {
  margin: 0;
  font-size: 12px;
  color: #4A5568;
}

/* Responsive */
@media (max-width: 768px) {
  .legal-page {
    padding: 12px;
  }
  
  .legal-header {
    padding: 24px 16px;
  }
  
  .legal-title {
    font-size: 24px;
  }
  
  .legal-body {
    padding: 24px 16px;
  }
  
  .legal-section h2 {
    font-size: 18px;
  }
}

@media (max-width: 480px) {
  .legal-page {
    padding: 8px;
  }
  
  .legal-header {
    padding: 20px 12px;
  }
  
  .legal-title {
    font-size: 20px;
  }
  
  .legal-body {
    padding: 20px 12px;
  }
  
  .legal-footer {
    padding: 16px 12px;
  }
}
</style>